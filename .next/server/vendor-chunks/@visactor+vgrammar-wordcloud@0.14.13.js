"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@visactor+vgrammar-wordcloud@0.14.13";
exports.ids = ["vendor-chunks/@visactor+vgrammar-wordcloud@0.14.13"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/base.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/base.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLayout: () => (/* binding */ BaseLayout)\n/* harmony export */ });\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/merge.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isFunction.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isNil.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/angle.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/array.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/random.js\");\n/* harmony import */ var _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vgrammar-util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-util@0.14.13/node_modules/@visactor/vgrammar-util/es/shapes.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/util.js\");\n\n\n\n\n\n\nclass BaseLayout {\n    constructor(options) {\n        var _a, _b;\n        switch (this.options = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, BaseLayout.defaultOptions, options), (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.options.shape) ? this.shape = this.options.shape : this.shape = (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_2__.getShapeFunction)(this.options.shape), \n        this.getText = null !== (_a = (0,_util__WEBPACK_IMPORTED_MODULE_3__.functor)(this.options.text)) && void 0 !== _a ? _a : d => d, \n        this.getTextFontWeight = (0,_util__WEBPACK_IMPORTED_MODULE_3__.functor)(this.options.fontWeight), this.getTextFontSize = (0,_util__WEBPACK_IMPORTED_MODULE_3__.functor)(this.options.fontSize), \n        this.getTextFontStyle = (0,_util__WEBPACK_IMPORTED_MODULE_3__.functor)(this.options.fontStyle), this.getTextFontFamily = (0,_util__WEBPACK_IMPORTED_MODULE_3__.functor)(this.options.fontFamily), \n        this.outputCallback = null !== (_b = this.options.outputCallback) && void 0 !== _b ? _b : res => res, \n        this.options.color) {\n          case \"random-dark\":\n            this.getTextColor = () => (0,_util__WEBPACK_IMPORTED_MODULE_3__.randomHslColor)(10, 50);\n            break;\n\n          case \"random-light\":\n            this.getTextColor = () => (0,_util__WEBPACK_IMPORTED_MODULE_3__.randomHslColor)(50, 90);\n            break;\n\n          default:\n            this.getTextColor = (0,_util__WEBPACK_IMPORTED_MODULE_3__.functor)(this.options.color);\n        }\n        if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this.options.rotate)) if (this.options.useRandomRotate) {\n            const rotationRange = Math.abs(this.options.maxRotation - this.options.minRotation), rotationSteps = Math.abs(Math.floor(this.options.rotationSteps)), minRotation = Math.min(this.options.maxRotation, this.options.minRotation);\n            this.getTextRotate = () => 0 === this.options.rotateRatio || Math.random() > this.options.rotateRatio ? 0 : 0 === rotationRange ? minRotation : rotationSteps > 0 ? minRotation + Math.floor(Math.random() * rotationSteps) * rotationRange / (rotationSteps - 1) : minRotation + Math.random() * rotationRange;\n        } else this.getTextRotate = () => 0; else this.getTextRotate = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.options.rotate) ? d => {\n            var _a;\n            return (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_5__.degreeToRadian)(null !== (_a = this.options.rotate(d)) && void 0 !== _a ? _a : 0);\n        } : (d, i) => {\n            const rotates = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_6__.array)(this.options.rotate), random = this.options.random ? Math.random() : (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_7__.seedRandom)(i);\n            return (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_5__.degreeToRadian)(rotates[Math.floor(random * rotates.length)]);\n        };\n    }\n    canRepeat() {\n        return !1;\n    }\n    exceedTime() {\n        var _a;\n        return this.options.progressiveStep > 0 ? this.progressiveIndex >= ((null !== (_a = this.currentStepIndex) && void 0 !== _a ? _a : -1) + 1) * this.options.progressiveStep : this.options.progressiveTime > 0 && (new Date).getTime() - this.escapeTime > this.options.progressiveTime;\n    }\n    progressiveRun() {\n        var _a;\n        if (this.options.progressiveStep > 0 ? this.currentStepIndex = (null !== (_a = this.currentStepIndex) && void 0 !== _a ? _a : -1) + 1 : this.options.progressiveTime > 0 && (this.escapeTime = Date.now()), \n        this.data && this.progressiveIndex < this.data.length) {\n            this.progressiveResult = [];\n            let i = this.progressiveIndex, curWordTryCount = 0;\n            const maxSingleWordTryCount = this.options.maxSingleWordTryCount, maxFailCount = Math.min(this.options.maxFailCount, this.originalData.length);\n            for (;i < this.data.length && this.failCount < maxFailCount; ) {\n                const drawn = this.layoutWord(i);\n                if (curWordTryCount++, (drawn || curWordTryCount > maxSingleWordTryCount) && (i++, \n                curWordTryCount = 0, this.failCount = drawn ? 0 : this.failCount + 1), this.progressiveIndex = i, \n                this.exceedTime()) break;\n                i === this.data.length && this.failCount < maxFailCount && this.options.repeatFill && this.canRepeat() && (this.data = [ ...this.data, ...this.originalData.map((entry => Object.assign(Object.assign({}, entry), {\n                    isFill: !0\n                }))) ], this.isTryRepeatFill = !0);\n            }\n            return this.progressiveResult;\n        }\n        return this.result;\n    }\n    initProgressive() {\n        this.failCount = 0, this.progressiveIndex = 0, this.options.progressiveStep > 0 ? this.currentStepIndex = -1 : this.options.progressiveTime > 0 && (this.escapeTime = Date.now()), \n        this.progressiveResult = [];\n    }\n    output() {\n        return this.result ? this.outputCallback(this.result) : null;\n    }\n    progressiveOutput() {\n        return this.progressiveResult ? this.outputCallback(this.progressiveResult) : null;\n    }\n    unfinished() {\n        return this.data && this.data.length && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this.progressiveIndex) && this.progressiveIndex < this.data.length;\n    }\n    release() {\n        this.data = null, this.result = null, this.progressiveIndex = null, this.progressiveResult = null;\n    }\n}\n\nBaseLayout.defaultOptions = {\n    fontFamily: '\"Trebuchet MS\", \"Heiti TC\", \"微軟正黑體\", \"Arial Unicode MS\", \"Droid Fallback Sans\", sans-serif',\n    fontWeight: \"normal\",\n    color: \"random-dark\",\n    fontStyle: \"normal\",\n    minFontSize: 12,\n    drawOutOfBound: !1,\n    shrink: !1,\n    minRotation: -Math.PI / 2,\n    maxRotation: Math.PI / 2,\n    rotationSteps: 0,\n    rotateRatio: .1,\n    random: !1,\n    shape: \"circle\",\n    progressiveTime: 0,\n    progressiveStep: 0,\n    repeatFill: !1,\n    fillTextFontSize: 12,\n    maxFailCount: 20\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQStGOztBQUVwQzs7QUFFVjs7QUFFMUM7QUFDUDtBQUNBO0FBQ0EsK0JBQStCLDREQUFLLEdBQUcsdUNBQXVDLDREQUFVLHNFQUFzRSx5RUFBZ0I7QUFDOUssc0NBQXNDLDhDQUFPO0FBQzdDLGlDQUFpQyw4Q0FBTyxrREFBa0QsOENBQU87QUFDakcsZ0NBQWdDLDhDQUFPLG1EQUFtRCw4Q0FBTztBQUNqRztBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MscURBQWM7QUFDcEQ7O0FBRUE7QUFDQSxzQ0FBc0MscURBQWM7QUFDcEQ7O0FBRUE7QUFDQSxnQ0FBZ0MsOENBQU87QUFDdkM7QUFDQSxZQUFZLDREQUFLO0FBQ2pCO0FBQ0E7QUFDQSxVQUFVLG1DQUFtQywwQkFBMEIsNERBQVU7QUFDakY7QUFDQSxtQkFBbUIsZ0VBQWM7QUFDakMsVUFBVTtBQUNWLDRCQUE0Qix1REFBSyxzRUFBc0UsNERBQVU7QUFDakgsbUJBQW1CLGdFQUFjO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVEQUF1RDtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdOQUF3TjtBQUN4TjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCw0REFBSztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9meW5sYXRpY3MtYWkvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2Jhc2UuanM/ODRhZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhcnJheSwgZGVncmVlVG9SYWRpYW4sIGlzRnVuY3Rpb24sIGlzTmlsLCBtZXJnZSwgc2VlZFJhbmRvbSB9IGZyb20gXCJAdmlzYWN0b3IvdnV0aWxzXCI7XG5cbmltcG9ydCB7IGdldFNoYXBlRnVuY3Rpb24gfSBmcm9tIFwiQHZpc2FjdG9yL3ZncmFtbWFyLXV0aWxcIjtcblxuaW1wb3J0IHsgZnVuY3RvciwgcmFuZG9tSHNsQ29sb3IgfSBmcm9tIFwiLi91dGlsXCI7XG5cbmV4cG9ydCBjbGFzcyBCYXNlTGF5b3V0IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcHRpb25zID0gbWVyZ2Uoe30sIEJhc2VMYXlvdXQuZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpLCBpc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5zaGFwZSkgPyB0aGlzLnNoYXBlID0gdGhpcy5vcHRpb25zLnNoYXBlIDogdGhpcy5zaGFwZSA9IGdldFNoYXBlRnVuY3Rpb24odGhpcy5vcHRpb25zLnNoYXBlKSwgXG4gICAgICAgIHRoaXMuZ2V0VGV4dCA9IG51bGwgIT09IChfYSA9IGZ1bmN0b3IodGhpcy5vcHRpb25zLnRleHQpKSAmJiB2b2lkIDAgIT09IF9hID8gX2EgOiBkID0+IGQsIFxuICAgICAgICB0aGlzLmdldFRleHRGb250V2VpZ2h0ID0gZnVuY3Rvcih0aGlzLm9wdGlvbnMuZm9udFdlaWdodCksIHRoaXMuZ2V0VGV4dEZvbnRTaXplID0gZnVuY3Rvcih0aGlzLm9wdGlvbnMuZm9udFNpemUpLCBcbiAgICAgICAgdGhpcy5nZXRUZXh0Rm9udFN0eWxlID0gZnVuY3Rvcih0aGlzLm9wdGlvbnMuZm9udFN0eWxlKSwgdGhpcy5nZXRUZXh0Rm9udEZhbWlseSA9IGZ1bmN0b3IodGhpcy5vcHRpb25zLmZvbnRGYW1pbHkpLCBcbiAgICAgICAgdGhpcy5vdXRwdXRDYWxsYmFjayA9IG51bGwgIT09IChfYiA9IHRoaXMub3B0aW9ucy5vdXRwdXRDYWxsYmFjaykgJiYgdm9pZCAwICE9PSBfYiA/IF9iIDogcmVzID0+IHJlcywgXG4gICAgICAgIHRoaXMub3B0aW9ucy5jb2xvcikge1xuICAgICAgICAgIGNhc2UgXCJyYW5kb20tZGFya1wiOlxuICAgICAgICAgICAgdGhpcy5nZXRUZXh0Q29sb3IgPSAoKSA9PiByYW5kb21Ic2xDb2xvcigxMCwgNTApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwicmFuZG9tLWxpZ2h0XCI6XG4gICAgICAgICAgICB0aGlzLmdldFRleHRDb2xvciA9ICgpID0+IHJhbmRvbUhzbENvbG9yKDUwLCA5MCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aGlzLmdldFRleHRDb2xvciA9IGZ1bmN0b3IodGhpcy5vcHRpb25zLmNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOaWwodGhpcy5vcHRpb25zLnJvdGF0ZSkpIGlmICh0aGlzLm9wdGlvbnMudXNlUmFuZG9tUm90YXRlKSB7XG4gICAgICAgICAgICBjb25zdCByb3RhdGlvblJhbmdlID0gTWF0aC5hYnModGhpcy5vcHRpb25zLm1heFJvdGF0aW9uIC0gdGhpcy5vcHRpb25zLm1pblJvdGF0aW9uKSwgcm90YXRpb25TdGVwcyA9IE1hdGguYWJzKE1hdGguZmxvb3IodGhpcy5vcHRpb25zLnJvdGF0aW9uU3RlcHMpKSwgbWluUm90YXRpb24gPSBNYXRoLm1pbih0aGlzLm9wdGlvbnMubWF4Um90YXRpb24sIHRoaXMub3B0aW9ucy5taW5Sb3RhdGlvbik7XG4gICAgICAgICAgICB0aGlzLmdldFRleHRSb3RhdGUgPSAoKSA9PiAwID09PSB0aGlzLm9wdGlvbnMucm90YXRlUmF0aW8gfHwgTWF0aC5yYW5kb20oKSA+IHRoaXMub3B0aW9ucy5yb3RhdGVSYXRpbyA/IDAgOiAwID09PSByb3RhdGlvblJhbmdlID8gbWluUm90YXRpb24gOiByb3RhdGlvblN0ZXBzID4gMCA/IG1pblJvdGF0aW9uICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcm90YXRpb25TdGVwcykgKiByb3RhdGlvblJhbmdlIC8gKHJvdGF0aW9uU3RlcHMgLSAxKSA6IG1pblJvdGF0aW9uICsgTWF0aC5yYW5kb20oKSAqIHJvdGF0aW9uUmFuZ2U7XG4gICAgICAgIH0gZWxzZSB0aGlzLmdldFRleHRSb3RhdGUgPSAoKSA9PiAwOyBlbHNlIHRoaXMuZ2V0VGV4dFJvdGF0ZSA9IGlzRnVuY3Rpb24odGhpcy5vcHRpb25zLnJvdGF0ZSkgPyBkID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHJldHVybiBkZWdyZWVUb1JhZGlhbihudWxsICE9PSAoX2EgPSB0aGlzLm9wdGlvbnMucm90YXRlKGQpKSAmJiB2b2lkIDAgIT09IF9hID8gX2EgOiAwKTtcbiAgICAgICAgfSA6IChkLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByb3RhdGVzID0gYXJyYXkodGhpcy5vcHRpb25zLnJvdGF0ZSksIHJhbmRvbSA9IHRoaXMub3B0aW9ucy5yYW5kb20gPyBNYXRoLnJhbmRvbSgpIDogc2VlZFJhbmRvbShpKTtcbiAgICAgICAgICAgIHJldHVybiBkZWdyZWVUb1JhZGlhbihyb3RhdGVzW01hdGguZmxvb3IocmFuZG9tICogcm90YXRlcy5sZW5ndGgpXSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhblJlcGVhdCgpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBleGNlZWRUaW1lKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMucHJvZ3Jlc3NpdmVTdGVwID4gMCA/IHRoaXMucHJvZ3Jlc3NpdmVJbmRleCA+PSAoKG51bGwgIT09IChfYSA9IHRoaXMuY3VycmVudFN0ZXBJbmRleCkgJiYgdm9pZCAwICE9PSBfYSA/IF9hIDogLTEpICsgMSkgKiB0aGlzLm9wdGlvbnMucHJvZ3Jlc3NpdmVTdGVwIDogdGhpcy5vcHRpb25zLnByb2dyZXNzaXZlVGltZSA+IDAgJiYgKG5ldyBEYXRlKS5nZXRUaW1lKCkgLSB0aGlzLmVzY2FwZVRpbWUgPiB0aGlzLm9wdGlvbnMucHJvZ3Jlc3NpdmVUaW1lO1xuICAgIH1cbiAgICBwcm9ncmVzc2l2ZVJ1bigpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnByb2dyZXNzaXZlU3RlcCA+IDAgPyB0aGlzLmN1cnJlbnRTdGVwSW5kZXggPSAobnVsbCAhPT0gKF9hID0gdGhpcy5jdXJyZW50U3RlcEluZGV4KSAmJiB2b2lkIDAgIT09IF9hID8gX2EgOiAtMSkgKyAxIDogdGhpcy5vcHRpb25zLnByb2dyZXNzaXZlVGltZSA+IDAgJiYgKHRoaXMuZXNjYXBlVGltZSA9IERhdGUubm93KCkpLCBcbiAgICAgICAgdGhpcy5kYXRhICYmIHRoaXMucHJvZ3Jlc3NpdmVJbmRleCA8IHRoaXMuZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NpdmVSZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIGxldCBpID0gdGhpcy5wcm9ncmVzc2l2ZUluZGV4LCBjdXJXb3JkVHJ5Q291bnQgPSAwO1xuICAgICAgICAgICAgY29uc3QgbWF4U2luZ2xlV29yZFRyeUNvdW50ID0gdGhpcy5vcHRpb25zLm1heFNpbmdsZVdvcmRUcnlDb3VudCwgbWF4RmFpbENvdW50ID0gTWF0aC5taW4odGhpcy5vcHRpb25zLm1heEZhaWxDb3VudCwgdGhpcy5vcmlnaW5hbERhdGEubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAoO2kgPCB0aGlzLmRhdGEubGVuZ3RoICYmIHRoaXMuZmFpbENvdW50IDwgbWF4RmFpbENvdW50OyApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkcmF3biA9IHRoaXMubGF5b3V0V29yZChpKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VyV29yZFRyeUNvdW50KyssIChkcmF3biB8fCBjdXJXb3JkVHJ5Q291bnQgPiBtYXhTaW5nbGVXb3JkVHJ5Q291bnQpICYmIChpKyssIFxuICAgICAgICAgICAgICAgIGN1cldvcmRUcnlDb3VudCA9IDAsIHRoaXMuZmFpbENvdW50ID0gZHJhd24gPyAwIDogdGhpcy5mYWlsQ291bnQgKyAxKSwgdGhpcy5wcm9ncmVzc2l2ZUluZGV4ID0gaSwgXG4gICAgICAgICAgICAgICAgdGhpcy5leGNlZWRUaW1lKCkpIGJyZWFrO1xuICAgICAgICAgICAgICAgIGkgPT09IHRoaXMuZGF0YS5sZW5ndGggJiYgdGhpcy5mYWlsQ291bnQgPCBtYXhGYWlsQ291bnQgJiYgdGhpcy5vcHRpb25zLnJlcGVhdEZpbGwgJiYgdGhpcy5jYW5SZXBlYXQoKSAmJiAodGhpcy5kYXRhID0gWyAuLi50aGlzLmRhdGEsIC4uLnRoaXMub3JpZ2luYWxEYXRhLm1hcCgoZW50cnkgPT4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBlbnRyeSksIHtcbiAgICAgICAgICAgICAgICAgICAgaXNGaWxsOiAhMFxuICAgICAgICAgICAgICAgIH0pKSkgXSwgdGhpcy5pc1RyeVJlcGVhdEZpbGwgPSAhMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmVzc2l2ZVJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQ7XG4gICAgfVxuICAgIGluaXRQcm9ncmVzc2l2ZSgpIHtcbiAgICAgICAgdGhpcy5mYWlsQ291bnQgPSAwLCB0aGlzLnByb2dyZXNzaXZlSW5kZXggPSAwLCB0aGlzLm9wdGlvbnMucHJvZ3Jlc3NpdmVTdGVwID4gMCA/IHRoaXMuY3VycmVudFN0ZXBJbmRleCA9IC0xIDogdGhpcy5vcHRpb25zLnByb2dyZXNzaXZlVGltZSA+IDAgJiYgKHRoaXMuZXNjYXBlVGltZSA9IERhdGUubm93KCkpLCBcbiAgICAgICAgdGhpcy5wcm9ncmVzc2l2ZVJlc3VsdCA9IFtdO1xuICAgIH1cbiAgICBvdXRwdXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3VsdCA/IHRoaXMub3V0cHV0Q2FsbGJhY2sodGhpcy5yZXN1bHQpIDogbnVsbDtcbiAgICB9XG4gICAgcHJvZ3Jlc3NpdmVPdXRwdXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2dyZXNzaXZlUmVzdWx0ID8gdGhpcy5vdXRwdXRDYWxsYmFjayh0aGlzLnByb2dyZXNzaXZlUmVzdWx0KSA6IG51bGw7XG4gICAgfVxuICAgIHVuZmluaXNoZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmxlbmd0aCAmJiAhaXNOaWwodGhpcy5wcm9ncmVzc2l2ZUluZGV4KSAmJiB0aGlzLnByb2dyZXNzaXZlSW5kZXggPCB0aGlzLmRhdGEubGVuZ3RoO1xuICAgIH1cbiAgICByZWxlYXNlKCkge1xuICAgICAgICB0aGlzLmRhdGEgPSBudWxsLCB0aGlzLnJlc3VsdCA9IG51bGwsIHRoaXMucHJvZ3Jlc3NpdmVJbmRleCA9IG51bGwsIHRoaXMucHJvZ3Jlc3NpdmVSZXN1bHQgPSBudWxsO1xuICAgIH1cbn1cblxuQmFzZUxheW91dC5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBmb250RmFtaWx5OiAnXCJUcmVidWNoZXQgTVNcIiwgXCJIZWl0aSBUQ1wiLCBcIuW+rui7n+ato+m7kemrlFwiLCBcIkFyaWFsIFVuaWNvZGUgTVNcIiwgXCJEcm9pZCBGYWxsYmFjayBTYW5zXCIsIHNhbnMtc2VyaWYnLFxuICAgIGZvbnRXZWlnaHQ6IFwibm9ybWFsXCIsXG4gICAgY29sb3I6IFwicmFuZG9tLWRhcmtcIixcbiAgICBmb250U3R5bGU6IFwibm9ybWFsXCIsXG4gICAgbWluRm9udFNpemU6IDEyLFxuICAgIGRyYXdPdXRPZkJvdW5kOiAhMSxcbiAgICBzaHJpbms6ICExLFxuICAgIG1pblJvdGF0aW9uOiAtTWF0aC5QSSAvIDIsXG4gICAgbWF4Um90YXRpb246IE1hdGguUEkgLyAyLFxuICAgIHJvdGF0aW9uU3RlcHM6IDAsXG4gICAgcm90YXRlUmF0aW86IC4xLFxuICAgIHJhbmRvbTogITEsXG4gICAgc2hhcGU6IFwiY2lyY2xlXCIsXG4gICAgcHJvZ3Jlc3NpdmVUaW1lOiAwLFxuICAgIHByb2dyZXNzaXZlU3RlcDogMCxcbiAgICByZXBlYXRGaWxsOiAhMSxcbiAgICBmaWxsVGV4dEZvbnRTaXplOiAxMixcbiAgICBtYXhGYWlsQ291bnQ6IDIwXG59OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/cloud-layout.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/cloud-layout.js ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CloudLayout: () => (/* binding */ CloudLayout)\n/* harmony export */ });\n/* harmony import */ var _visactor_vrender_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @visactor/vrender-core */ \"(ssr)/./node_modules/.pnpm/@visactor+vrender-core@0.20.12/node_modules/@visactor/vrender-core/es/modules.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/merge.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isString.js\");\n/* harmony import */ var _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @visactor/vgrammar-util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-util@0.14.13/node_modules/@visactor/vgrammar-util/es/shapes.js\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/base.js\");\n/* harmony import */ var _spirals__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./spirals */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/spirals.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/util.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst MAX_ARGUMENTS_LENGTH = 6e4;\n\nclass CloudLayout extends _base__WEBPACK_IMPORTED_MODULE_0__.BaseLayout {\n    constructor(options) {\n        var _a;\n        super((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({}, CloudLayout.defaultOptions, options)), this.cw = 64, this.ch = 2048, \n        this._size = [ 256, 256 ], this._isBoardExpandCompleted = !1, this._placeStatus = 0, \n        this._tTemp = null, this._dtTemp = null, this._dy = 0, this.cacheMap = new Map, \n        this.options.minFontSize <= CloudLayout.defaultOptions.minFontSize && (this.options.minFontSize = CloudLayout.defaultOptions.minFontSize), \n        this.spiral = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this.options.spiral) ? null !== (_a = _spirals__WEBPACK_IMPORTED_MODULE_3__.spirals[this.options.spiral]) && void 0 !== _a ? _a : _spirals__WEBPACK_IMPORTED_MODULE_3__.spirals.archimedean : this.options.spiral, \n        this.random = this.options.random ? Math.random : () => 1, this.getTextPadding = (0,_util__WEBPACK_IMPORTED_MODULE_4__.functor)(this.options.padding);\n    }\n    zoomRatio() {\n        return this._originSize[0] / this._size[0];\n    }\n    dy() {\n        return this._dy;\n    }\n    layoutWord(index) {\n        const d = this.data[index];\n        if (\"\" === (\"\" + d.text).trim()) return !0;\n        const {maxRadius: maxRadius, center: center} = (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_5__.getMaxRadiusAndCenter)(this.options.shape, this._size);\n        if (d.x = center[0], d.y = center[1], cloudSprite(this.contextAndRatio, d, this.data, index, this.cw, this.ch), \n        this._placeStatus = 0, d.hasText && this.place(this._board, d, this._bounds, maxRadius)) return this.result.push(d), \n        this._bounds ? cloudBounds(this._bounds, d) : this._bounds = [ {\n            x: d.x + d.x0,\n            y: d.y + d.y0\n        }, {\n            x: d.x + d.x1,\n            y: d.y + d.y1\n        } ], d.x -= this._size[0] >> 1, d.y -= this._size[1] >> 1, this._tTemp = null, this._dtTemp = null, \n        !0;\n        if (this.updateBoardExpandStatus(d.fontSize), d.hasText && this.shouldShrinkContinue()) {\n            if (1 === this._placeStatus) {\n                const maxSize0 = d.fontSize * this._originSize[0] / this.options.minFontSize, distSize0 = Math.max(d.width, d.height);\n                if (distSize0 <= maxSize0) this.expandBoard(this._board, this._bounds, distSize0 / this._size[0]); else {\n                    if (!this.options.clip) return !0;\n                    this.expandBoard(this._board, this._bounds, maxSize0 / this._size[0]);\n                }\n            } else this._placeStatus, this.expandBoard(this._board, this._bounds);\n            return this.updateBoardExpandStatus(d.fontSize), !1;\n        }\n        return this._tTemp = null, this._dtTemp = null, !0;\n    }\n    layout(words, config) {\n        this.initProgressive(), this.result = [], this._size = [ config.width, config.height ], \n        this.clearCache(), this._originSize = [ ...this._size ];\n        const contextAndRatio = this.getContext(_visactor_vrender_core__WEBPACK_IMPORTED_MODULE_6__.vglobal.createCanvas({\n            width: 1,\n            height: 1\n        }));\n        this.contextAndRatio = contextAndRatio, this._board = new Array((this._size[0] >> 5) * this._size[1]).fill(0), \n        this._bounds = null;\n        words.length;\n        this.result = [];\n        const data = words.map(((d, i) => ({\n            text: this.getText(d),\n            fontFamily: this.getTextFontFamily(d),\n            fontStyle: this.getTextFontStyle(d),\n            fontWeight: this.getTextFontWeight(d),\n            angle: this.getTextRotate(d, i),\n            fontSize: ~~this.getTextFontSize(d),\n            padding: this.getTextPadding(d),\n            xoff: 0,\n            yoff: 0,\n            x1: 0,\n            y1: 0,\n            x0: 0,\n            y0: 0,\n            hasText: !1,\n            sprite: null,\n            datum: d,\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0\n        }))).sort((function(a, b) {\n            return b.fontSize - a.fontSize;\n        }));\n        if (this.originalData = data, this.data = data, this.progressiveRun(), !this.options.clip && this.options.enlarge && this._bounds && this.shrinkBoard(this._bounds), \n        this._bounds && [ \"cardioid\", \"triangle\", \"triangle-upright\" ].includes(this.options.shape)) {\n            const currentCenterY = (this._bounds[0].y + this._bounds[1].y) / 2;\n            this._dy = -(currentCenterY - this._size[1] / 2);\n        }\n        return this.result;\n    }\n    formatTagItem(words) {\n        const size = this._size, zoomRatio = this.zoomRatio(), globalDy = this.dy(), dx = size[0] >> 1, dy = size[1] >> 1, n = words.length, result = [];\n        let w, t;\n        for (let i = 0; i < n; ++i) w = words[i], t = {}, t.datum = w.datum, t.x = (w.x + dx) * zoomRatio, \n        t.y = (w.y + dy + globalDy) * zoomRatio, t.fontFamily = w.fontFamily, t.fontSize = w.fontSize * zoomRatio, \n        t.fontStyle = w.fontStyle, t.fontWeight = w.fontWeight, t.angle = w.angle, result.push(t);\n        return result;\n    }\n    output() {\n        return this.outputCallback ? this.outputCallback(this.formatTagItem(this.result)) : this.formatTagItem(this.result);\n    }\n    progressiveOutput() {\n        return this.outputCallback ? this.outputCallback(this.formatTagItem(this.progressiveResult)) : this.formatTagItem(this.progressiveResult);\n    }\n    updateBoardExpandStatus(fontSize) {\n        this._isBoardExpandCompleted = fontSize * (this._originSize[0] / this._size[0]) < this.options.minFontSize;\n    }\n    shouldShrinkContinue() {\n        return !this.options.clip && this.options.shrink && !this._isBoardExpandCompleted;\n    }\n    shrinkBoard(bounds) {\n        const leftTopPoint = bounds[0], rightBottomPoint = bounds[1];\n        if (rightBottomPoint.x >= this._size[0] || rightBottomPoint.y >= this._size[1]) return;\n        const minXValue = Math.min(leftTopPoint.x, this._size[0] - rightBottomPoint.x), minYValue = Math.min(leftTopPoint.y, this._size[1] - rightBottomPoint.y), minRatio = 2 * Math.min(minXValue / this._size[0], minYValue / this._size[1]);\n        this._size = this._size.map((v => v * (1 - minRatio)));\n    }\n    expandBoard(board, bounds, factor) {\n        const expandedLeftWidth = this._size[0] * (factor || 1.1) - this._size[0] >> 5;\n        let diffWidth = 2 * expandedLeftWidth > 2 ? expandedLeftWidth : 2;\n        diffWidth % 2 != 0 && diffWidth++;\n        let diffHeight = Math.ceil(this._size[1] * (diffWidth << 5) / this._size[0]);\n        diffHeight % 2 != 0 && diffHeight++;\n        const w = this._size[0], h = this._size[1], widthArr = new Array(diffWidth).fill(0), heightArr = new Array(diffHeight / 2 * (diffWidth + (w >> 5))).fill(0);\n        this.insertZerosToArray(board, h * (w >> 5), heightArr.length + diffWidth / 2);\n        for (let i = h - 1; i > 0; i--) this.insertZerosToArray(board, i * (w >> 5), widthArr.length);\n        this.insertZerosToArray(board, 0, heightArr.length + diffWidth / 2), this._size = [ w + (diffWidth << 5), h + diffHeight ], \n        bounds && (bounds[0].x += (diffWidth << 5) / 2, bounds[0].y += diffHeight / 2, bounds[1].x += (diffWidth << 5) / 2, \n        bounds[1].y += diffHeight / 2);\n    }\n    insertZerosToArray(array, index, length) {\n        const len = Math.floor(length / 6e4), restLen = length % 6e4;\n        for (let i = 0; i < len; i++) array.splice(index + 6e4 * i, 0, ...new Array(6e4).fill(0));\n        array.splice(index + 6e4 * len, 0, ...new Array(restLen).fill(0));\n    }\n    getContext(canvas) {\n        canvas.width = 1, canvas.height = 1;\n        const imageData = canvas.getContext(\"2d\").getImageData(0, 0, 1, 1), ratio = Math.sqrt(imageData.data.length >> 2);\n        canvas.width = (this.cw << 5) / ratio, canvas.height = this.ch / ratio;\n        const context = canvas.getContext(\"2d\");\n        return context.fillStyle = context.strokeStyle = \"red\", context.textAlign = \"center\", \n        {\n            context: context,\n            ratio: ratio,\n            canvas: canvas\n        };\n    }\n    place(board, tag, bounds, maxRadius) {\n        let isCollide = !1;\n        if (this.shouldShrinkContinue() && (tag.width > this._size[0] || tag.height > this._size[1])) return this._placeStatus = 1, \n        !1;\n        const dt = this.random() < .5 ? 1 : -1;\n        if (!this.shouldShrinkContinue() && this.isSizeLargerThanMax(tag, dt)) return null;\n        const startX = tag.x, startY = tag.y, maxDelta = Math.sqrt(this._size[0] * this._size[0] + this._size[1] * this._size[1]), s = this.spiral(this._size);\n        let dxdy, dx, dy, _tag, t = -dt;\n        for (this._tTemp = null, this._dtTemp = null; dxdy = s(t += dt); ) {\n            dx = dxdy[0], dy = dxdy[1];\n            const radius = Math.sqrt(dx ** 2 + dy ** 2);\n            let rad = Math.atan(dy / dx);\n            dx < 0 ? rad += Math.PI : dy < 0 && (rad = 2 * Math.PI + rad);\n            const rx = this.shape(rad);\n            if (Math.min(Math.abs(dx), Math.abs(dy)) >= maxDelta) break;\n            if (radius >= maxRadius) isCollide && null === this._tTemp && (this._tTemp = t, \n            this._dtTemp = dt); else {\n                if (tag.x = startX + ~~(radius * rx * Math.cos(-rad)), tag.y = startY + ~~(radius * rx * Math.sin(-rad)), \n                _tag = tag, this.options.clip) if (this.shouldShrinkContinue()) {\n                    if (isPartOutside(_tag, this._size)) {\n                        isCollide && null === this._tTemp && (this._tTemp = t, this._dtTemp = dt);\n                        continue;\n                    }\n                } else {\n                    if (isFullOutside(_tag, this._size)) {\n                        isCollide && null === this._tTemp && (this._tTemp = t, this._dtTemp = dt);\n                        continue;\n                    }\n                    isPartOutside(_tag, this._size) && (_tag = clipInnerTag(_tag, this._size));\n                } else if (isPartOutside(_tag, this._size)) {\n                    isCollide && null === this._tTemp && (this._tTemp = t, this._dtTemp = dt);\n                    continue;\n                }\n                if (isCollide = !0, (!bounds || collideRects(_tag, bounds)) && (!bounds || !cloudCollide(_tag, board, this._size))) {\n                    const sprite = _tag.sprite, w = _tag.width >> 5, sw = this._size[0] >> 5, lx = _tag.x - (w << 4), sx = 127 & lx, msx = 32 - sx, h = _tag.y1 - _tag.y0;\n                    let last, x = (_tag.y + _tag.y0) * sw + (lx >> 5);\n                    for (let j = 0; j < h; j++) {\n                        last = 0;\n                        for (let i = 0; i <= w; i++) board[x + i] |= last << msx | (i < w ? (last = sprite[j * w + i]) >>> sx : 0);\n                        x += sw;\n                    }\n                    return tag.sprite = null, _tag.sprite = null, !0;\n                }\n            }\n        }\n        return null !== this._tTemp && (this._placeStatus = 3), !this.shouldShrinkContinue() && this.setCache(_tag, dt), \n        !1;\n    }\n    clearCache() {\n        this.cacheMap.clear();\n    }\n    setCache(tag, dt) {\n        const cacheKey = `${tag.angle}-${dt}`, w = tag.x1 - tag.x0, h = tag.y1 - tag.y0;\n        if (!this.cacheMap.has(cacheKey)) return void this.cacheMap.set(cacheKey, {\n            width: w,\n            height: h\n        });\n        const {width: width, height: height} = this.cacheMap.get(cacheKey);\n        (w < width && h < height || w <= width && h < height) && this.cacheMap.set(cacheKey, {\n            width: w,\n            height: h\n        });\n    }\n    isSizeLargerThanMax(tag, dt) {\n        const cacheKey = `${tag.angle}-${dt}`;\n        if (!this.cacheMap.has(cacheKey)) return !1;\n        const {width: width, height: height} = this.cacheMap.get(cacheKey), w = tag.x1 - tag.x0, h = tag.y1 - tag.y0;\n        return w >= width && h >= height;\n    }\n}\n\nfunction cloudSprite(contextAndRatio, d, data, di, cw, ch) {\n    if (d.sprite) return;\n    const c = contextAndRatio.context, ratio = contextAndRatio.ratio;\n    c.setTransform(ratio, 0, 0, ratio, 0, 0), c.clearRect(0, 0, (cw << 5) / ratio, ch / ratio);\n    let x = 0, y = 0, maxh = 0;\n    const n = data.length;\n    let w, w32, h, i, j;\n    for (--di; ++di < n; ) {\n        if (d = data[di], c.save(), c.font = d.fontStyle + \" \" + d.fontWeight + \" \" + ~~((d.fontSize + 1) / ratio) + \"px \" + d.fontFamily, \n        w = c.measureText(d.text + \"m\").width * ratio, h = d.fontSize << 1, d.angle) {\n            const sr = Math.sin(d.angle), cr = Math.cos(d.angle), wcr = w * cr, wsr = w * sr, hcr = h * cr, hsr = h * sr;\n            w = Math.max(Math.abs(wcr + hsr), Math.abs(wcr - hsr)) + 31 >> 5 << 5, h = ~~Math.max(Math.abs(wsr + hcr), Math.abs(wsr - hcr));\n        } else w = w + 31 >> 5 << 5;\n        if (h > maxh && (maxh = h), x + w >= cw << 5 && (x = 0, y += maxh, maxh = 0), y + h >= ch) break;\n        c.translate((x + (w >> 1)) / ratio, (y + (h >> 1)) / ratio), d.angle && c.rotate(d.angle), \n        c.fillText(d.text, 0, 0), d.padding && (c.lineWidth = 2 * d.padding, c.strokeText(d.text, 0, 0)), \n        c.restore(), d.width = w, d.height = h, d.xoff = x, d.yoff = y, d.x1 = w >> 1, d.y1 = h >> 1, \n        d.x0 = -d.x1, d.y0 = -d.y1, d.hasText = !0, x += w;\n    }\n    const pixels = c.getImageData(0, 0, (cw << 5) / ratio, ch / ratio).data, sprite = [];\n    for (;--di >= 0; ) {\n        if (!(d = data[di]).hasText) continue;\n        for (w = d.width, w32 = w >> 5, h = d.y1 - d.y0, i = 0; i < h * w32; i++) sprite[i] = 0;\n        if (x = d.xoff, null == x) return;\n        y = d.yoff;\n        let seen = 0, seenRow = -1;\n        for (j = 0; j < h; j++) {\n            for (i = 0; i < w; i++) {\n                const k = w32 * j + (i >> 5), m = pixels[(y + j) * (cw << 5) + (x + i) << 2] ? 1 << 31 - i % 32 : 0;\n                sprite[k] |= m, seen |= m;\n            }\n            seen ? seenRow = j : (d.y0++, h--, j--, y++);\n        }\n        d.y1 = d.y0 + seenRow, d.sprite = sprite.slice(0, (d.y1 - d.y0) * w32);\n    }\n}\n\nfunction cloudCollide(tag, board, size) {\n    const sw = size[0] >> 5, sprite = tag.sprite, w = tag.width >> 5, lx = tag.x - (w << 4), sx = 127 & lx, msx = 32 - sx, h = tag.y1 - tag.y0;\n    let last, x = (tag.y + tag.y0) * sw + (lx >> 5);\n    for (let j = 0; j < h; j++) {\n        last = 0;\n        for (let i = 0; i <= w; i++) if ((last << msx | (i < w ? (last = sprite[j * w + i]) >>> sx : 0)) & board[x + i]) return !0;\n        x += sw;\n    }\n    return !1;\n}\n\nfunction cloudBounds(bounds, d) {\n    const b0 = bounds[0], b1 = bounds[1];\n    d.x + d.x0 < b0.x && (b0.x = d.x + d.x0), d.y + d.y0 < b0.y && (b0.y = d.y + d.y0), \n    d.x + d.x1 > b1.x && (b1.x = d.x + d.x1), d.y + d.y1 > b1.y && (b1.y = d.y + d.y1);\n}\n\nfunction collideRects(a, b) {\n    return a.x + a.x1 > b[0].x && a.x + a.x0 < b[1].x && a.y + a.y1 > b[0].y && a.y + a.y0 < b[1].y;\n}\n\nCloudLayout.defaultOptions = {\n    enlarge: !1,\n    minFontSize: 2,\n    maxSingleWordTryCount: 2\n};\n\nconst isFullOutside = (tag, size) => tag.x + tag.x0 > size[0] || tag.y + tag.y0 > size[0] || tag.x + tag.x1 < 0 || tag.y + tag.y1 < 0, isPartOutside = (tag, size) => tag.x + tag.x0 < 0 || tag.y + tag.y0 < 0 || tag.x + tag.x1 > size[0] || tag.y + tag.y1 > size[1];\n\nfunction clipInnerTag(tag, size) {\n    const sprite = tag.sprite, h = tag.y1 - tag.y0, w = tag.width >> 5;\n    let x = 0;\n    const _sprite = [], js = Math.max(-(tag.y0 + tag.y), 0), je = Math.min(h + (size[1] - (tag.y1 + tag.y)), h), is = Math.max(-(tag.x0 + tag.x), 0) >> 5, ie = Math.min(w + (size[0] - (tag.x1 + tag.x) >> 5) + 1, w);\n    for (let j = 0; j < h; j++) {\n        for (let i = 0; i < w; i++) j < js || je <= j || i < is || ie <= i || _sprite.push(sprite[x + i]);\n        x += w;\n    }\n    const xl = is << 5, xr = w - ie << 5, yb = js, yt = h - je;\n    return Object.assign(Object.assign({}, tag), {\n        width: tag.width - xl - xr,\n        height: tag.height - yb - yt,\n        x0: tag.x0 + xl,\n        x1: tag.x1 - xr,\n        y0: tag.y0 + yb,\n        y1: tag.y1 - yt,\n        x: tag.x + xl / 2 - xr / 2,\n        sprite: _sprite\n    });\n}\n//# sourceMappingURL=cloud-layout.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2Nsb3VkLWxheW91dC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFpRDs7QUFFRTs7QUFFYTs7QUFFNUI7O0FBRUE7O0FBRUg7O0FBRWpDOztBQUVPLDBCQUEwQiw2Q0FBVTtBQUMzQztBQUNBO0FBQ0EsY0FBYyw0REFBSyxHQUFHO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw0REFBUSx1Q0FBdUMsNkNBQU8sK0NBQStDLDZDQUFPO0FBQ2xJLHlGQUF5Riw4Q0FBTztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0NBQXNDLEVBQUUsOEVBQXFCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1IQUFtSDtBQUNuSDtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsMkRBQU87QUFDdkQ7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixPQUFPLHlCQUF5QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsT0FBTztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsU0FBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxtQkFBbUI7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLE9BQU87QUFDM0M7QUFDQSx3Q0FBd0MsUUFBUTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixVQUFVLEdBQUcsR0FBRztBQUM1QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZUFBZSw4QkFBOEI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSw0QkFBNEIsVUFBVSxHQUFHLEdBQUc7QUFDNUM7QUFDQSxlQUFlLDhCQUE4QjtBQUM3QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFVBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLFdBQVc7QUFDckI7QUFDQSxnRUFBZ0UsYUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQix3QkFBd0IsT0FBTztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCLHdCQUF3QixPQUFPO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9meW5sYXRpY3MtYWkvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2Nsb3VkLWxheW91dC5qcz8wODBhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZnbG9iYWwgfSBmcm9tIFwiQHZpc2FjdG9yL3ZyZW5kZXItY29yZVwiO1xuXG5pbXBvcnQgeyBpc1N0cmluZywgbWVyZ2UgfSBmcm9tIFwiQHZpc2FjdG9yL3Z1dGlsc1wiO1xuXG5pbXBvcnQgeyBnZXRNYXhSYWRpdXNBbmRDZW50ZXIgfSBmcm9tIFwiQHZpc2FjdG9yL3ZncmFtbWFyLXV0aWxcIjtcblxuaW1wb3J0IHsgQmFzZUxheW91dCB9IGZyb20gXCIuL2Jhc2VcIjtcblxuaW1wb3J0IHsgc3BpcmFscyB9IGZyb20gXCIuL3NwaXJhbHNcIjtcblxuaW1wb3J0IHsgZnVuY3RvciB9IGZyb20gXCIuL3V0aWxcIjtcblxuY29uc3QgTUFYX0FSR1VNRU5UU19MRU5HVEggPSA2ZTQ7XG5cbmV4cG9ydCBjbGFzcyBDbG91ZExheW91dCBleHRlbmRzIEJhc2VMYXlvdXQge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBzdXBlcihtZXJnZSh7fSwgQ2xvdWRMYXlvdXQuZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpKSwgdGhpcy5jdyA9IDY0LCB0aGlzLmNoID0gMjA0OCwgXG4gICAgICAgIHRoaXMuX3NpemUgPSBbIDI1NiwgMjU2IF0sIHRoaXMuX2lzQm9hcmRFeHBhbmRDb21wbGV0ZWQgPSAhMSwgdGhpcy5fcGxhY2VTdGF0dXMgPSAwLCBcbiAgICAgICAgdGhpcy5fdFRlbXAgPSBudWxsLCB0aGlzLl9kdFRlbXAgPSBudWxsLCB0aGlzLl9keSA9IDAsIHRoaXMuY2FjaGVNYXAgPSBuZXcgTWFwLCBcbiAgICAgICAgdGhpcy5vcHRpb25zLm1pbkZvbnRTaXplIDw9IENsb3VkTGF5b3V0LmRlZmF1bHRPcHRpb25zLm1pbkZvbnRTaXplICYmICh0aGlzLm9wdGlvbnMubWluRm9udFNpemUgPSBDbG91ZExheW91dC5kZWZhdWx0T3B0aW9ucy5taW5Gb250U2l6ZSksIFxuICAgICAgICB0aGlzLnNwaXJhbCA9IGlzU3RyaW5nKHRoaXMub3B0aW9ucy5zcGlyYWwpID8gbnVsbCAhPT0gKF9hID0gc3BpcmFsc1t0aGlzLm9wdGlvbnMuc3BpcmFsXSkgJiYgdm9pZCAwICE9PSBfYSA/IF9hIDogc3BpcmFscy5hcmNoaW1lZGVhbiA6IHRoaXMub3B0aW9ucy5zcGlyYWwsIFxuICAgICAgICB0aGlzLnJhbmRvbSA9IHRoaXMub3B0aW9ucy5yYW5kb20gPyBNYXRoLnJhbmRvbSA6ICgpID0+IDEsIHRoaXMuZ2V0VGV4dFBhZGRpbmcgPSBmdW5jdG9yKHRoaXMub3B0aW9ucy5wYWRkaW5nKTtcbiAgICB9XG4gICAgem9vbVJhdGlvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3JpZ2luU2l6ZVswXSAvIHRoaXMuX3NpemVbMF07XG4gICAgfVxuICAgIGR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZHk7XG4gICAgfVxuICAgIGxheW91dFdvcmQoaW5kZXgpIHtcbiAgICAgICAgY29uc3QgZCA9IHRoaXMuZGF0YVtpbmRleF07XG4gICAgICAgIGlmIChcIlwiID09PSAoXCJcIiArIGQudGV4dCkudHJpbSgpKSByZXR1cm4gITA7XG4gICAgICAgIGNvbnN0IHttYXhSYWRpdXM6IG1heFJhZGl1cywgY2VudGVyOiBjZW50ZXJ9ID0gZ2V0TWF4UmFkaXVzQW5kQ2VudGVyKHRoaXMub3B0aW9ucy5zaGFwZSwgdGhpcy5fc2l6ZSk7XG4gICAgICAgIGlmIChkLnggPSBjZW50ZXJbMF0sIGQueSA9IGNlbnRlclsxXSwgY2xvdWRTcHJpdGUodGhpcy5jb250ZXh0QW5kUmF0aW8sIGQsIHRoaXMuZGF0YSwgaW5kZXgsIHRoaXMuY3csIHRoaXMuY2gpLCBcbiAgICAgICAgdGhpcy5fcGxhY2VTdGF0dXMgPSAwLCBkLmhhc1RleHQgJiYgdGhpcy5wbGFjZSh0aGlzLl9ib2FyZCwgZCwgdGhpcy5fYm91bmRzLCBtYXhSYWRpdXMpKSByZXR1cm4gdGhpcy5yZXN1bHQucHVzaChkKSwgXG4gICAgICAgIHRoaXMuX2JvdW5kcyA/IGNsb3VkQm91bmRzKHRoaXMuX2JvdW5kcywgZCkgOiB0aGlzLl9ib3VuZHMgPSBbIHtcbiAgICAgICAgICAgIHg6IGQueCArIGQueDAsXG4gICAgICAgICAgICB5OiBkLnkgKyBkLnkwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHg6IGQueCArIGQueDEsXG4gICAgICAgICAgICB5OiBkLnkgKyBkLnkxXG4gICAgICAgIH0gXSwgZC54IC09IHRoaXMuX3NpemVbMF0gPj4gMSwgZC55IC09IHRoaXMuX3NpemVbMV0gPj4gMSwgdGhpcy5fdFRlbXAgPSBudWxsLCB0aGlzLl9kdFRlbXAgPSBudWxsLCBcbiAgICAgICAgITA7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZUJvYXJkRXhwYW5kU3RhdHVzKGQuZm9udFNpemUpLCBkLmhhc1RleHQgJiYgdGhpcy5zaG91bGRTaHJpbmtDb250aW51ZSgpKSB7XG4gICAgICAgICAgICBpZiAoMSA9PT0gdGhpcy5fcGxhY2VTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhTaXplMCA9IGQuZm9udFNpemUgKiB0aGlzLl9vcmlnaW5TaXplWzBdIC8gdGhpcy5vcHRpb25zLm1pbkZvbnRTaXplLCBkaXN0U2l6ZTAgPSBNYXRoLm1heChkLndpZHRoLCBkLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RTaXplMCA8PSBtYXhTaXplMCkgdGhpcy5leHBhbmRCb2FyZCh0aGlzLl9ib2FyZCwgdGhpcy5fYm91bmRzLCBkaXN0U2l6ZTAgLyB0aGlzLl9zaXplWzBdKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmNsaXApIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRCb2FyZCh0aGlzLl9ib2FyZCwgdGhpcy5fYm91bmRzLCBtYXhTaXplMCAvIHRoaXMuX3NpemVbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB0aGlzLl9wbGFjZVN0YXR1cywgdGhpcy5leHBhbmRCb2FyZCh0aGlzLl9ib2FyZCwgdGhpcy5fYm91bmRzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUJvYXJkRXhwYW5kU3RhdHVzKGQuZm9udFNpemUpLCAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fdFRlbXAgPSBudWxsLCB0aGlzLl9kdFRlbXAgPSBudWxsLCAhMDtcbiAgICB9XG4gICAgbGF5b3V0KHdvcmRzLCBjb25maWcpIHtcbiAgICAgICAgdGhpcy5pbml0UHJvZ3Jlc3NpdmUoKSwgdGhpcy5yZXN1bHQgPSBbXSwgdGhpcy5fc2l6ZSA9IFsgY29uZmlnLndpZHRoLCBjb25maWcuaGVpZ2h0IF0sIFxuICAgICAgICB0aGlzLmNsZWFyQ2FjaGUoKSwgdGhpcy5fb3JpZ2luU2l6ZSA9IFsgLi4udGhpcy5fc2l6ZSBdO1xuICAgICAgICBjb25zdCBjb250ZXh0QW5kUmF0aW8gPSB0aGlzLmdldENvbnRleHQodmdsb2JhbC5jcmVhdGVDYW52YXMoe1xuICAgICAgICAgICAgd2lkdGg6IDEsXG4gICAgICAgICAgICBoZWlnaHQ6IDFcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLmNvbnRleHRBbmRSYXRpbyA9IGNvbnRleHRBbmRSYXRpbywgdGhpcy5fYm9hcmQgPSBuZXcgQXJyYXkoKHRoaXMuX3NpemVbMF0gPj4gNSkgKiB0aGlzLl9zaXplWzFdKS5maWxsKDApLCBcbiAgICAgICAgdGhpcy5fYm91bmRzID0gbnVsbDtcbiAgICAgICAgd29yZHMubGVuZ3RoO1xuICAgICAgICB0aGlzLnJlc3VsdCA9IFtdO1xuICAgICAgICBjb25zdCBkYXRhID0gd29yZHMubWFwKCgoZCwgaSkgPT4gKHtcbiAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0VGV4dChkKSxcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6IHRoaXMuZ2V0VGV4dEZvbnRGYW1pbHkoZCksXG4gICAgICAgICAgICBmb250U3R5bGU6IHRoaXMuZ2V0VGV4dEZvbnRTdHlsZShkKSxcbiAgICAgICAgICAgIGZvbnRXZWlnaHQ6IHRoaXMuZ2V0VGV4dEZvbnRXZWlnaHQoZCksXG4gICAgICAgICAgICBhbmdsZTogdGhpcy5nZXRUZXh0Um90YXRlKGQsIGkpLFxuICAgICAgICAgICAgZm9udFNpemU6IH5+dGhpcy5nZXRUZXh0Rm9udFNpemUoZCksXG4gICAgICAgICAgICBwYWRkaW5nOiB0aGlzLmdldFRleHRQYWRkaW5nKGQpLFxuICAgICAgICAgICAgeG9mZjogMCxcbiAgICAgICAgICAgIHlvZmY6IDAsXG4gICAgICAgICAgICB4MTogMCxcbiAgICAgICAgICAgIHkxOiAwLFxuICAgICAgICAgICAgeDA6IDAsXG4gICAgICAgICAgICB5MDogMCxcbiAgICAgICAgICAgIGhhc1RleHQ6ICExLFxuICAgICAgICAgICAgc3ByaXRlOiBudWxsLFxuICAgICAgICAgICAgZGF0dW06IGQsXG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAwXG4gICAgICAgIH0pKSkuc29ydCgoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGIuZm9udFNpemUgLSBhLmZvbnRTaXplO1xuICAgICAgICB9KSk7XG4gICAgICAgIGlmICh0aGlzLm9yaWdpbmFsRGF0YSA9IGRhdGEsIHRoaXMuZGF0YSA9IGRhdGEsIHRoaXMucHJvZ3Jlc3NpdmVSdW4oKSwgIXRoaXMub3B0aW9ucy5jbGlwICYmIHRoaXMub3B0aW9ucy5lbmxhcmdlICYmIHRoaXMuX2JvdW5kcyAmJiB0aGlzLnNocmlua0JvYXJkKHRoaXMuX2JvdW5kcyksIFxuICAgICAgICB0aGlzLl9ib3VuZHMgJiYgWyBcImNhcmRpb2lkXCIsIFwidHJpYW5nbGVcIiwgXCJ0cmlhbmdsZS11cHJpZ2h0XCIgXS5pbmNsdWRlcyh0aGlzLm9wdGlvbnMuc2hhcGUpKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q2VudGVyWSA9ICh0aGlzLl9ib3VuZHNbMF0ueSArIHRoaXMuX2JvdW5kc1sxXS55KSAvIDI7XG4gICAgICAgICAgICB0aGlzLl9keSA9IC0oY3VycmVudENlbnRlclkgLSB0aGlzLl9zaXplWzFdIC8gMik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0O1xuICAgIH1cbiAgICBmb3JtYXRUYWdJdGVtKHdvcmRzKSB7XG4gICAgICAgIGNvbnN0IHNpemUgPSB0aGlzLl9zaXplLCB6b29tUmF0aW8gPSB0aGlzLnpvb21SYXRpbygpLCBnbG9iYWxEeSA9IHRoaXMuZHkoKSwgZHggPSBzaXplWzBdID4+IDEsIGR5ID0gc2l6ZVsxXSA+PiAxLCBuID0gd29yZHMubGVuZ3RoLCByZXN1bHQgPSBbXTtcbiAgICAgICAgbGV0IHcsIHQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgKytpKSB3ID0gd29yZHNbaV0sIHQgPSB7fSwgdC5kYXR1bSA9IHcuZGF0dW0sIHQueCA9ICh3LnggKyBkeCkgKiB6b29tUmF0aW8sIFxuICAgICAgICB0LnkgPSAody55ICsgZHkgKyBnbG9iYWxEeSkgKiB6b29tUmF0aW8sIHQuZm9udEZhbWlseSA9IHcuZm9udEZhbWlseSwgdC5mb250U2l6ZSA9IHcuZm9udFNpemUgKiB6b29tUmF0aW8sIFxuICAgICAgICB0LmZvbnRTdHlsZSA9IHcuZm9udFN0eWxlLCB0LmZvbnRXZWlnaHQgPSB3LmZvbnRXZWlnaHQsIHQuYW5nbGUgPSB3LmFuZ2xlLCByZXN1bHQucHVzaCh0KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgb3V0cHV0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXRDYWxsYmFjayA/IHRoaXMub3V0cHV0Q2FsbGJhY2sodGhpcy5mb3JtYXRUYWdJdGVtKHRoaXMucmVzdWx0KSkgOiB0aGlzLmZvcm1hdFRhZ0l0ZW0odGhpcy5yZXN1bHQpO1xuICAgIH1cbiAgICBwcm9ncmVzc2l2ZU91dHB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0Q2FsbGJhY2sgPyB0aGlzLm91dHB1dENhbGxiYWNrKHRoaXMuZm9ybWF0VGFnSXRlbSh0aGlzLnByb2dyZXNzaXZlUmVzdWx0KSkgOiB0aGlzLmZvcm1hdFRhZ0l0ZW0odGhpcy5wcm9ncmVzc2l2ZVJlc3VsdCk7XG4gICAgfVxuICAgIHVwZGF0ZUJvYXJkRXhwYW5kU3RhdHVzKGZvbnRTaXplKSB7XG4gICAgICAgIHRoaXMuX2lzQm9hcmRFeHBhbmRDb21wbGV0ZWQgPSBmb250U2l6ZSAqICh0aGlzLl9vcmlnaW5TaXplWzBdIC8gdGhpcy5fc2l6ZVswXSkgPCB0aGlzLm9wdGlvbnMubWluRm9udFNpemU7XG4gICAgfVxuICAgIHNob3VsZFNocmlua0NvbnRpbnVlKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMub3B0aW9ucy5jbGlwICYmIHRoaXMub3B0aW9ucy5zaHJpbmsgJiYgIXRoaXMuX2lzQm9hcmRFeHBhbmRDb21wbGV0ZWQ7XG4gICAgfVxuICAgIHNocmlua0JvYXJkKGJvdW5kcykge1xuICAgICAgICBjb25zdCBsZWZ0VG9wUG9pbnQgPSBib3VuZHNbMF0sIHJpZ2h0Qm90dG9tUG9pbnQgPSBib3VuZHNbMV07XG4gICAgICAgIGlmIChyaWdodEJvdHRvbVBvaW50LnggPj0gdGhpcy5fc2l6ZVswXSB8fCByaWdodEJvdHRvbVBvaW50LnkgPj0gdGhpcy5fc2l6ZVsxXSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBtaW5YVmFsdWUgPSBNYXRoLm1pbihsZWZ0VG9wUG9pbnQueCwgdGhpcy5fc2l6ZVswXSAtIHJpZ2h0Qm90dG9tUG9pbnQueCksIG1pbllWYWx1ZSA9IE1hdGgubWluKGxlZnRUb3BQb2ludC55LCB0aGlzLl9zaXplWzFdIC0gcmlnaHRCb3R0b21Qb2ludC55KSwgbWluUmF0aW8gPSAyICogTWF0aC5taW4obWluWFZhbHVlIC8gdGhpcy5fc2l6ZVswXSwgbWluWVZhbHVlIC8gdGhpcy5fc2l6ZVsxXSk7XG4gICAgICAgIHRoaXMuX3NpemUgPSB0aGlzLl9zaXplLm1hcCgodiA9PiB2ICogKDEgLSBtaW5SYXRpbykpKTtcbiAgICB9XG4gICAgZXhwYW5kQm9hcmQoYm9hcmQsIGJvdW5kcywgZmFjdG9yKSB7XG4gICAgICAgIGNvbnN0IGV4cGFuZGVkTGVmdFdpZHRoID0gdGhpcy5fc2l6ZVswXSAqIChmYWN0b3IgfHwgMS4xKSAtIHRoaXMuX3NpemVbMF0gPj4gNTtcbiAgICAgICAgbGV0IGRpZmZXaWR0aCA9IDIgKiBleHBhbmRlZExlZnRXaWR0aCA+IDIgPyBleHBhbmRlZExlZnRXaWR0aCA6IDI7XG4gICAgICAgIGRpZmZXaWR0aCAlIDIgIT0gMCAmJiBkaWZmV2lkdGgrKztcbiAgICAgICAgbGV0IGRpZmZIZWlnaHQgPSBNYXRoLmNlaWwodGhpcy5fc2l6ZVsxXSAqIChkaWZmV2lkdGggPDwgNSkgLyB0aGlzLl9zaXplWzBdKTtcbiAgICAgICAgZGlmZkhlaWdodCAlIDIgIT0gMCAmJiBkaWZmSGVpZ2h0Kys7XG4gICAgICAgIGNvbnN0IHcgPSB0aGlzLl9zaXplWzBdLCBoID0gdGhpcy5fc2l6ZVsxXSwgd2lkdGhBcnIgPSBuZXcgQXJyYXkoZGlmZldpZHRoKS5maWxsKDApLCBoZWlnaHRBcnIgPSBuZXcgQXJyYXkoZGlmZkhlaWdodCAvIDIgKiAoZGlmZldpZHRoICsgKHcgPj4gNSkpKS5maWxsKDApO1xuICAgICAgICB0aGlzLmluc2VydFplcm9zVG9BcnJheShib2FyZCwgaCAqICh3ID4+IDUpLCBoZWlnaHRBcnIubGVuZ3RoICsgZGlmZldpZHRoIC8gMik7XG4gICAgICAgIGZvciAobGV0IGkgPSBoIC0gMTsgaSA+IDA7IGktLSkgdGhpcy5pbnNlcnRaZXJvc1RvQXJyYXkoYm9hcmQsIGkgKiAodyA+PiA1KSwgd2lkdGhBcnIubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5pbnNlcnRaZXJvc1RvQXJyYXkoYm9hcmQsIDAsIGhlaWdodEFyci5sZW5ndGggKyBkaWZmV2lkdGggLyAyKSwgdGhpcy5fc2l6ZSA9IFsgdyArIChkaWZmV2lkdGggPDwgNSksIGggKyBkaWZmSGVpZ2h0IF0sIFxuICAgICAgICBib3VuZHMgJiYgKGJvdW5kc1swXS54ICs9IChkaWZmV2lkdGggPDwgNSkgLyAyLCBib3VuZHNbMF0ueSArPSBkaWZmSGVpZ2h0IC8gMiwgYm91bmRzWzFdLnggKz0gKGRpZmZXaWR0aCA8PCA1KSAvIDIsIFxuICAgICAgICBib3VuZHNbMV0ueSArPSBkaWZmSGVpZ2h0IC8gMik7XG4gICAgfVxuICAgIGluc2VydFplcm9zVG9BcnJheShhcnJheSwgaW5kZXgsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCBsZW4gPSBNYXRoLmZsb29yKGxlbmd0aCAvIDZlNCksIHJlc3RMZW4gPSBsZW5ndGggJSA2ZTQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIGFycmF5LnNwbGljZShpbmRleCArIDZlNCAqIGksIDAsIC4uLm5ldyBBcnJheSg2ZTQpLmZpbGwoMCkpO1xuICAgICAgICBhcnJheS5zcGxpY2UoaW5kZXggKyA2ZTQgKiBsZW4sIDAsIC4uLm5ldyBBcnJheShyZXN0TGVuKS5maWxsKDApKTtcbiAgICB9XG4gICAgZ2V0Q29udGV4dChjYW52YXMpIHtcbiAgICAgICAgY2FudmFzLndpZHRoID0gMSwgY2FudmFzLmhlaWdodCA9IDE7XG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIikuZ2V0SW1hZ2VEYXRhKDAsIDAsIDEsIDEpLCByYXRpbyA9IE1hdGguc3FydChpbWFnZURhdGEuZGF0YS5sZW5ndGggPj4gMik7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9ICh0aGlzLmN3IDw8IDUpIC8gcmF0aW8sIGNhbnZhcy5oZWlnaHQgPSB0aGlzLmNoIC8gcmF0aW87XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICByZXR1cm4gY29udGV4dC5maWxsU3R5bGUgPSBjb250ZXh0LnN0cm9rZVN0eWxlID0gXCJyZWRcIiwgY29udGV4dC50ZXh0QWxpZ24gPSBcImNlbnRlclwiLCBcbiAgICAgICAge1xuICAgICAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgICAgIHJhdGlvOiByYXRpbyxcbiAgICAgICAgICAgIGNhbnZhczogY2FudmFzXG4gICAgICAgIH07XG4gICAgfVxuICAgIHBsYWNlKGJvYXJkLCB0YWcsIGJvdW5kcywgbWF4UmFkaXVzKSB7XG4gICAgICAgIGxldCBpc0NvbGxpZGUgPSAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkU2hyaW5rQ29udGludWUoKSAmJiAodGFnLndpZHRoID4gdGhpcy5fc2l6ZVswXSB8fCB0YWcuaGVpZ2h0ID4gdGhpcy5fc2l6ZVsxXSkpIHJldHVybiB0aGlzLl9wbGFjZVN0YXR1cyA9IDEsIFxuICAgICAgICAhMTtcbiAgICAgICAgY29uc3QgZHQgPSB0aGlzLnJhbmRvbSgpIDwgLjUgPyAxIDogLTE7XG4gICAgICAgIGlmICghdGhpcy5zaG91bGRTaHJpbmtDb250aW51ZSgpICYmIHRoaXMuaXNTaXplTGFyZ2VyVGhhbk1heCh0YWcsIGR0KSkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHN0YXJ0WCA9IHRhZy54LCBzdGFydFkgPSB0YWcueSwgbWF4RGVsdGEgPSBNYXRoLnNxcnQodGhpcy5fc2l6ZVswXSAqIHRoaXMuX3NpemVbMF0gKyB0aGlzLl9zaXplWzFdICogdGhpcy5fc2l6ZVsxXSksIHMgPSB0aGlzLnNwaXJhbCh0aGlzLl9zaXplKTtcbiAgICAgICAgbGV0IGR4ZHksIGR4LCBkeSwgX3RhZywgdCA9IC1kdDtcbiAgICAgICAgZm9yICh0aGlzLl90VGVtcCA9IG51bGwsIHRoaXMuX2R0VGVtcCA9IG51bGw7IGR4ZHkgPSBzKHQgKz0gZHQpOyApIHtcbiAgICAgICAgICAgIGR4ID0gZHhkeVswXSwgZHkgPSBkeGR5WzFdO1xuICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gTWF0aC5zcXJ0KGR4ICoqIDIgKyBkeSAqKiAyKTtcbiAgICAgICAgICAgIGxldCByYWQgPSBNYXRoLmF0YW4oZHkgLyBkeCk7XG4gICAgICAgICAgICBkeCA8IDAgPyByYWQgKz0gTWF0aC5QSSA6IGR5IDwgMCAmJiAocmFkID0gMiAqIE1hdGguUEkgKyByYWQpO1xuICAgICAgICAgICAgY29uc3QgcnggPSB0aGlzLnNoYXBlKHJhZCk7XG4gICAgICAgICAgICBpZiAoTWF0aC5taW4oTWF0aC5hYnMoZHgpLCBNYXRoLmFicyhkeSkpID49IG1heERlbHRhKSBicmVhaztcbiAgICAgICAgICAgIGlmIChyYWRpdXMgPj0gbWF4UmFkaXVzKSBpc0NvbGxpZGUgJiYgbnVsbCA9PT0gdGhpcy5fdFRlbXAgJiYgKHRoaXMuX3RUZW1wID0gdCwgXG4gICAgICAgICAgICB0aGlzLl9kdFRlbXAgPSBkdCk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0YWcueCA9IHN0YXJ0WCArIH5+KHJhZGl1cyAqIHJ4ICogTWF0aC5jb3MoLXJhZCkpLCB0YWcueSA9IHN0YXJ0WSArIH5+KHJhZGl1cyAqIHJ4ICogTWF0aC5zaW4oLXJhZCkpLCBcbiAgICAgICAgICAgICAgICBfdGFnID0gdGFnLCB0aGlzLm9wdGlvbnMuY2xpcCkgaWYgKHRoaXMuc2hvdWxkU2hyaW5rQ29udGludWUoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNQYXJ0T3V0c2lkZShfdGFnLCB0aGlzLl9zaXplKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNDb2xsaWRlICYmIG51bGwgPT09IHRoaXMuX3RUZW1wICYmICh0aGlzLl90VGVtcCA9IHQsIHRoaXMuX2R0VGVtcCA9IGR0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRnVsbE91dHNpZGUoX3RhZywgdGhpcy5fc2l6ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29sbGlkZSAmJiBudWxsID09PSB0aGlzLl90VGVtcCAmJiAodGhpcy5fdFRlbXAgPSB0LCB0aGlzLl9kdFRlbXAgPSBkdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpc1BhcnRPdXRzaWRlKF90YWcsIHRoaXMuX3NpemUpICYmIChfdGFnID0gY2xpcElubmVyVGFnKF90YWcsIHRoaXMuX3NpemUpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzUGFydE91dHNpZGUoX3RhZywgdGhpcy5fc2l6ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNDb2xsaWRlICYmIG51bGwgPT09IHRoaXMuX3RUZW1wICYmICh0aGlzLl90VGVtcCA9IHQsIHRoaXMuX2R0VGVtcCA9IGR0KTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpc0NvbGxpZGUgPSAhMCwgKCFib3VuZHMgfHwgY29sbGlkZVJlY3RzKF90YWcsIGJvdW5kcykpICYmICghYm91bmRzIHx8ICFjbG91ZENvbGxpZGUoX3RhZywgYm9hcmQsIHRoaXMuX3NpemUpKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcHJpdGUgPSBfdGFnLnNwcml0ZSwgdyA9IF90YWcud2lkdGggPj4gNSwgc3cgPSB0aGlzLl9zaXplWzBdID4+IDUsIGx4ID0gX3RhZy54IC0gKHcgPDwgNCksIHN4ID0gMTI3ICYgbHgsIG1zeCA9IDMyIC0gc3gsIGggPSBfdGFnLnkxIC0gX3RhZy55MDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3QsIHggPSAoX3RhZy55ICsgX3RhZy55MCkgKiBzdyArIChseCA+PiA1KTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdzsgaSsrKSBib2FyZFt4ICsgaV0gfD0gbGFzdCA8PCBtc3ggfCAoaSA8IHcgPyAobGFzdCA9IHNwcml0ZVtqICogdyArIGldKSA+Pj4gc3ggOiAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHggKz0gc3c7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhZy5zcHJpdGUgPSBudWxsLCBfdGFnLnNwcml0ZSA9IG51bGwsICEwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5fdFRlbXAgJiYgKHRoaXMuX3BsYWNlU3RhdHVzID0gMyksICF0aGlzLnNob3VsZFNocmlua0NvbnRpbnVlKCkgJiYgdGhpcy5zZXRDYWNoZShfdGFnLCBkdCksIFxuICAgICAgICAhMTtcbiAgICB9XG4gICAgY2xlYXJDYWNoZSgpIHtcbiAgICAgICAgdGhpcy5jYWNoZU1hcC5jbGVhcigpO1xuICAgIH1cbiAgICBzZXRDYWNoZSh0YWcsIGR0KSB7XG4gICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gYCR7dGFnLmFuZ2xlfS0ke2R0fWAsIHcgPSB0YWcueDEgLSB0YWcueDAsIGggPSB0YWcueTEgLSB0YWcueTA7XG4gICAgICAgIGlmICghdGhpcy5jYWNoZU1hcC5oYXMoY2FjaGVLZXkpKSByZXR1cm4gdm9pZCB0aGlzLmNhY2hlTWFwLnNldChjYWNoZUtleSwge1xuICAgICAgICAgICAgd2lkdGg6IHcsXG4gICAgICAgICAgICBoZWlnaHQ6IGhcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHt3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0fSA9IHRoaXMuY2FjaGVNYXAuZ2V0KGNhY2hlS2V5KTtcbiAgICAgICAgKHcgPCB3aWR0aCAmJiBoIDwgaGVpZ2h0IHx8IHcgPD0gd2lkdGggJiYgaCA8IGhlaWdodCkgJiYgdGhpcy5jYWNoZU1hcC5zZXQoY2FjaGVLZXksIHtcbiAgICAgICAgICAgIHdpZHRoOiB3LFxuICAgICAgICAgICAgaGVpZ2h0OiBoXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpc1NpemVMYXJnZXJUaGFuTWF4KHRhZywgZHQpIHtcbiAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBgJHt0YWcuYW5nbGV9LSR7ZHR9YDtcbiAgICAgICAgaWYgKCF0aGlzLmNhY2hlTWFwLmhhcyhjYWNoZUtleSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3Qge3dpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHR9ID0gdGhpcy5jYWNoZU1hcC5nZXQoY2FjaGVLZXkpLCB3ID0gdGFnLngxIC0gdGFnLngwLCBoID0gdGFnLnkxIC0gdGFnLnkwO1xuICAgICAgICByZXR1cm4gdyA+PSB3aWR0aCAmJiBoID49IGhlaWdodDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNsb3VkU3ByaXRlKGNvbnRleHRBbmRSYXRpbywgZCwgZGF0YSwgZGksIGN3LCBjaCkge1xuICAgIGlmIChkLnNwcml0ZSkgcmV0dXJuO1xuICAgIGNvbnN0IGMgPSBjb250ZXh0QW5kUmF0aW8uY29udGV4dCwgcmF0aW8gPSBjb250ZXh0QW5kUmF0aW8ucmF0aW87XG4gICAgYy5zZXRUcmFuc2Zvcm0ocmF0aW8sIDAsIDAsIHJhdGlvLCAwLCAwKSwgYy5jbGVhclJlY3QoMCwgMCwgKGN3IDw8IDUpIC8gcmF0aW8sIGNoIC8gcmF0aW8pO1xuICAgIGxldCB4ID0gMCwgeSA9IDAsIG1heGggPSAwO1xuICAgIGNvbnN0IG4gPSBkYXRhLmxlbmd0aDtcbiAgICBsZXQgdywgdzMyLCBoLCBpLCBqO1xuICAgIGZvciAoLS1kaTsgKytkaSA8IG47ICkge1xuICAgICAgICBpZiAoZCA9IGRhdGFbZGldLCBjLnNhdmUoKSwgYy5mb250ID0gZC5mb250U3R5bGUgKyBcIiBcIiArIGQuZm9udFdlaWdodCArIFwiIFwiICsgfn4oKGQuZm9udFNpemUgKyAxKSAvIHJhdGlvKSArIFwicHggXCIgKyBkLmZvbnRGYW1pbHksIFxuICAgICAgICB3ID0gYy5tZWFzdXJlVGV4dChkLnRleHQgKyBcIm1cIikud2lkdGggKiByYXRpbywgaCA9IGQuZm9udFNpemUgPDwgMSwgZC5hbmdsZSkge1xuICAgICAgICAgICAgY29uc3Qgc3IgPSBNYXRoLnNpbihkLmFuZ2xlKSwgY3IgPSBNYXRoLmNvcyhkLmFuZ2xlKSwgd2NyID0gdyAqIGNyLCB3c3IgPSB3ICogc3IsIGhjciA9IGggKiBjciwgaHNyID0gaCAqIHNyO1xuICAgICAgICAgICAgdyA9IE1hdGgubWF4KE1hdGguYWJzKHdjciArIGhzciksIE1hdGguYWJzKHdjciAtIGhzcikpICsgMzEgPj4gNSA8PCA1LCBoID0gfn5NYXRoLm1heChNYXRoLmFicyh3c3IgKyBoY3IpLCBNYXRoLmFicyh3c3IgLSBoY3IpKTtcbiAgICAgICAgfSBlbHNlIHcgPSB3ICsgMzEgPj4gNSA8PCA1O1xuICAgICAgICBpZiAoaCA+IG1heGggJiYgKG1heGggPSBoKSwgeCArIHcgPj0gY3cgPDwgNSAmJiAoeCA9IDAsIHkgKz0gbWF4aCwgbWF4aCA9IDApLCB5ICsgaCA+PSBjaCkgYnJlYWs7XG4gICAgICAgIGMudHJhbnNsYXRlKCh4ICsgKHcgPj4gMSkpIC8gcmF0aW8sICh5ICsgKGggPj4gMSkpIC8gcmF0aW8pLCBkLmFuZ2xlICYmIGMucm90YXRlKGQuYW5nbGUpLCBcbiAgICAgICAgYy5maWxsVGV4dChkLnRleHQsIDAsIDApLCBkLnBhZGRpbmcgJiYgKGMubGluZVdpZHRoID0gMiAqIGQucGFkZGluZywgYy5zdHJva2VUZXh0KGQudGV4dCwgMCwgMCkpLCBcbiAgICAgICAgYy5yZXN0b3JlKCksIGQud2lkdGggPSB3LCBkLmhlaWdodCA9IGgsIGQueG9mZiA9IHgsIGQueW9mZiA9IHksIGQueDEgPSB3ID4+IDEsIGQueTEgPSBoID4+IDEsIFxuICAgICAgICBkLngwID0gLWQueDEsIGQueTAgPSAtZC55MSwgZC5oYXNUZXh0ID0gITAsIHggKz0gdztcbiAgICB9XG4gICAgY29uc3QgcGl4ZWxzID0gYy5nZXRJbWFnZURhdGEoMCwgMCwgKGN3IDw8IDUpIC8gcmF0aW8sIGNoIC8gcmF0aW8pLmRhdGEsIHNwcml0ZSA9IFtdO1xuICAgIGZvciAoOy0tZGkgPj0gMDsgKSB7XG4gICAgICAgIGlmICghKGQgPSBkYXRhW2RpXSkuaGFzVGV4dCkgY29udGludWU7XG4gICAgICAgIGZvciAodyA9IGQud2lkdGgsIHczMiA9IHcgPj4gNSwgaCA9IGQueTEgLSBkLnkwLCBpID0gMDsgaSA8IGggKiB3MzI7IGkrKykgc3ByaXRlW2ldID0gMDtcbiAgICAgICAgaWYgKHggPSBkLnhvZmYsIG51bGwgPT0geCkgcmV0dXJuO1xuICAgICAgICB5ID0gZC55b2ZmO1xuICAgICAgICBsZXQgc2VlbiA9IDAsIHNlZW5Sb3cgPSAtMTtcbiAgICAgICAgZm9yIChqID0gMDsgaiA8IGg7IGorKykge1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHc7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGsgPSB3MzIgKiBqICsgKGkgPj4gNSksIG0gPSBwaXhlbHNbKHkgKyBqKSAqIChjdyA8PCA1KSArICh4ICsgaSkgPDwgMl0gPyAxIDw8IDMxIC0gaSAlIDMyIDogMDtcbiAgICAgICAgICAgICAgICBzcHJpdGVba10gfD0gbSwgc2VlbiB8PSBtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VlbiA/IHNlZW5Sb3cgPSBqIDogKGQueTArKywgaC0tLCBqLS0sIHkrKyk7XG4gICAgICAgIH1cbiAgICAgICAgZC55MSA9IGQueTAgKyBzZWVuUm93LCBkLnNwcml0ZSA9IHNwcml0ZS5zbGljZSgwLCAoZC55MSAtIGQueTApICogdzMyKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNsb3VkQ29sbGlkZSh0YWcsIGJvYXJkLCBzaXplKSB7XG4gICAgY29uc3Qgc3cgPSBzaXplWzBdID4+IDUsIHNwcml0ZSA9IHRhZy5zcHJpdGUsIHcgPSB0YWcud2lkdGggPj4gNSwgbHggPSB0YWcueCAtICh3IDw8IDQpLCBzeCA9IDEyNyAmIGx4LCBtc3ggPSAzMiAtIHN4LCBoID0gdGFnLnkxIC0gdGFnLnkwO1xuICAgIGxldCBsYXN0LCB4ID0gKHRhZy55ICsgdGFnLnkwKSAqIHN3ICsgKGx4ID4+IDUpO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgaDsgaisrKSB7XG4gICAgICAgIGxhc3QgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSB3OyBpKyspIGlmICgobGFzdCA8PCBtc3ggfCAoaSA8IHcgPyAobGFzdCA9IHNwcml0ZVtqICogdyArIGldKSA+Pj4gc3ggOiAwKSkgJiBib2FyZFt4ICsgaV0pIHJldHVybiAhMDtcbiAgICAgICAgeCArPSBzdztcbiAgICB9XG4gICAgcmV0dXJuICExO1xufVxuXG5mdW5jdGlvbiBjbG91ZEJvdW5kcyhib3VuZHMsIGQpIHtcbiAgICBjb25zdCBiMCA9IGJvdW5kc1swXSwgYjEgPSBib3VuZHNbMV07XG4gICAgZC54ICsgZC54MCA8IGIwLnggJiYgKGIwLnggPSBkLnggKyBkLngwKSwgZC55ICsgZC55MCA8IGIwLnkgJiYgKGIwLnkgPSBkLnkgKyBkLnkwKSwgXG4gICAgZC54ICsgZC54MSA+IGIxLnggJiYgKGIxLnggPSBkLnggKyBkLngxKSwgZC55ICsgZC55MSA+IGIxLnkgJiYgKGIxLnkgPSBkLnkgKyBkLnkxKTtcbn1cblxuZnVuY3Rpb24gY29sbGlkZVJlY3RzKGEsIGIpIHtcbiAgICByZXR1cm4gYS54ICsgYS54MSA+IGJbMF0ueCAmJiBhLnggKyBhLngwIDwgYlsxXS54ICYmIGEueSArIGEueTEgPiBiWzBdLnkgJiYgYS55ICsgYS55MCA8IGJbMV0ueTtcbn1cblxuQ2xvdWRMYXlvdXQuZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgZW5sYXJnZTogITEsXG4gICAgbWluRm9udFNpemU6IDIsXG4gICAgbWF4U2luZ2xlV29yZFRyeUNvdW50OiAyXG59O1xuXG5jb25zdCBpc0Z1bGxPdXRzaWRlID0gKHRhZywgc2l6ZSkgPT4gdGFnLnggKyB0YWcueDAgPiBzaXplWzBdIHx8IHRhZy55ICsgdGFnLnkwID4gc2l6ZVswXSB8fCB0YWcueCArIHRhZy54MSA8IDAgfHwgdGFnLnkgKyB0YWcueTEgPCAwLCBpc1BhcnRPdXRzaWRlID0gKHRhZywgc2l6ZSkgPT4gdGFnLnggKyB0YWcueDAgPCAwIHx8IHRhZy55ICsgdGFnLnkwIDwgMCB8fCB0YWcueCArIHRhZy54MSA+IHNpemVbMF0gfHwgdGFnLnkgKyB0YWcueTEgPiBzaXplWzFdO1xuXG5mdW5jdGlvbiBjbGlwSW5uZXJUYWcodGFnLCBzaXplKSB7XG4gICAgY29uc3Qgc3ByaXRlID0gdGFnLnNwcml0ZSwgaCA9IHRhZy55MSAtIHRhZy55MCwgdyA9IHRhZy53aWR0aCA+PiA1O1xuICAgIGxldCB4ID0gMDtcbiAgICBjb25zdCBfc3ByaXRlID0gW10sIGpzID0gTWF0aC5tYXgoLSh0YWcueTAgKyB0YWcueSksIDApLCBqZSA9IE1hdGgubWluKGggKyAoc2l6ZVsxXSAtICh0YWcueTEgKyB0YWcueSkpLCBoKSwgaXMgPSBNYXRoLm1heCgtKHRhZy54MCArIHRhZy54KSwgMCkgPj4gNSwgaWUgPSBNYXRoLm1pbih3ICsgKHNpemVbMF0gLSAodGFnLngxICsgdGFnLngpID4+IDUpICsgMSwgdyk7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBoOyBqKyspIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3OyBpKyspIGogPCBqcyB8fCBqZSA8PSBqIHx8IGkgPCBpcyB8fCBpZSA8PSBpIHx8IF9zcHJpdGUucHVzaChzcHJpdGVbeCArIGldKTtcbiAgICAgICAgeCArPSB3O1xuICAgIH1cbiAgICBjb25zdCB4bCA9IGlzIDw8IDUsIHhyID0gdyAtIGllIDw8IDUsIHliID0ganMsIHl0ID0gaCAtIGplO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRhZyksIHtcbiAgICAgICAgd2lkdGg6IHRhZy53aWR0aCAtIHhsIC0geHIsXG4gICAgICAgIGhlaWdodDogdGFnLmhlaWdodCAtIHliIC0geXQsXG4gICAgICAgIHgwOiB0YWcueDAgKyB4bCxcbiAgICAgICAgeDE6IHRhZy54MSAtIHhyLFxuICAgICAgICB5MDogdGFnLnkwICsgeWIsXG4gICAgICAgIHkxOiB0YWcueTEgLSB5dCxcbiAgICAgICAgeDogdGFnLnggKyB4bCAvIDIgLSB4ciAvIDIsXG4gICAgICAgIHNwcml0ZTogX3Nwcml0ZVxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xvdWQtbGF5b3V0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/cloud-layout.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/fast-layout.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/fast-layout.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FastLayout: () => (/* binding */ FastLayout)\n/* harmony export */ });\n/* harmony import */ var _visactor_vrender_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vrender-core */ \"(ssr)/./node_modules/.pnpm/@visactor+vrender-core@0.20.12/node_modules/@visactor/vrender-core/es/graphic/bounds.js\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/base.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/merge.js\");\n\n\n\n\n\n\nclass FastLayout extends _base__WEBPACK_IMPORTED_MODULE_0__.BaseLayout {\n    constructor(options) {\n        super((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({}, FastLayout.defaultOptions, options)), this.random = this.options.random ? Math.random : () => 0, \n        this.aspectRatio = 1;\n    }\n    fit(word) {\n        for (let i = 0, len = this.result.length; i < len; i++) if (isOverlap(word, this.result[i])) return !1;\n        return !0;\n    }\n    getTextInfo(datum, index) {\n        const info = {\n            datum: datum,\n            fontSize: this.getTextFontSize(datum),\n            fontWeight: this.getTextFontWeight(datum),\n            fontStyle: this.getTextFontStyle(datum),\n            fontFamily: this.getTextFontFamily(datum),\n            angle: this.getTextRotate(datum, index),\n            text: this.getText(datum) + \"\",\n            x: this.center[0],\n            y: this.center[1]\n        }, bounds = (0,_visactor_vrender_core__WEBPACK_IMPORTED_MODULE_2__.getTextBounds)(info);\n        return info.width = bounds.width(), info.height = bounds.height(), info.top = this.center[1] - info.height + .21 * info.height, \n        info.left = this.center[0] - info.width / 2, info;\n    }\n    layoutWord(index) {\n        const info = this.getTextInfo(this.data[index], index);\n        let angle = 2 * Math.PI, radius = 0, left = info.left, top = info.top;\n        const width = info.width, height = info.height;\n        let rx = 1, isFit = this.fit(info);\n        for (;!isFit && radius < this.maxRadius; ) radius += .5, rx = this.shape(radius / this.maxRadius * 2 * Math.PI), \n        angle += .5 * (this.options.random ? this.random() > .5 ? 1 : -1 : index % 2 == 0 ? 1 : -1), \n        left = this.center[0] - width / 2 + radius * rx * Math.cos(angle) * this.aspectRatio, \n        top = this.center[1] - height / 2 + radius * rx * Math.sin(angle), info.left = left, \n        info.top = top, info.x = left + width / 2, info.y = top + height / 2, isFit = this.fit(info);\n        return !!isFit && (!!(this.options.clip || info.left >= 0 && info.left + info.width <= this.width && info.top >= 0 && info.top + info.height <= this.height) && (this.result.push(info), \n        !0));\n    }\n    layout(data, config) {\n        if (!(null == data ? void 0 : data.length)) return [];\n        this.initProgressive(), this.result = [], this.maxRadius = Math.sqrt(config.width * config.width + config.height * config.height) / 2, \n        this.center = [ config.width / 2, config.height / 2 ], this.width = config.width, \n        this.height = config.height, this.data = data.sort(((a, b) => this.getTextFontSize(b) - this.getTextFontSize(a)));\n        let i = 0;\n        for (;i < data.length; ) {\n            this.layoutWord(i);\n            if (i++, this.progressiveIndex = i, this.exceedTime()) break;\n        }\n        return this.result;\n    }\n}\n\nfunction isOverlap(a, b) {\n    return !(a.left + a.width < b.left || a.top + a.height < b.top || a.left > b.left + b.width || a.top > b.top + b.height);\n}\n\n//# sourceMappingURL=fast-layout.js.map\nFastLayout.defaultOptions = {\n    enlarge: !1\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2Zhc3QtbGF5b3V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBdUQ7O0FBRW5COztBQUVLOztBQUVsQyx5QkFBeUIsNkNBQVU7QUFDMUM7QUFDQSxjQUFjLDREQUFLLEdBQUc7QUFDdEI7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELFNBQVM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLFdBQVcscUVBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsbUNBQW1DO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxpQkFBaUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Z5bmxhdGljcy1haS8uL25vZGVfbW9kdWxlcy8ucG5wbS9AdmlzYWN0b3IrdmdyYW1tYXItd29yZGNsb3VkQDAuMTQuMTMvbm9kZV9tb2R1bGVzL0B2aXNhY3Rvci92Z3JhbW1hci13b3JkY2xvdWQvZXMvZmFzdC1sYXlvdXQuanM/NzZkOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRUZXh0Qm91bmRzIH0gZnJvbSBcIkB2aXNhY3Rvci92cmVuZGVyLWNvcmVcIjtcblxuaW1wb3J0IHsgQmFzZUxheW91dCB9IGZyb20gXCIuL2Jhc2VcIjtcblxuaW1wb3J0IHsgbWVyZ2UgfSBmcm9tIFwiQHZpc2FjdG9yL3Z1dGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgRmFzdExheW91dCBleHRlbmRzIEJhc2VMYXlvdXQge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIobWVyZ2Uoe30sIEZhc3RMYXlvdXQuZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpKSwgdGhpcy5yYW5kb20gPSB0aGlzLm9wdGlvbnMucmFuZG9tID8gTWF0aC5yYW5kb20gOiAoKSA9PiAwLCBcbiAgICAgICAgdGhpcy5hc3BlY3RSYXRpbyA9IDE7XG4gICAgfVxuICAgIGZpdCh3b3JkKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB0aGlzLnJlc3VsdC5sZW5ndGg7IGkgPCBsZW47IGkrKykgaWYgKGlzT3ZlcmxhcCh3b3JkLCB0aGlzLnJlc3VsdFtpXSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBnZXRUZXh0SW5mbyhkYXR1bSwgaW5kZXgpIHtcbiAgICAgICAgY29uc3QgaW5mbyA9IHtcbiAgICAgICAgICAgIGRhdHVtOiBkYXR1bSxcbiAgICAgICAgICAgIGZvbnRTaXplOiB0aGlzLmdldFRleHRGb250U2l6ZShkYXR1bSksXG4gICAgICAgICAgICBmb250V2VpZ2h0OiB0aGlzLmdldFRleHRGb250V2VpZ2h0KGRhdHVtKSxcbiAgICAgICAgICAgIGZvbnRTdHlsZTogdGhpcy5nZXRUZXh0Rm9udFN0eWxlKGRhdHVtKSxcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6IHRoaXMuZ2V0VGV4dEZvbnRGYW1pbHkoZGF0dW0pLFxuICAgICAgICAgICAgYW5nbGU6IHRoaXMuZ2V0VGV4dFJvdGF0ZShkYXR1bSwgaW5kZXgpLFxuICAgICAgICAgICAgdGV4dDogdGhpcy5nZXRUZXh0KGRhdHVtKSArIFwiXCIsXG4gICAgICAgICAgICB4OiB0aGlzLmNlbnRlclswXSxcbiAgICAgICAgICAgIHk6IHRoaXMuY2VudGVyWzFdXG4gICAgICAgIH0sIGJvdW5kcyA9IGdldFRleHRCb3VuZHMoaW5mbyk7XG4gICAgICAgIHJldHVybiBpbmZvLndpZHRoID0gYm91bmRzLndpZHRoKCksIGluZm8uaGVpZ2h0ID0gYm91bmRzLmhlaWdodCgpLCBpbmZvLnRvcCA9IHRoaXMuY2VudGVyWzFdIC0gaW5mby5oZWlnaHQgKyAuMjEgKiBpbmZvLmhlaWdodCwgXG4gICAgICAgIGluZm8ubGVmdCA9IHRoaXMuY2VudGVyWzBdIC0gaW5mby53aWR0aCAvIDIsIGluZm87XG4gICAgfVxuICAgIGxheW91dFdvcmQoaW5kZXgpIHtcbiAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMuZ2V0VGV4dEluZm8odGhpcy5kYXRhW2luZGV4XSwgaW5kZXgpO1xuICAgICAgICBsZXQgYW5nbGUgPSAyICogTWF0aC5QSSwgcmFkaXVzID0gMCwgbGVmdCA9IGluZm8ubGVmdCwgdG9wID0gaW5mby50b3A7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gaW5mby53aWR0aCwgaGVpZ2h0ID0gaW5mby5oZWlnaHQ7XG4gICAgICAgIGxldCByeCA9IDEsIGlzRml0ID0gdGhpcy5maXQoaW5mbyk7XG4gICAgICAgIGZvciAoOyFpc0ZpdCAmJiByYWRpdXMgPCB0aGlzLm1heFJhZGl1czsgKSByYWRpdXMgKz0gLjUsIHJ4ID0gdGhpcy5zaGFwZShyYWRpdXMgLyB0aGlzLm1heFJhZGl1cyAqIDIgKiBNYXRoLlBJKSwgXG4gICAgICAgIGFuZ2xlICs9IC41ICogKHRoaXMub3B0aW9ucy5yYW5kb20gPyB0aGlzLnJhbmRvbSgpID4gLjUgPyAxIDogLTEgOiBpbmRleCAlIDIgPT0gMCA/IDEgOiAtMSksIFxuICAgICAgICBsZWZ0ID0gdGhpcy5jZW50ZXJbMF0gLSB3aWR0aCAvIDIgKyByYWRpdXMgKiByeCAqIE1hdGguY29zKGFuZ2xlKSAqIHRoaXMuYXNwZWN0UmF0aW8sIFxuICAgICAgICB0b3AgPSB0aGlzLmNlbnRlclsxXSAtIGhlaWdodCAvIDIgKyByYWRpdXMgKiByeCAqIE1hdGguc2luKGFuZ2xlKSwgaW5mby5sZWZ0ID0gbGVmdCwgXG4gICAgICAgIGluZm8udG9wID0gdG9wLCBpbmZvLnggPSBsZWZ0ICsgd2lkdGggLyAyLCBpbmZvLnkgPSB0b3AgKyBoZWlnaHQgLyAyLCBpc0ZpdCA9IHRoaXMuZml0KGluZm8pO1xuICAgICAgICByZXR1cm4gISFpc0ZpdCAmJiAoISEodGhpcy5vcHRpb25zLmNsaXAgfHwgaW5mby5sZWZ0ID49IDAgJiYgaW5mby5sZWZ0ICsgaW5mby53aWR0aCA8PSB0aGlzLndpZHRoICYmIGluZm8udG9wID49IDAgJiYgaW5mby50b3AgKyBpbmZvLmhlaWdodCA8PSB0aGlzLmhlaWdodCkgJiYgKHRoaXMucmVzdWx0LnB1c2goaW5mbyksIFxuICAgICAgICAhMCkpO1xuICAgIH1cbiAgICBsYXlvdXQoZGF0YSwgY29uZmlnKSB7XG4gICAgICAgIGlmICghKG51bGwgPT0gZGF0YSA/IHZvaWQgMCA6IGRhdGEubGVuZ3RoKSkgcmV0dXJuIFtdO1xuICAgICAgICB0aGlzLmluaXRQcm9ncmVzc2l2ZSgpLCB0aGlzLnJlc3VsdCA9IFtdLCB0aGlzLm1heFJhZGl1cyA9IE1hdGguc3FydChjb25maWcud2lkdGggKiBjb25maWcud2lkdGggKyBjb25maWcuaGVpZ2h0ICogY29uZmlnLmhlaWdodCkgLyAyLCBcbiAgICAgICAgdGhpcy5jZW50ZXIgPSBbIGNvbmZpZy53aWR0aCAvIDIsIGNvbmZpZy5oZWlnaHQgLyAyIF0sIHRoaXMud2lkdGggPSBjb25maWcud2lkdGgsIFxuICAgICAgICB0aGlzLmhlaWdodCA9IGNvbmZpZy5oZWlnaHQsIHRoaXMuZGF0YSA9IGRhdGEuc29ydCgoKGEsIGIpID0+IHRoaXMuZ2V0VGV4dEZvbnRTaXplKGIpIC0gdGhpcy5nZXRUZXh0Rm9udFNpemUoYSkpKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBmb3IgKDtpIDwgZGF0YS5sZW5ndGg7ICkge1xuICAgICAgICAgICAgdGhpcy5sYXlvdXRXb3JkKGkpO1xuICAgICAgICAgICAgaWYgKGkrKywgdGhpcy5wcm9ncmVzc2l2ZUluZGV4ID0gaSwgdGhpcy5leGNlZWRUaW1lKCkpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3VsdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzT3ZlcmxhcChhLCBiKSB7XG4gICAgcmV0dXJuICEoYS5sZWZ0ICsgYS53aWR0aCA8IGIubGVmdCB8fCBhLnRvcCArIGEuaGVpZ2h0IDwgYi50b3AgfHwgYS5sZWZ0ID4gYi5sZWZ0ICsgYi53aWR0aCB8fCBhLnRvcCA+IGIudG9wICsgYi5oZWlnaHQpO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1mYXN0LWxheW91dC5qcy5tYXBcbkZhc3RMYXlvdXQuZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgZW5sYXJnZTogITFcbn07Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/fast-layout.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/grid-layout.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/grid-layout.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GridLayout: () => (/* binding */ GridLayout)\n/* harmony export */ });\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/merge.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/array.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isObject.js\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/base.js\");\n/* harmony import */ var _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @visactor/vgrammar-util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-util@0.14.13/node_modules/@visactor/vgrammar-util/es/image.js\");\n/* harmony import */ var _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @visactor/vgrammar-util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-util@0.14.13/node_modules/@visactor/vgrammar-util/es/shapes.js\");\n\n\n\n\n\n\nclass GridLayout extends _base__WEBPACK_IMPORTED_MODULE_0__.BaseLayout {\n    constructor(options) {\n        super((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({}, GridLayout.defaultOptions, options)), this.fillGridAt = (x, y) => {\n            x >= this.ngx || y >= this.ngy || x < 0 || y < 0 || (this.grid[x][y] = !1);\n        }, this.updateGrid = (gx, gy, gw, gh, info) => {\n            const occupied = info.occupied;\n            let i = occupied.length;\n            for (;i--; ) {\n                const px = gx + occupied[i][0], py = gy + occupied[i][1];\n                px >= this.ngx || py >= this.ngy || px < 0 || py < 0 || this.fillGridAt(px, py);\n            }\n        }, this.gridSize = Math.max(Math.floor(this.options.gridSize), 4);\n    }\n    getPointsAtRadius(radius) {\n        if (this.pointsAtRadius[radius]) return this.pointsAtRadius[radius];\n        const T = 8 * radius;\n        let t = T;\n        const points = [];\n        for (0 === radius && points.push([ this.center[0], this.center[1], 0 ]); t--; ) {\n            const rx = this.shape(t / T * 2 * Math.PI);\n            points.push([ this.center[0] + radius * rx * Math.cos(-t / T * 2 * Math.PI), this.center[1] + radius * rx * Math.sin(-t / T * 2 * Math.PI) * this.options.ellipticity, t / T * 2 * Math.PI ]);\n        }\n        return this.pointsAtRadius[radius] = points, points;\n    }\n    getTextInfo(item, shrinkRatio = 1, index) {\n        var _a;\n        const sizeShrinkRatio = this.options.clip ? 1 : shrinkRatio, fontSize = Math.max(Math.floor((this.isTryRepeatFill ? this.options.fillTextFontSize : this.getTextFontSize(item)) * sizeShrinkRatio), this.options.minFontSize);\n        let word = this.getText(item) + \"\";\n        if (this.options.clip && (word = word.slice(0, Math.ceil(word.length * shrinkRatio))), \n        !word) return null;\n        const fontWeight = this.getTextFontWeight(item), fontStyle = this.getTextFontStyle(item), angle = this.getTextRotate && null !== (_a = this.getTextRotate(item, index)) && void 0 !== _a ? _a : 0, fontFamily = this.getTextFontFamily(item), fcanvas = document.createElement(\"canvas\"), fctx = fcanvas.getContext(\"2d\", {\n            willReadFrequently: !0\n        });\n        fctx.font = fontStyle + \" \" + fontWeight + \" \" + fontSize.toString(10) + \"px \" + fontFamily;\n        const fw = fctx.measureText(word).width, fh = Math.max(fontSize, fctx.measureText(\"m\").width, fctx.measureText(\"Ｗ\").width);\n        let boxWidth = fw + 2 * fh, boxHeight = 3 * fh;\n        const fgw = Math.ceil(boxWidth / this.gridSize), fgh = Math.ceil(boxHeight / this.gridSize);\n        boxWidth = fgw * this.gridSize, boxHeight = fgh * this.gridSize;\n        const fillTextOffsetX = -fw / 2, fillTextOffsetY = .4 * -fh, cgh = Math.ceil((boxWidth * Math.abs(Math.sin(angle)) + boxHeight * Math.abs(Math.cos(angle))) / this.gridSize), cgw = Math.ceil((boxWidth * Math.abs(Math.cos(angle)) + boxHeight * Math.abs(Math.sin(angle))) / this.gridSize), width = cgw * this.gridSize, height = cgh * this.gridSize;\n        fcanvas.setAttribute(\"width\", \"\" + width), fcanvas.setAttribute(\"height\", \"\" + height), \n        fctx.scale(1, 1), fctx.translate(width / 2, height / 2), fctx.rotate(-angle), fctx.font = fontStyle + \" \" + fontWeight + \" \" + fontSize.toString(10) + \"px \" + fontFamily, \n        fctx.fillStyle = \"#000\", fctx.textBaseline = \"middle\", fctx.fillText(word, fillTextOffsetX, fillTextOffsetY);\n        const imageData = fctx.getImageData(0, 0, width, height).data;\n        if (this.exceedTime()) return null;\n        const occupied = [];\n        let gy, gx = cgw;\n        const bounds = [ cgh / 2, cgw / 2, cgh / 2, cgw / 2 ], singleGridLoop = (gx, gy, out) => {\n            let y = this.gridSize;\n            for (;y--; ) {\n                let x = this.gridSize;\n                for (;x--; ) if (imageData[4 * ((gy * this.gridSize + y) * width + (gx * this.gridSize + x)) + 3]) return out.push([ gx, gy ]), \n                gx < bounds[3] && (bounds[3] = gx), gx > bounds[1] && (bounds[1] = gx), gy < bounds[0] && (bounds[0] = gy), \n                void (gy > bounds[2] && (bounds[2] = gy));\n            }\n        };\n        for (;gx--; ) for (gy = cgh; gy--; ) singleGridLoop(gx, gy, occupied);\n        return {\n            datum: item,\n            occupied: occupied,\n            bounds: bounds,\n            gw: cgw,\n            gh: cgh,\n            fillTextOffsetX: fillTextOffsetX,\n            fillTextOffsetY: fillTextOffsetY,\n            fillTextWidth: fw,\n            fillTextHeight: fh,\n            fontSize: fontSize,\n            fontStyle: fontStyle,\n            fontWeight: fontWeight,\n            fontFamily: fontFamily,\n            angle: angle,\n            text: word\n        };\n    }\n    calculateEmptyRate() {\n        const totalCount = this.ngx * this.ngy;\n        let emptyCount = 0;\n        for (let gx = 0; gx < this.ngx; gx++) for (let gy = 0; gy < this.ngy; gy++) this.grid[gx][gy] && emptyCount++;\n        return emptyCount / totalCount;\n    }\n    canFitText(gx, gy, gw, gh, occupied) {\n        let i = occupied.length;\n        for (;i--; ) {\n            const px = gx + occupied[i][0], py = gy + occupied[i][1];\n            if (px >= this.ngx || py >= this.ngy || px < 0 || py < 0) {\n                if (!this.options.drawOutOfBound) return !1;\n            } else if (!this.grid[px][py]) return !1;\n        }\n        return !0;\n    }\n    layoutWord(index, shrinkRatio = 1) {\n        const item = this.data[index], info = this.getTextInfo(item, shrinkRatio, index);\n        if (!info) return !1;\n        if (this.exceedTime()) return !1;\n        if (!this.options.drawOutOfBound && (!this.options.shrink || info.fontSize <= this.options.minFontSize) && !this.options.clip) {\n            const bounds = info.bounds;\n            if (bounds[1] - bounds[3] + 1 > this.ngx || bounds[2] - bounds[0] + 1 > this.ngy) return !1;\n        }\n        let r = this.maxRadius + 1;\n        const tryToPutWordAtPoint = gxy => {\n            const gx = Math.floor(gxy[0] - info.gw / 2), gy = Math.floor(gxy[1] - info.gh / 2), gw = info.gw, gh = info.gh;\n            return !!this.canFitText(gx, gy, gw, gh, info.occupied) && (info.distance = this.maxRadius - r, \n            info.theta = gxy[2], this.outputText(gx, gy, info), this.updateGrid(gx, gy, gw, gh, info), \n            !0);\n        };\n        for (;r--; ) {\n            let points = this.getPointsAtRadius(this.maxRadius - r);\n            this.options.random && (points = [].concat(points), (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_2__.shuffleArray)(points));\n            if (points.some(tryToPutWordAtPoint)) return !0;\n        }\n        return (this.options.clip || !!(this.options.shrink && info.fontSize > this.options.minFontSize)) && this.layoutWord(index, .75 * shrinkRatio);\n    }\n    outputText(gx, gy, info) {\n        const color = this.getTextColor(info), output = {\n            text: info.text,\n            datum: info.datum,\n            color: color,\n            fontStyle: info.fontStyle,\n            fontWeight: info.fontWeight,\n            fontFamily: info.fontFamily,\n            angle: info.angle,\n            width: info.fillTextWidth,\n            height: info.fillTextHeight,\n            x: (gx + info.gw / 2) * this.gridSize,\n            y: (gy + info.gh / 2) * this.gridSize + info.fillTextOffsetY + .5 * info.fontSize,\n            fontSize: info.fontSize\n        };\n        this.result.push(output), this.progressiveResult && this.progressiveResult.push(output);\n    }\n    initGrid(config) {\n        this.grid = [];\n        const shape = this.options.shape;\n        if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(shape)) {\n            const canvas = (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_4__.generateMaskCanvas)(shape, config.width, config.height);\n            let imageData = canvas.getContext(\"2d\").getImageData(0, 0, this.ngx * this.gridSize, this.ngy * this.gridSize);\n            this.options.onUpdateMaskCanvas && this.options.onUpdateMaskCanvas(canvas);\n            let i, isEmptyPixel = (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_4__.generateIsEmptyPixel)(shape.backgroundColor);\n            const singleGridLoop = (gx, gy) => {\n                let y = this.gridSize;\n                for (;y--; ) {\n                    let x = this.gridSize;\n                    for (;x--; ) if (i = 4, !isEmptyPixel(imageData, gy * this.gridSize + y, gx * this.gridSize + x)) return void (this.grid[gx][gy] = !0);\n                }\n                this.grid[gx][gy] = !1;\n            };\n            let gx = this.ngx;\n            for (;gx--; ) {\n                this.grid[gx] = [];\n                let gy = this.ngy;\n                for (;gy--; ) singleGridLoop(gx, gy), !1 !== this.grid[gx][gy] && (this.grid[gx][gy] = !0);\n            }\n            imageData = isEmptyPixel = void 0;\n        } else {\n            let gx = this.ngx;\n            for (;gx--; ) {\n                this.grid[gx] = [];\n                let gy = this.ngy;\n                for (;gy--; ) this.grid[gx][gy] = !0;\n            }\n        }\n    }\n    canRepeat() {\n        return this.calculateEmptyRate() > .001;\n    }\n    layout(data, config) {\n        this.initProgressive(), this.drawnCount = 0, this.isTryRepeatFill = !1, this.originalData = data, \n        this.data = data, this.pointsAtRadius = [], this.ngx = Math.floor(config.width / this.gridSize), \n        this.ngy = Math.floor(config.height / this.gridSize);\n        const {center: center, maxRadius: maxRadius} = (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_5__.getMaxRadiusAndCenter)(this.options.shape, [ config.width, config.height ]);\n        return this.center = config.origin ? [ config.origin[0] / this.gridSize, config.origin[1] / this.gridSize ] : [ center[0] / this.gridSize, center[1] / this.gridSize ], \n        this.maxRadius = Math.floor(maxRadius / this.gridSize), this.initGrid(config), this.result = [], \n        this.progressiveRun();\n    }\n}\n\nGridLayout.defaultOptions = {\n    gridSize: 8,\n    ellipticity: 1,\n    maxSingleWordTryCount: 1\n};\n//# sourceMappingURL=grid-layout.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2dyaWQtbGF5b3V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBaUU7O0FBRTdCOztBQUVzRTs7QUFFbkcseUJBQXlCLDZDQUFVO0FBQzFDO0FBQ0EsY0FBYyw0REFBSyxHQUFHO0FBQ3RCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxrQkFBa0IsS0FBSztBQUN2QjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGLEtBQUs7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLEtBQUs7QUFDdkI7QUFDQSxzQkFBc0IsS0FBSztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsTUFBTSxpQkFBaUIsTUFBTTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsZUFBZSx1QkFBdUIsZUFBZTtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsS0FBSztBQUNuQjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxLQUFLO0FBQ25CO0FBQ0EsZ0VBQWdFLDhEQUFZO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNERBQVE7QUFDcEIsMkJBQTJCLDJFQUFrQjtBQUM3QztBQUNBO0FBQ0Esa0NBQWtDLDZFQUFvQjtBQUN0RDtBQUNBO0FBQ0Esc0JBQXNCLEtBQUs7QUFDM0I7QUFDQSwwQkFBMEIsS0FBSztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0E7QUFDQSxzQkFBc0IsTUFBTTtBQUM1QjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBLHNCQUFzQixNQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzQ0FBc0MsRUFBRSw4RUFBcUI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9meW5sYXRpY3MtYWkvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2dyaWQtbGF5b3V0LmpzPzFhMDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNPYmplY3QsIG1lcmdlLCBzaHVmZmxlQXJyYXkgfSBmcm9tIFwiQHZpc2FjdG9yL3Z1dGlsc1wiO1xuXG5pbXBvcnQgeyBCYXNlTGF5b3V0IH0gZnJvbSBcIi4vYmFzZVwiO1xuXG5pbXBvcnQgeyBnZW5lcmF0ZUlzRW1wdHlQaXhlbCwgZ2VuZXJhdGVNYXNrQ2FudmFzLCBnZXRNYXhSYWRpdXNBbmRDZW50ZXIgfSBmcm9tIFwiQHZpc2FjdG9yL3ZncmFtbWFyLXV0aWxcIjtcblxuZXhwb3J0IGNsYXNzIEdyaWRMYXlvdXQgZXh0ZW5kcyBCYXNlTGF5b3V0IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG1lcmdlKHt9LCBHcmlkTGF5b3V0LmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKSksIHRoaXMuZmlsbEdyaWRBdCA9ICh4LCB5KSA9PiB7XG4gICAgICAgICAgICB4ID49IHRoaXMubmd4IHx8IHkgPj0gdGhpcy5uZ3kgfHwgeCA8IDAgfHwgeSA8IDAgfHwgKHRoaXMuZ3JpZFt4XVt5XSA9ICExKTtcbiAgICAgICAgfSwgdGhpcy51cGRhdGVHcmlkID0gKGd4LCBneSwgZ3csIGdoLCBpbmZvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvY2N1cGllZCA9IGluZm8ub2NjdXBpZWQ7XG4gICAgICAgICAgICBsZXQgaSA9IG9jY3VwaWVkLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAoO2ktLTsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHggPSBneCArIG9jY3VwaWVkW2ldWzBdLCBweSA9IGd5ICsgb2NjdXBpZWRbaV1bMV07XG4gICAgICAgICAgICAgICAgcHggPj0gdGhpcy5uZ3ggfHwgcHkgPj0gdGhpcy5uZ3kgfHwgcHggPCAwIHx8IHB5IDwgMCB8fCB0aGlzLmZpbGxHcmlkQXQocHgsIHB5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcy5ncmlkU2l6ZSA9IE1hdGgubWF4KE1hdGguZmxvb3IodGhpcy5vcHRpb25zLmdyaWRTaXplKSwgNCk7XG4gICAgfVxuICAgIGdldFBvaW50c0F0UmFkaXVzKHJhZGl1cykge1xuICAgICAgICBpZiAodGhpcy5wb2ludHNBdFJhZGl1c1tyYWRpdXNdKSByZXR1cm4gdGhpcy5wb2ludHNBdFJhZGl1c1tyYWRpdXNdO1xuICAgICAgICBjb25zdCBUID0gOCAqIHJhZGl1cztcbiAgICAgICAgbGV0IHQgPSBUO1xuICAgICAgICBjb25zdCBwb2ludHMgPSBbXTtcbiAgICAgICAgZm9yICgwID09PSByYWRpdXMgJiYgcG9pbnRzLnB1c2goWyB0aGlzLmNlbnRlclswXSwgdGhpcy5jZW50ZXJbMV0sIDAgXSk7IHQtLTsgKSB7XG4gICAgICAgICAgICBjb25zdCByeCA9IHRoaXMuc2hhcGUodCAvIFQgKiAyICogTWF0aC5QSSk7XG4gICAgICAgICAgICBwb2ludHMucHVzaChbIHRoaXMuY2VudGVyWzBdICsgcmFkaXVzICogcnggKiBNYXRoLmNvcygtdCAvIFQgKiAyICogTWF0aC5QSSksIHRoaXMuY2VudGVyWzFdICsgcmFkaXVzICogcnggKiBNYXRoLnNpbigtdCAvIFQgKiAyICogTWF0aC5QSSkgKiB0aGlzLm9wdGlvbnMuZWxsaXB0aWNpdHksIHQgLyBUICogMiAqIE1hdGguUEkgXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucG9pbnRzQXRSYWRpdXNbcmFkaXVzXSA9IHBvaW50cywgcG9pbnRzO1xuICAgIH1cbiAgICBnZXRUZXh0SW5mbyhpdGVtLCBzaHJpbmtSYXRpbyA9IDEsIGluZGV4KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3Qgc2l6ZVNocmlua1JhdGlvID0gdGhpcy5vcHRpb25zLmNsaXAgPyAxIDogc2hyaW5rUmF0aW8sIGZvbnRTaXplID0gTWF0aC5tYXgoTWF0aC5mbG9vcigodGhpcy5pc1RyeVJlcGVhdEZpbGwgPyB0aGlzLm9wdGlvbnMuZmlsbFRleHRGb250U2l6ZSA6IHRoaXMuZ2V0VGV4dEZvbnRTaXplKGl0ZW0pKSAqIHNpemVTaHJpbmtSYXRpbyksIHRoaXMub3B0aW9ucy5taW5Gb250U2l6ZSk7XG4gICAgICAgIGxldCB3b3JkID0gdGhpcy5nZXRUZXh0KGl0ZW0pICsgXCJcIjtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jbGlwICYmICh3b3JkID0gd29yZC5zbGljZSgwLCBNYXRoLmNlaWwod29yZC5sZW5ndGggKiBzaHJpbmtSYXRpbykpKSwgXG4gICAgICAgICF3b3JkKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZm9udFdlaWdodCA9IHRoaXMuZ2V0VGV4dEZvbnRXZWlnaHQoaXRlbSksIGZvbnRTdHlsZSA9IHRoaXMuZ2V0VGV4dEZvbnRTdHlsZShpdGVtKSwgYW5nbGUgPSB0aGlzLmdldFRleHRSb3RhdGUgJiYgbnVsbCAhPT0gKF9hID0gdGhpcy5nZXRUZXh0Um90YXRlKGl0ZW0sIGluZGV4KSkgJiYgdm9pZCAwICE9PSBfYSA/IF9hIDogMCwgZm9udEZhbWlseSA9IHRoaXMuZ2V0VGV4dEZvbnRGYW1pbHkoaXRlbSksIGZjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLCBmY3R4ID0gZmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiwge1xuICAgICAgICAgICAgd2lsbFJlYWRGcmVxdWVudGx5OiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgZmN0eC5mb250ID0gZm9udFN0eWxlICsgXCIgXCIgKyBmb250V2VpZ2h0ICsgXCIgXCIgKyBmb250U2l6ZS50b1N0cmluZygxMCkgKyBcInB4IFwiICsgZm9udEZhbWlseTtcbiAgICAgICAgY29uc3QgZncgPSBmY3R4Lm1lYXN1cmVUZXh0KHdvcmQpLndpZHRoLCBmaCA9IE1hdGgubWF4KGZvbnRTaXplLCBmY3R4Lm1lYXN1cmVUZXh0KFwibVwiKS53aWR0aCwgZmN0eC5tZWFzdXJlVGV4dChcIu+8t1wiKS53aWR0aCk7XG4gICAgICAgIGxldCBib3hXaWR0aCA9IGZ3ICsgMiAqIGZoLCBib3hIZWlnaHQgPSAzICogZmg7XG4gICAgICAgIGNvbnN0IGZndyA9IE1hdGguY2VpbChib3hXaWR0aCAvIHRoaXMuZ3JpZFNpemUpLCBmZ2ggPSBNYXRoLmNlaWwoYm94SGVpZ2h0IC8gdGhpcy5ncmlkU2l6ZSk7XG4gICAgICAgIGJveFdpZHRoID0gZmd3ICogdGhpcy5ncmlkU2l6ZSwgYm94SGVpZ2h0ID0gZmdoICogdGhpcy5ncmlkU2l6ZTtcbiAgICAgICAgY29uc3QgZmlsbFRleHRPZmZzZXRYID0gLWZ3IC8gMiwgZmlsbFRleHRPZmZzZXRZID0gLjQgKiAtZmgsIGNnaCA9IE1hdGguY2VpbCgoYm94V2lkdGggKiBNYXRoLmFicyhNYXRoLnNpbihhbmdsZSkpICsgYm94SGVpZ2h0ICogTWF0aC5hYnMoTWF0aC5jb3MoYW5nbGUpKSkgLyB0aGlzLmdyaWRTaXplKSwgY2d3ID0gTWF0aC5jZWlsKChib3hXaWR0aCAqIE1hdGguYWJzKE1hdGguY29zKGFuZ2xlKSkgKyBib3hIZWlnaHQgKiBNYXRoLmFicyhNYXRoLnNpbihhbmdsZSkpKSAvIHRoaXMuZ3JpZFNpemUpLCB3aWR0aCA9IGNndyAqIHRoaXMuZ3JpZFNpemUsIGhlaWdodCA9IGNnaCAqIHRoaXMuZ3JpZFNpemU7XG4gICAgICAgIGZjYW52YXMuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgXCJcIiArIHdpZHRoKSwgZmNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgXCJcIiArIGhlaWdodCksIFxuICAgICAgICBmY3R4LnNjYWxlKDEsIDEpLCBmY3R4LnRyYW5zbGF0ZSh3aWR0aCAvIDIsIGhlaWdodCAvIDIpLCBmY3R4LnJvdGF0ZSgtYW5nbGUpLCBmY3R4LmZvbnQgPSBmb250U3R5bGUgKyBcIiBcIiArIGZvbnRXZWlnaHQgKyBcIiBcIiArIGZvbnRTaXplLnRvU3RyaW5nKDEwKSArIFwicHggXCIgKyBmb250RmFtaWx5LCBcbiAgICAgICAgZmN0eC5maWxsU3R5bGUgPSBcIiMwMDBcIiwgZmN0eC50ZXh0QmFzZWxpbmUgPSBcIm1pZGRsZVwiLCBmY3R4LmZpbGxUZXh0KHdvcmQsIGZpbGxUZXh0T2Zmc2V0WCwgZmlsbFRleHRPZmZzZXRZKTtcbiAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gZmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCkuZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuZXhjZWVkVGltZSgpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3Qgb2NjdXBpZWQgPSBbXTtcbiAgICAgICAgbGV0IGd5LCBneCA9IGNndztcbiAgICAgICAgY29uc3QgYm91bmRzID0gWyBjZ2ggLyAyLCBjZ3cgLyAyLCBjZ2ggLyAyLCBjZ3cgLyAyIF0sIHNpbmdsZUdyaWRMb29wID0gKGd4LCBneSwgb3V0KSA9PiB7XG4gICAgICAgICAgICBsZXQgeSA9IHRoaXMuZ3JpZFNpemU7XG4gICAgICAgICAgICBmb3IgKDt5LS07ICkge1xuICAgICAgICAgICAgICAgIGxldCB4ID0gdGhpcy5ncmlkU2l6ZTtcbiAgICAgICAgICAgICAgICBmb3IgKDt4LS07ICkgaWYgKGltYWdlRGF0YVs0ICogKChneSAqIHRoaXMuZ3JpZFNpemUgKyB5KSAqIHdpZHRoICsgKGd4ICogdGhpcy5ncmlkU2l6ZSArIHgpKSArIDNdKSByZXR1cm4gb3V0LnB1c2goWyBneCwgZ3kgXSksIFxuICAgICAgICAgICAgICAgIGd4IDwgYm91bmRzWzNdICYmIChib3VuZHNbM10gPSBneCksIGd4ID4gYm91bmRzWzFdICYmIChib3VuZHNbMV0gPSBneCksIGd5IDwgYm91bmRzWzBdICYmIChib3VuZHNbMF0gPSBneSksIFxuICAgICAgICAgICAgICAgIHZvaWQgKGd5ID4gYm91bmRzWzJdICYmIChib3VuZHNbMl0gPSBneSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKDtneC0tOyApIGZvciAoZ3kgPSBjZ2g7IGd5LS07ICkgc2luZ2xlR3JpZExvb3AoZ3gsIGd5LCBvY2N1cGllZCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXR1bTogaXRlbSxcbiAgICAgICAgICAgIG9jY3VwaWVkOiBvY2N1cGllZCxcbiAgICAgICAgICAgIGJvdW5kczogYm91bmRzLFxuICAgICAgICAgICAgZ3c6IGNndyxcbiAgICAgICAgICAgIGdoOiBjZ2gsXG4gICAgICAgICAgICBmaWxsVGV4dE9mZnNldFg6IGZpbGxUZXh0T2Zmc2V0WCxcbiAgICAgICAgICAgIGZpbGxUZXh0T2Zmc2V0WTogZmlsbFRleHRPZmZzZXRZLFxuICAgICAgICAgICAgZmlsbFRleHRXaWR0aDogZncsXG4gICAgICAgICAgICBmaWxsVGV4dEhlaWdodDogZmgsXG4gICAgICAgICAgICBmb250U2l6ZTogZm9udFNpemUsXG4gICAgICAgICAgICBmb250U3R5bGU6IGZvbnRTdHlsZSxcbiAgICAgICAgICAgIGZvbnRXZWlnaHQ6IGZvbnRXZWlnaHQsXG4gICAgICAgICAgICBmb250RmFtaWx5OiBmb250RmFtaWx5LFxuICAgICAgICAgICAgYW5nbGU6IGFuZ2xlLFxuICAgICAgICAgICAgdGV4dDogd29yZFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYWxjdWxhdGVFbXB0eVJhdGUoKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsQ291bnQgPSB0aGlzLm5neCAqIHRoaXMubmd5O1xuICAgICAgICBsZXQgZW1wdHlDb3VudCA9IDA7XG4gICAgICAgIGZvciAobGV0IGd4ID0gMDsgZ3ggPCB0aGlzLm5neDsgZ3grKykgZm9yIChsZXQgZ3kgPSAwOyBneSA8IHRoaXMubmd5OyBneSsrKSB0aGlzLmdyaWRbZ3hdW2d5XSAmJiBlbXB0eUNvdW50Kys7XG4gICAgICAgIHJldHVybiBlbXB0eUNvdW50IC8gdG90YWxDb3VudDtcbiAgICB9XG4gICAgY2FuRml0VGV4dChneCwgZ3ksIGd3LCBnaCwgb2NjdXBpZWQpIHtcbiAgICAgICAgbGV0IGkgPSBvY2N1cGllZC5sZW5ndGg7XG4gICAgICAgIGZvciAoO2ktLTsgKSB7XG4gICAgICAgICAgICBjb25zdCBweCA9IGd4ICsgb2NjdXBpZWRbaV1bMF0sIHB5ID0gZ3kgKyBvY2N1cGllZFtpXVsxXTtcbiAgICAgICAgICAgIGlmIChweCA+PSB0aGlzLm5neCB8fCBweSA+PSB0aGlzLm5neSB8fCBweCA8IDAgfHwgcHkgPCAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuZHJhd091dE9mQm91bmQpIHJldHVybiAhMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuZ3JpZFtweF1bcHldKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBsYXlvdXRXb3JkKGluZGV4LCBzaHJpbmtSYXRpbyA9IDEpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZGF0YVtpbmRleF0sIGluZm8gPSB0aGlzLmdldFRleHRJbmZvKGl0ZW0sIHNocmlua1JhdGlvLCBpbmRleCk7XG4gICAgICAgIGlmICghaW5mbykgcmV0dXJuICExO1xuICAgICAgICBpZiAodGhpcy5leGNlZWRUaW1lKCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuZHJhd091dE9mQm91bmQgJiYgKCF0aGlzLm9wdGlvbnMuc2hyaW5rIHx8IGluZm8uZm9udFNpemUgPD0gdGhpcy5vcHRpb25zLm1pbkZvbnRTaXplKSAmJiAhdGhpcy5vcHRpb25zLmNsaXApIHtcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kcyA9IGluZm8uYm91bmRzO1xuICAgICAgICAgICAgaWYgKGJvdW5kc1sxXSAtIGJvdW5kc1szXSArIDEgPiB0aGlzLm5neCB8fCBib3VuZHNbMl0gLSBib3VuZHNbMF0gKyAxID4gdGhpcy5uZ3kpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgciA9IHRoaXMubWF4UmFkaXVzICsgMTtcbiAgICAgICAgY29uc3QgdHJ5VG9QdXRXb3JkQXRQb2ludCA9IGd4eSA9PiB7XG4gICAgICAgICAgICBjb25zdCBneCA9IE1hdGguZmxvb3IoZ3h5WzBdIC0gaW5mby5ndyAvIDIpLCBneSA9IE1hdGguZmxvb3IoZ3h5WzFdIC0gaW5mby5naCAvIDIpLCBndyA9IGluZm8uZ3csIGdoID0gaW5mby5naDtcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuY2FuRml0VGV4dChneCwgZ3ksIGd3LCBnaCwgaW5mby5vY2N1cGllZCkgJiYgKGluZm8uZGlzdGFuY2UgPSB0aGlzLm1heFJhZGl1cyAtIHIsIFxuICAgICAgICAgICAgaW5mby50aGV0YSA9IGd4eVsyXSwgdGhpcy5vdXRwdXRUZXh0KGd4LCBneSwgaW5mbyksIHRoaXMudXBkYXRlR3JpZChneCwgZ3ksIGd3LCBnaCwgaW5mbyksIFxuICAgICAgICAgICAgITApO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKDtyLS07ICkge1xuICAgICAgICAgICAgbGV0IHBvaW50cyA9IHRoaXMuZ2V0UG9pbnRzQXRSYWRpdXModGhpcy5tYXhSYWRpdXMgLSByKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5yYW5kb20gJiYgKHBvaW50cyA9IFtdLmNvbmNhdChwb2ludHMpLCBzaHVmZmxlQXJyYXkocG9pbnRzKSk7XG4gICAgICAgICAgICBpZiAocG9pbnRzLnNvbWUodHJ5VG9QdXRXb3JkQXRQb2ludCkpIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKHRoaXMub3B0aW9ucy5jbGlwIHx8ICEhKHRoaXMub3B0aW9ucy5zaHJpbmsgJiYgaW5mby5mb250U2l6ZSA+IHRoaXMub3B0aW9ucy5taW5Gb250U2l6ZSkpICYmIHRoaXMubGF5b3V0V29yZChpbmRleCwgLjc1ICogc2hyaW5rUmF0aW8pO1xuICAgIH1cbiAgICBvdXRwdXRUZXh0KGd4LCBneSwgaW5mbykge1xuICAgICAgICBjb25zdCBjb2xvciA9IHRoaXMuZ2V0VGV4dENvbG9yKGluZm8pLCBvdXRwdXQgPSB7XG4gICAgICAgICAgICB0ZXh0OiBpbmZvLnRleHQsXG4gICAgICAgICAgICBkYXR1bTogaW5mby5kYXR1bSxcbiAgICAgICAgICAgIGNvbG9yOiBjb2xvcixcbiAgICAgICAgICAgIGZvbnRTdHlsZTogaW5mby5mb250U3R5bGUsXG4gICAgICAgICAgICBmb250V2VpZ2h0OiBpbmZvLmZvbnRXZWlnaHQsXG4gICAgICAgICAgICBmb250RmFtaWx5OiBpbmZvLmZvbnRGYW1pbHksXG4gICAgICAgICAgICBhbmdsZTogaW5mby5hbmdsZSxcbiAgICAgICAgICAgIHdpZHRoOiBpbmZvLmZpbGxUZXh0V2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGluZm8uZmlsbFRleHRIZWlnaHQsXG4gICAgICAgICAgICB4OiAoZ3ggKyBpbmZvLmd3IC8gMikgKiB0aGlzLmdyaWRTaXplLFxuICAgICAgICAgICAgeTogKGd5ICsgaW5mby5naCAvIDIpICogdGhpcy5ncmlkU2l6ZSArIGluZm8uZmlsbFRleHRPZmZzZXRZICsgLjUgKiBpbmZvLmZvbnRTaXplLFxuICAgICAgICAgICAgZm9udFNpemU6IGluZm8uZm9udFNpemVcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChvdXRwdXQpLCB0aGlzLnByb2dyZXNzaXZlUmVzdWx0ICYmIHRoaXMucHJvZ3Jlc3NpdmVSZXN1bHQucHVzaChvdXRwdXQpO1xuICAgIH1cbiAgICBpbml0R3JpZChjb25maWcpIHtcbiAgICAgICAgdGhpcy5ncmlkID0gW107XG4gICAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5vcHRpb25zLnNoYXBlO1xuICAgICAgICBpZiAoaXNPYmplY3Qoc2hhcGUpKSB7XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBnZW5lcmF0ZU1hc2tDYW52YXMoc2hhcGUsIGNvbmZpZy53aWR0aCwgY29uZmlnLmhlaWdodCk7XG4gICAgICAgICAgICBsZXQgaW1hZ2VEYXRhID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKS5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5uZ3ggKiB0aGlzLmdyaWRTaXplLCB0aGlzLm5neSAqIHRoaXMuZ3JpZFNpemUpO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uVXBkYXRlTWFza0NhbnZhcyAmJiB0aGlzLm9wdGlvbnMub25VcGRhdGVNYXNrQ2FudmFzKGNhbnZhcyk7XG4gICAgICAgICAgICBsZXQgaSwgaXNFbXB0eVBpeGVsID0gZ2VuZXJhdGVJc0VtcHR5UGl4ZWwoc2hhcGUuYmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgICAgIGNvbnN0IHNpbmdsZUdyaWRMb29wID0gKGd4LCBneSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB5ID0gdGhpcy5ncmlkU2l6ZTtcbiAgICAgICAgICAgICAgICBmb3IgKDt5LS07ICkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgeCA9IHRoaXMuZ3JpZFNpemU7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoO3gtLTsgKSBpZiAoaSA9IDQsICFpc0VtcHR5UGl4ZWwoaW1hZ2VEYXRhLCBneSAqIHRoaXMuZ3JpZFNpemUgKyB5LCBneCAqIHRoaXMuZ3JpZFNpemUgKyB4KSkgcmV0dXJuIHZvaWQgKHRoaXMuZ3JpZFtneF1bZ3ldID0gITApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmdyaWRbZ3hdW2d5XSA9ICExO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxldCBneCA9IHRoaXMubmd4O1xuICAgICAgICAgICAgZm9yICg7Z3gtLTsgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ncmlkW2d4XSA9IFtdO1xuICAgICAgICAgICAgICAgIGxldCBneSA9IHRoaXMubmd5O1xuICAgICAgICAgICAgICAgIGZvciAoO2d5LS07ICkgc2luZ2xlR3JpZExvb3AoZ3gsIGd5KSwgITEgIT09IHRoaXMuZ3JpZFtneF1bZ3ldICYmICh0aGlzLmdyaWRbZ3hdW2d5XSA9ICEwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGltYWdlRGF0YSA9IGlzRW1wdHlQaXhlbCA9IHZvaWQgMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBneCA9IHRoaXMubmd4O1xuICAgICAgICAgICAgZm9yICg7Z3gtLTsgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ncmlkW2d4XSA9IFtdO1xuICAgICAgICAgICAgICAgIGxldCBneSA9IHRoaXMubmd5O1xuICAgICAgICAgICAgICAgIGZvciAoO2d5LS07ICkgdGhpcy5ncmlkW2d4XVtneV0gPSAhMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYW5SZXBlYXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZUVtcHR5UmF0ZSgpID4gLjAwMTtcbiAgICB9XG4gICAgbGF5b3V0KGRhdGEsIGNvbmZpZykge1xuICAgICAgICB0aGlzLmluaXRQcm9ncmVzc2l2ZSgpLCB0aGlzLmRyYXduQ291bnQgPSAwLCB0aGlzLmlzVHJ5UmVwZWF0RmlsbCA9ICExLCB0aGlzLm9yaWdpbmFsRGF0YSA9IGRhdGEsIFxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhLCB0aGlzLnBvaW50c0F0UmFkaXVzID0gW10sIHRoaXMubmd4ID0gTWF0aC5mbG9vcihjb25maWcud2lkdGggLyB0aGlzLmdyaWRTaXplKSwgXG4gICAgICAgIHRoaXMubmd5ID0gTWF0aC5mbG9vcihjb25maWcuaGVpZ2h0IC8gdGhpcy5ncmlkU2l6ZSk7XG4gICAgICAgIGNvbnN0IHtjZW50ZXI6IGNlbnRlciwgbWF4UmFkaXVzOiBtYXhSYWRpdXN9ID0gZ2V0TWF4UmFkaXVzQW5kQ2VudGVyKHRoaXMub3B0aW9ucy5zaGFwZSwgWyBjb25maWcud2lkdGgsIGNvbmZpZy5oZWlnaHQgXSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNlbnRlciA9IGNvbmZpZy5vcmlnaW4gPyBbIGNvbmZpZy5vcmlnaW5bMF0gLyB0aGlzLmdyaWRTaXplLCBjb25maWcub3JpZ2luWzFdIC8gdGhpcy5ncmlkU2l6ZSBdIDogWyBjZW50ZXJbMF0gLyB0aGlzLmdyaWRTaXplLCBjZW50ZXJbMV0gLyB0aGlzLmdyaWRTaXplIF0sIFxuICAgICAgICB0aGlzLm1heFJhZGl1cyA9IE1hdGguZmxvb3IobWF4UmFkaXVzIC8gdGhpcy5ncmlkU2l6ZSksIHRoaXMuaW5pdEdyaWQoY29uZmlnKSwgdGhpcy5yZXN1bHQgPSBbXSwgXG4gICAgICAgIHRoaXMucHJvZ3Jlc3NpdmVSdW4oKTtcbiAgICB9XG59XG5cbkdyaWRMYXlvdXQuZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgZ3JpZFNpemU6IDgsXG4gICAgZWxsaXB0aWNpdHk6IDEsXG4gICAgbWF4U2luZ2xlV29yZFRyeUNvdW50OiAxXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3JpZC1sYXlvdXQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/grid-layout.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/index.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/index.js ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   registerWordCloudTransforms: () => (/* binding */ registerWordCloudTransforms),\n/* harmony export */   shapes: () => (/* reexport safe */ _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_2__.shapes)\n/* harmony export */ });\n/* harmony import */ var _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vgrammar-core */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-core@0.14.13/node_modules/@visactor/vgrammar-core/es/core/factory.js\");\n/* harmony import */ var _wordcloud__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wordcloud */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/wordcloud.js\");\n/* harmony import */ var _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vgrammar-util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-util@0.14.13/node_modules/@visactor/vgrammar-util/es/shapes.js\");\n\n\n\n\nconst registerWordCloudTransforms = () => {\n    _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_0__.Factory.registerTransform(\"wordcloud\", {\n        transform: _wordcloud__WEBPACK_IMPORTED_MODULE_1__.transform,\n        markPhase: \"beforeJoin\"\n    }, !0);\n};\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWtEOztBQUVWOztBQUVqQztBQUNQLElBQUksNERBQU87QUFDWCxtQkFBbUIsaURBQVM7QUFDNUI7QUFDQSxLQUFLO0FBQ0w7O0FBRWlEO0FBQ2pEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnlubGF0aWNzLWFpLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0B2aXNhY3Rvcit2Z3JhbW1hci13b3JkY2xvdWRAMC4xNC4xMy9ub2RlX21vZHVsZXMvQHZpc2FjdG9yL3ZncmFtbWFyLXdvcmRjbG91ZC9lcy9pbmRleC5qcz9kOTRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhY3RvcnkgfSBmcm9tIFwiQHZpc2FjdG9yL3ZncmFtbWFyLWNvcmVcIjtcblxuaW1wb3J0IHsgdHJhbnNmb3JtIH0gZnJvbSBcIi4vd29yZGNsb3VkXCI7XG5cbmV4cG9ydCBjb25zdCByZWdpc3RlcldvcmRDbG91ZFRyYW5zZm9ybXMgPSAoKSA9PiB7XG4gICAgRmFjdG9yeS5yZWdpc3RlclRyYW5zZm9ybShcIndvcmRjbG91ZFwiLCB7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNmb3JtLFxuICAgICAgICBtYXJrUGhhc2U6IFwiYmVmb3JlSm9pblwiXG4gICAgfSwgITApO1xufTtcblxuZXhwb3J0IHsgc2hhcGVzIH0gZnJvbSBcIkB2aXNhY3Rvci92Z3JhbW1hci11dGlsXCI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/spirals.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/spirals.js ***!
  \*************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   spirals: () => (/* binding */ spirals)\n/* harmony export */ });\nconst spirals = {\n    archimedean: archimedeanSpiral,\n    rectangular: rectangularSpiral\n};\n\nfunction archimedeanSpiral(size) {\n    const e = size[0] / size[1];\n    return t => [ e * (t *= .1) * Math.cos(t), t * Math.sin(t) ];\n}\n\nfunction rectangularSpiral(size) {\n    const dx = 4 * size[0] / size[1];\n    let x = 0, y = 0;\n    return t => {\n        const sign = t < 0 ? -1 : 1;\n        switch (Math.sqrt(1 + 4 * sign * t) - sign & 3) {\n          case 0:\n            x += dx;\n            break;\n\n          case 1:\n            y += 4;\n            break;\n\n          case 2:\n            x -= dx;\n            break;\n\n          default:\n            y -= 4;\n        }\n        return [ x, y ];\n    };\n}\n//# sourceMappingURL=spirals.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL3NwaXJhbHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnlubGF0aWNzLWFpLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0B2aXNhY3Rvcit2Z3JhbW1hci13b3JkY2xvdWRAMC4xNC4xMy9ub2RlX21vZHVsZXMvQHZpc2FjdG9yL3ZncmFtbWFyLXdvcmRjbG91ZC9lcy9zcGlyYWxzLmpzPzVlNmEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNwaXJhbHMgPSB7XG4gICAgYXJjaGltZWRlYW46IGFyY2hpbWVkZWFuU3BpcmFsLFxuICAgIHJlY3Rhbmd1bGFyOiByZWN0YW5ndWxhclNwaXJhbFxufTtcblxuZnVuY3Rpb24gYXJjaGltZWRlYW5TcGlyYWwoc2l6ZSkge1xuICAgIGNvbnN0IGUgPSBzaXplWzBdIC8gc2l6ZVsxXTtcbiAgICByZXR1cm4gdCA9PiBbIGUgKiAodCAqPSAuMSkgKiBNYXRoLmNvcyh0KSwgdCAqIE1hdGguc2luKHQpIF07XG59XG5cbmZ1bmN0aW9uIHJlY3Rhbmd1bGFyU3BpcmFsKHNpemUpIHtcbiAgICBjb25zdCBkeCA9IDQgKiBzaXplWzBdIC8gc2l6ZVsxXTtcbiAgICBsZXQgeCA9IDAsIHkgPSAwO1xuICAgIHJldHVybiB0ID0+IHtcbiAgICAgICAgY29uc3Qgc2lnbiA9IHQgPCAwID8gLTEgOiAxO1xuICAgICAgICBzd2l0Y2ggKE1hdGguc3FydCgxICsgNCAqIHNpZ24gKiB0KSAtIHNpZ24gJiAzKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgeCArPSBkeDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgeSArPSA0O1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB4IC09IGR4O1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgeSAtPSA0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbIHgsIHkgXTtcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3BpcmFscy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/spirals.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/util.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/util.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   functor: () => (/* binding */ functor),\n/* harmony export */   getMinFontSizeOfEnv: () => (/* binding */ getMinFontSizeOfEnv),\n/* harmony export */   isSupported: () => (/* binding */ isSupported),\n/* harmony export */   randomHslColor: () => (/* binding */ randomHslColor)\n/* harmony export */ });\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isFunction.js\");\n\n\nfunction isSupported() {\n    const canvas = document.createElement(\"canvas\");\n    if (!canvas || !canvas.getContext) return !1;\n    const ctx = canvas.getContext(\"2d\");\n    return !!ctx && (!!ctx.getImageData && (!!ctx.fillText && (!!Array.prototype.some && !!Array.prototype.push)));\n}\n\nfunction getMinFontSizeOfEnv() {\n    const ctx = document.createElement(\"canvas\").getContext(\"2d\");\n    let hanWidth, mWidth, size = 20;\n    for (;size; ) {\n        if (ctx.font = size.toString(10) + \"px sans-serif\", ctx.measureText(\"Ｗ\").width === hanWidth && ctx.measureText(\"m\").width === mWidth) return size + 1;\n        hanWidth = ctx.measureText(\"Ｗ\").width, mWidth = ctx.measureText(\"m\").width, size--;\n    }\n    return 12;\n}\n\nconst randomHslColor = (min, max) => \"hsl(\" + (360 * Math.random()).toFixed() + \",\" + (30 * Math.random() + 70).toFixed() + \"%,\" + (Math.random() * (max - min) + min).toFixed() + \"%)\";\n\nfunction functor(d) {\n    return (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(d) ? d : function() {\n        return d;\n    };\n}\n//# sourceMappingURL=util.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL3V0aWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBOEM7O0FBRXZDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQSxVQUFVLE1BQU07QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTzs7QUFFQTtBQUNQLFdBQVcsNERBQVU7QUFDckI7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9meW5sYXRpY3MtYWkvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL3V0aWwuanM/ODZhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSBcIkB2aXNhY3Rvci92dXRpbHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3VwcG9ydGVkKCkge1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgaWYgKCFjYW52YXMgfHwgIWNhbnZhcy5nZXRDb250ZXh0KSByZXR1cm4gITE7XG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICByZXR1cm4gISFjdHggJiYgKCEhY3R4LmdldEltYWdlRGF0YSAmJiAoISFjdHguZmlsbFRleHQgJiYgKCEhQXJyYXkucHJvdG90eXBlLnNvbWUgJiYgISFBcnJheS5wcm90b3R5cGUucHVzaCkpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1pbkZvbnRTaXplT2ZFbnYoKSB7XG4gICAgY29uc3QgY3R4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgbGV0IGhhbldpZHRoLCBtV2lkdGgsIHNpemUgPSAyMDtcbiAgICBmb3IgKDtzaXplOyApIHtcbiAgICAgICAgaWYgKGN0eC5mb250ID0gc2l6ZS50b1N0cmluZygxMCkgKyBcInB4IHNhbnMtc2VyaWZcIiwgY3R4Lm1lYXN1cmVUZXh0KFwi77y3XCIpLndpZHRoID09PSBoYW5XaWR0aCAmJiBjdHgubWVhc3VyZVRleHQoXCJtXCIpLndpZHRoID09PSBtV2lkdGgpIHJldHVybiBzaXplICsgMTtcbiAgICAgICAgaGFuV2lkdGggPSBjdHgubWVhc3VyZVRleHQoXCLvvLdcIikud2lkdGgsIG1XaWR0aCA9IGN0eC5tZWFzdXJlVGV4dChcIm1cIikud2lkdGgsIHNpemUtLTtcbiAgICB9XG4gICAgcmV0dXJuIDEyO1xufVxuXG5leHBvcnQgY29uc3QgcmFuZG9tSHNsQ29sb3IgPSAobWluLCBtYXgpID0+IFwiaHNsKFwiICsgKDM2MCAqIE1hdGgucmFuZG9tKCkpLnRvRml4ZWQoKSArIFwiLFwiICsgKDMwICogTWF0aC5yYW5kb20oKSArIDcwKS50b0ZpeGVkKCkgKyBcIiUsXCIgKyAoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluKS50b0ZpeGVkKCkgKyBcIiUpXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBmdW5jdG9yKGQpIHtcbiAgICByZXR1cm4gaXNGdW5jdGlvbihkKSA/IGQgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGQ7XG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/util.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/wordcloud.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/wordcloud.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   transform: () => (/* binding */ transform)\n/* harmony export */ });\n/* harmony import */ var _cloud_layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cloud-layout */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/cloud-layout.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/logger.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isNumber.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isString.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isFunction.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isArray.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/toNumber.js\");\n/* harmony import */ var _grid_layout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./grid-layout */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/grid-layout.js\");\n/* harmony import */ var _fast_layout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./fast-layout */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/fast-layout.js\");\n\n\n\n\n\n\n\n\nconst OUTPUT = {\n    x: \"x\",\n    y: \"y\",\n    z: \"z\",\n    fontFamily: \"fontFamily\",\n    fontSize: \"fontSize\",\n    fontStyle: \"fontStyle\",\n    fontWeight: \"fontWeight\",\n    angle: \"angle\"\n};\n\nconst transform = (options, upstreamData) => {\n    var _a, _b, _c, _d, _e, _f;\n    if (options.size && (options.size[0] <= 0 || options.size[1] <= 0)) {\n        return _visactor_vutils__WEBPACK_IMPORTED_MODULE_0__.Logger.getInstance().info(\"Wordcloud size dimensions must be greater than 0\"), \n        [];\n    }\n    const data = upstreamData, canvasSize = (null !== (_a = options.size) && void 0 !== _a ? _a : [ 500, 500 ]).slice();\n    canvasSize[0] = Math.floor(canvasSize[0]), canvasSize[1] = Math.floor(canvasSize[1]);\n    const fontFamily = options.fontFamily ? field(options.fontFamily) : \"sans-serif\", fontStyle = options.fontStyle ? field(options.fontStyle) : \"normal\", fontWeight = options.fontWeight ? field(options.fontWeight) : \"normal\", rotate = options.rotate ? field(options.rotate) : 0, text = field(options.text), spiral = null !== (_b = options.spiral) && void 0 !== _b ? _b : \"archimedean\", padding = options.padding ? field(options.padding) : 1, shape = null !== (_c = options.shape) && void 0 !== _c ? _c : \"square\", shrink = null !== (_d = options.shrink) && void 0 !== _d && _d, enlarge = null !== (_e = options.enlarge) && void 0 !== _e && _e, clip = null !== (_f = options.clip) && void 0 !== _f && _f, minFontSize = options.minFontSize, randomVisible = options.randomVisible, as = options.as ? Object.assign(Object.assign({}, OUTPUT), options.as) : OUTPUT, depth_3d = options.depth_3d, postProjection = options.postProjection;\n    let fontSize = options.fontSize ? field(options.fontSize) : 14;\n    const fontSizeRange = options.fontSizeRange;\n    if (fontSizeRange && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(fontSize)) {\n        const fsize = fontSize, fontSizeSqrtScale = generateScale(extent(fsize, data), fontSizeRange);\n        fontSize = datum => fontSizeSqrtScale(fsize(datum));\n    }\n    let Layout = _cloud_layout__WEBPACK_IMPORTED_MODULE_2__.CloudLayout;\n    \"fast\" === options.layoutType ? Layout = _fast_layout__WEBPACK_IMPORTED_MODULE_3__.FastLayout : \"grid\" === options.layoutType && (Layout = _grid_layout__WEBPACK_IMPORTED_MODULE_4__.GridLayout);\n    const layout = new Layout(Object.assign(Object.assign({}, options), {\n        text: text,\n        padding: padding,\n        spiral: spiral,\n        shape: shape,\n        rotate: rotate,\n        fontFamily: fontFamily,\n        fontStyle: fontStyle,\n        fontWeight: fontWeight,\n        fontSize: fontSize,\n        shrink: shrink,\n        clip: clip,\n        enlarge: enlarge,\n        minFontSize: minFontSize,\n        random: randomVisible,\n        outputCallback: words => {\n            const res = [];\n            let t, w;\n            for (let i = 0, len = words.length; i < len; i++) w = words[i], t = w.datum, t[as.x] = w.x, \n            t[as.y] = w.y, t[as.fontFamily] = w.fontFamily, t[as.fontSize] = w.fontSize, t[as.fontStyle] = w.fontStyle, \n            t[as.fontWeight] = w.fontWeight, t[as.angle] = w.angle, \"StereographicProjection\" === postProjection && stereographicProjection(canvasSize, w, t, as, depth_3d), \n            options.dataIndexKey && (t[options.dataIndexKey] = `${i}`), res.push(t);\n            return res;\n        }\n    }));\n    return layout.layout(data, {\n        width: canvasSize[0],\n        height: canvasSize[1]\n    }), options.progressiveStep > 0 || options.progressiveTime > 0 ? {\n        progressive: layout\n    } : layout.output();\n};\n\nconst field = option => (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(option) || (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(option) || (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(option) || (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(option) ? option : datum => datum[option.field], sqrt = x => x < 0 ? -Math.sqrt(-x) : Math.sqrt(x), generateScale = (domain, range, type) => {\n    if (domain[0] === domain[1]) return datum => range[0];\n    const s0 = sqrt(domain[0]), s1 = sqrt(domain[1]), min = Math.min(s0, s1), max = Math.max(s0, s1);\n    return datum => (sqrt(datum) - min) / (max - min) * (range[1] - range[0]) + range[0];\n}, extent = (field, data) => {\n    let min = 1 / 0, max = -1 / 0;\n    const n = data.length;\n    let v;\n    for (let i = 0; i < n; ++i) v = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_8__.toNumber)(field(data[i])), v < min && (min = v), \n    v > max && (max = v);\n    return 1 === data.length && min === max && (min -= 1e4), [ min, max ];\n};\n\nfunction stereographicProjection(canvasSize, w, t, as, depth_3d) {\n    const r = Math.max(canvasSize[0], canvasSize[1]) / 2, out = _StereographicProjection(canvasSize[0], canvasSize[1], r, {\n        x: r,\n        y: r,\n        z: null != depth_3d ? depth_3d : r\n    }, w);\n    t[as.x] = out.x, t[as.y] = out.y, t[as.z] = out.z;\n}\n\nfunction _StereographicProjection(w, h, r, center, word) {\n    const {x: x, y: y} = word, theta = x / w * Math.PI * 2;\n    let phi = Math.PI - y / h * Math.PI;\n    phi += (phi < Math.PI / 2 ? 1 : -1) * Math.pow(Math.min(phi - Math.PI / 2, 1), 2) / 5;\n    return {\n        x: r * Math.sin(phi) * Math.cos(theta) + center.x,\n        y: r * Math.cos(phi) + center.y,\n        z: r * Math.sin(phi) * Math.sin(theta) + center.z\n    };\n}\n//# sourceMappingURL=wordcloud.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL3dvcmRjbG91ZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTZDOztBQUVnRDs7QUFFbEQ7O0FBRUE7O0FBRTNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBLGVBQWUsb0RBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyekJBQTJ6QjtBQUMzekI7QUFDQTtBQUNBLDBCQUEwQiw0REFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsc0RBQVc7QUFDNUIsNkNBQTZDLG9EQUFVLDhDQUE4QyxvREFBVTtBQUMvRyw0REFBNEQ7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxTQUFTO0FBQ3pEO0FBQ0E7QUFDQSxrRUFBa0UsRUFBRTtBQUNwRTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLE1BQU07QUFDTjs7QUFFQSx3QkFBd0IsNERBQVEsWUFBWSw0REFBUSxZQUFZLDREQUFVLFlBQVksNERBQU87QUFDN0Y7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPLFNBQVMsMERBQVE7QUFDNUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBLFdBQVcsWUFBWTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9meW5sYXRpY3MtYWkvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL3dvcmRjbG91ZC5qcz9jOWM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsb3VkTGF5b3V0IH0gZnJvbSBcIi4vY2xvdWQtbGF5b3V0XCI7XG5cbmltcG9ydCB7IGlzRnVuY3Rpb24sIGlzTnVtYmVyLCBpc1N0cmluZywgdG9OdW1iZXIsIExvZ2dlciwgaXNBcnJheSB9IGZyb20gXCJAdmlzYWN0b3IvdnV0aWxzXCI7XG5cbmltcG9ydCB7IEdyaWRMYXlvdXQgfSBmcm9tIFwiLi9ncmlkLWxheW91dFwiO1xuXG5pbXBvcnQgeyBGYXN0TGF5b3V0IH0gZnJvbSBcIi4vZmFzdC1sYXlvdXRcIjtcblxuY29uc3QgT1VUUFVUID0ge1xuICAgIHg6IFwieFwiLFxuICAgIHk6IFwieVwiLFxuICAgIHo6IFwielwiLFxuICAgIGZvbnRGYW1pbHk6IFwiZm9udEZhbWlseVwiLFxuICAgIGZvbnRTaXplOiBcImZvbnRTaXplXCIsXG4gICAgZm9udFN0eWxlOiBcImZvbnRTdHlsZVwiLFxuICAgIGZvbnRXZWlnaHQ6IFwiZm9udFdlaWdodFwiLFxuICAgIGFuZ2xlOiBcImFuZ2xlXCJcbn07XG5cbmV4cG9ydCBjb25zdCB0cmFuc2Zvcm0gPSAob3B0aW9ucywgdXBzdHJlYW1EYXRhKSA9PiB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgaWYgKG9wdGlvbnMuc2l6ZSAmJiAob3B0aW9ucy5zaXplWzBdIDw9IDAgfHwgb3B0aW9ucy5zaXplWzFdIDw9IDApKSB7XG4gICAgICAgIHJldHVybiBMb2dnZXIuZ2V0SW5zdGFuY2UoKS5pbmZvKFwiV29yZGNsb3VkIHNpemUgZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwXCIpLCBcbiAgICAgICAgW107XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSB1cHN0cmVhbURhdGEsIGNhbnZhc1NpemUgPSAobnVsbCAhPT0gKF9hID0gb3B0aW9ucy5zaXplKSAmJiB2b2lkIDAgIT09IF9hID8gX2EgOiBbIDUwMCwgNTAwIF0pLnNsaWNlKCk7XG4gICAgY2FudmFzU2l6ZVswXSA9IE1hdGguZmxvb3IoY2FudmFzU2l6ZVswXSksIGNhbnZhc1NpemVbMV0gPSBNYXRoLmZsb29yKGNhbnZhc1NpemVbMV0pO1xuICAgIGNvbnN0IGZvbnRGYW1pbHkgPSBvcHRpb25zLmZvbnRGYW1pbHkgPyBmaWVsZChvcHRpb25zLmZvbnRGYW1pbHkpIDogXCJzYW5zLXNlcmlmXCIsIGZvbnRTdHlsZSA9IG9wdGlvbnMuZm9udFN0eWxlID8gZmllbGQob3B0aW9ucy5mb250U3R5bGUpIDogXCJub3JtYWxcIiwgZm9udFdlaWdodCA9IG9wdGlvbnMuZm9udFdlaWdodCA/IGZpZWxkKG9wdGlvbnMuZm9udFdlaWdodCkgOiBcIm5vcm1hbFwiLCByb3RhdGUgPSBvcHRpb25zLnJvdGF0ZSA/IGZpZWxkKG9wdGlvbnMucm90YXRlKSA6IDAsIHRleHQgPSBmaWVsZChvcHRpb25zLnRleHQpLCBzcGlyYWwgPSBudWxsICE9PSAoX2IgPSBvcHRpb25zLnNwaXJhbCkgJiYgdm9pZCAwICE9PSBfYiA/IF9iIDogXCJhcmNoaW1lZGVhblwiLCBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nID8gZmllbGQob3B0aW9ucy5wYWRkaW5nKSA6IDEsIHNoYXBlID0gbnVsbCAhPT0gKF9jID0gb3B0aW9ucy5zaGFwZSkgJiYgdm9pZCAwICE9PSBfYyA/IF9jIDogXCJzcXVhcmVcIiwgc2hyaW5rID0gbnVsbCAhPT0gKF9kID0gb3B0aW9ucy5zaHJpbmspICYmIHZvaWQgMCAhPT0gX2QgJiYgX2QsIGVubGFyZ2UgPSBudWxsICE9PSAoX2UgPSBvcHRpb25zLmVubGFyZ2UpICYmIHZvaWQgMCAhPT0gX2UgJiYgX2UsIGNsaXAgPSBudWxsICE9PSAoX2YgPSBvcHRpb25zLmNsaXApICYmIHZvaWQgMCAhPT0gX2YgJiYgX2YsIG1pbkZvbnRTaXplID0gb3B0aW9ucy5taW5Gb250U2l6ZSwgcmFuZG9tVmlzaWJsZSA9IG9wdGlvbnMucmFuZG9tVmlzaWJsZSwgYXMgPSBvcHRpb25zLmFzID8gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBPVVRQVVQpLCBvcHRpb25zLmFzKSA6IE9VVFBVVCwgZGVwdGhfM2QgPSBvcHRpb25zLmRlcHRoXzNkLCBwb3N0UHJvamVjdGlvbiA9IG9wdGlvbnMucG9zdFByb2plY3Rpb247XG4gICAgbGV0IGZvbnRTaXplID0gb3B0aW9ucy5mb250U2l6ZSA/IGZpZWxkKG9wdGlvbnMuZm9udFNpemUpIDogMTQ7XG4gICAgY29uc3QgZm9udFNpemVSYW5nZSA9IG9wdGlvbnMuZm9udFNpemVSYW5nZTtcbiAgICBpZiAoZm9udFNpemVSYW5nZSAmJiAhaXNOdW1iZXIoZm9udFNpemUpKSB7XG4gICAgICAgIGNvbnN0IGZzaXplID0gZm9udFNpemUsIGZvbnRTaXplU3FydFNjYWxlID0gZ2VuZXJhdGVTY2FsZShleHRlbnQoZnNpemUsIGRhdGEpLCBmb250U2l6ZVJhbmdlKTtcbiAgICAgICAgZm9udFNpemUgPSBkYXR1bSA9PiBmb250U2l6ZVNxcnRTY2FsZShmc2l6ZShkYXR1bSkpO1xuICAgIH1cbiAgICBsZXQgTGF5b3V0ID0gQ2xvdWRMYXlvdXQ7XG4gICAgXCJmYXN0XCIgPT09IG9wdGlvbnMubGF5b3V0VHlwZSA/IExheW91dCA9IEZhc3RMYXlvdXQgOiBcImdyaWRcIiA9PT0gb3B0aW9ucy5sYXlvdXRUeXBlICYmIChMYXlvdXQgPSBHcmlkTGF5b3V0KTtcbiAgICBjb25zdCBsYXlvdXQgPSBuZXcgTGF5b3V0KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHtcbiAgICAgICAgdGV4dDogdGV4dCxcbiAgICAgICAgcGFkZGluZzogcGFkZGluZyxcbiAgICAgICAgc3BpcmFsOiBzcGlyYWwsXG4gICAgICAgIHNoYXBlOiBzaGFwZSxcbiAgICAgICAgcm90YXRlOiByb3RhdGUsXG4gICAgICAgIGZvbnRGYW1pbHk6IGZvbnRGYW1pbHksXG4gICAgICAgIGZvbnRTdHlsZTogZm9udFN0eWxlLFxuICAgICAgICBmb250V2VpZ2h0OiBmb250V2VpZ2h0LFxuICAgICAgICBmb250U2l6ZTogZm9udFNpemUsXG4gICAgICAgIHNocmluazogc2hyaW5rLFxuICAgICAgICBjbGlwOiBjbGlwLFxuICAgICAgICBlbmxhcmdlOiBlbmxhcmdlLFxuICAgICAgICBtaW5Gb250U2l6ZTogbWluRm9udFNpemUsXG4gICAgICAgIHJhbmRvbTogcmFuZG9tVmlzaWJsZSxcbiAgICAgICAgb3V0cHV0Q2FsbGJhY2s6IHdvcmRzID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IFtdO1xuICAgICAgICAgICAgbGV0IHQsIHc7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gd29yZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHcgPSB3b3Jkc1tpXSwgdCA9IHcuZGF0dW0sIHRbYXMueF0gPSB3LngsIFxuICAgICAgICAgICAgdFthcy55XSA9IHcueSwgdFthcy5mb250RmFtaWx5XSA9IHcuZm9udEZhbWlseSwgdFthcy5mb250U2l6ZV0gPSB3LmZvbnRTaXplLCB0W2FzLmZvbnRTdHlsZV0gPSB3LmZvbnRTdHlsZSwgXG4gICAgICAgICAgICB0W2FzLmZvbnRXZWlnaHRdID0gdy5mb250V2VpZ2h0LCB0W2FzLmFuZ2xlXSA9IHcuYW5nbGUsIFwiU3RlcmVvZ3JhcGhpY1Byb2plY3Rpb25cIiA9PT0gcG9zdFByb2plY3Rpb24gJiYgc3RlcmVvZ3JhcGhpY1Byb2plY3Rpb24oY2FudmFzU2l6ZSwgdywgdCwgYXMsIGRlcHRoXzNkKSwgXG4gICAgICAgICAgICBvcHRpb25zLmRhdGFJbmRleEtleSAmJiAodFtvcHRpb25zLmRhdGFJbmRleEtleV0gPSBgJHtpfWApLCByZXMucHVzaCh0KTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICB9KSk7XG4gICAgcmV0dXJuIGxheW91dC5sYXlvdXQoZGF0YSwge1xuICAgICAgICB3aWR0aDogY2FudmFzU2l6ZVswXSxcbiAgICAgICAgaGVpZ2h0OiBjYW52YXNTaXplWzFdXG4gICAgfSksIG9wdGlvbnMucHJvZ3Jlc3NpdmVTdGVwID4gMCB8fCBvcHRpb25zLnByb2dyZXNzaXZlVGltZSA+IDAgPyB7XG4gICAgICAgIHByb2dyZXNzaXZlOiBsYXlvdXRcbiAgICB9IDogbGF5b3V0Lm91dHB1dCgpO1xufTtcblxuY29uc3QgZmllbGQgPSBvcHRpb24gPT4gaXNTdHJpbmcob3B0aW9uKSB8fCBpc051bWJlcihvcHRpb24pIHx8IGlzRnVuY3Rpb24ob3B0aW9uKSB8fCBpc0FycmF5KG9wdGlvbikgPyBvcHRpb24gOiBkYXR1bSA9PiBkYXR1bVtvcHRpb24uZmllbGRdLCBzcXJ0ID0geCA9PiB4IDwgMCA/IC1NYXRoLnNxcnQoLXgpIDogTWF0aC5zcXJ0KHgpLCBnZW5lcmF0ZVNjYWxlID0gKGRvbWFpbiwgcmFuZ2UsIHR5cGUpID0+IHtcbiAgICBpZiAoZG9tYWluWzBdID09PSBkb21haW5bMV0pIHJldHVybiBkYXR1bSA9PiByYW5nZVswXTtcbiAgICBjb25zdCBzMCA9IHNxcnQoZG9tYWluWzBdKSwgczEgPSBzcXJ0KGRvbWFpblsxXSksIG1pbiA9IE1hdGgubWluKHMwLCBzMSksIG1heCA9IE1hdGgubWF4KHMwLCBzMSk7XG4gICAgcmV0dXJuIGRhdHVtID0+IChzcXJ0KGRhdHVtKSAtIG1pbikgLyAobWF4IC0gbWluKSAqIChyYW5nZVsxXSAtIHJhbmdlWzBdKSArIHJhbmdlWzBdO1xufSwgZXh0ZW50ID0gKGZpZWxkLCBkYXRhKSA9PiB7XG4gICAgbGV0IG1pbiA9IDEgLyAwLCBtYXggPSAtMSAvIDA7XG4gICAgY29uc3QgbiA9IGRhdGEubGVuZ3RoO1xuICAgIGxldCB2O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgKytpKSB2ID0gdG9OdW1iZXIoZmllbGQoZGF0YVtpXSkpLCB2IDwgbWluICYmIChtaW4gPSB2KSwgXG4gICAgdiA+IG1heCAmJiAobWF4ID0gdik7XG4gICAgcmV0dXJuIDEgPT09IGRhdGEubGVuZ3RoICYmIG1pbiA9PT0gbWF4ICYmIChtaW4gLT0gMWU0KSwgWyBtaW4sIG1heCBdO1xufTtcblxuZnVuY3Rpb24gc3RlcmVvZ3JhcGhpY1Byb2plY3Rpb24oY2FudmFzU2l6ZSwgdywgdCwgYXMsIGRlcHRoXzNkKSB7XG4gICAgY29uc3QgciA9IE1hdGgubWF4KGNhbnZhc1NpemVbMF0sIGNhbnZhc1NpemVbMV0pIC8gMiwgb3V0ID0gX1N0ZXJlb2dyYXBoaWNQcm9qZWN0aW9uKGNhbnZhc1NpemVbMF0sIGNhbnZhc1NpemVbMV0sIHIsIHtcbiAgICAgICAgeDogcixcbiAgICAgICAgeTogcixcbiAgICAgICAgejogbnVsbCAhPSBkZXB0aF8zZCA/IGRlcHRoXzNkIDogclxuICAgIH0sIHcpO1xuICAgIHRbYXMueF0gPSBvdXQueCwgdFthcy55XSA9IG91dC55LCB0W2FzLnpdID0gb3V0Lno7XG59XG5cbmZ1bmN0aW9uIF9TdGVyZW9ncmFwaGljUHJvamVjdGlvbih3LCBoLCByLCBjZW50ZXIsIHdvcmQpIHtcbiAgICBjb25zdCB7eDogeCwgeTogeX0gPSB3b3JkLCB0aGV0YSA9IHggLyB3ICogTWF0aC5QSSAqIDI7XG4gICAgbGV0IHBoaSA9IE1hdGguUEkgLSB5IC8gaCAqIE1hdGguUEk7XG4gICAgcGhpICs9IChwaGkgPCBNYXRoLlBJIC8gMiA/IDEgOiAtMSkgKiBNYXRoLnBvdyhNYXRoLm1pbihwaGkgLSBNYXRoLlBJIC8gMiwgMSksIDIpIC8gNTtcbiAgICByZXR1cm4ge1xuICAgICAgICB4OiByICogTWF0aC5zaW4ocGhpKSAqIE1hdGguY29zKHRoZXRhKSArIGNlbnRlci54LFxuICAgICAgICB5OiByICogTWF0aC5jb3MocGhpKSArIGNlbnRlci55LFxuICAgICAgICB6OiByICogTWF0aC5zaW4ocGhpKSAqIE1hdGguc2luKHRoZXRhKSArIGNlbnRlci56XG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdvcmRjbG91ZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.14.13/node_modules/@visactor/vgrammar-wordcloud/es/wordcloud.js\n");

/***/ })

};
;