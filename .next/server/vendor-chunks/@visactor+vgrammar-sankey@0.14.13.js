"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@visactor+vgrammar-sankey@0.14.13";
exports.ids = ["vendor-chunks/@visactor+vgrammar-sankey@0.14.13"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/format.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/format.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatLinkPath: () => (/* binding */ formatLinkPath),\n/* harmony export */   formatLinkPolygon: () => (/* binding */ formatLinkPolygon),\n/* harmony export */   formatNodeRect: () => (/* binding */ formatNodeRect),\n/* harmony export */   getAlignEndTexts: () => (/* binding */ getAlignEndTexts),\n/* harmony export */   getAlignStartTexts: () => (/* binding */ getAlignStartTexts),\n/* harmony export */   getBoundsOfNodes: () => (/* binding */ getBoundsOfNodes)\n/* harmony export */ });\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isNil.js\");\n\n\nconst formatNodeRect = nodes => nodes.map((node => Object.assign({}, node, {\n    x: node.x0,\n    y: node.y0,\n    width: node.x1 - node.x0,\n    height: node.y1 - node.y0\n})));\n\nconst formatLinkPolygon = links => {\n    var _a;\n    return !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(null === (_a = null == links ? void 0 : links[0]) || void 0 === _a ? void 0 : _a.vertical) ? links.map((link => {\n        const half = link.thickness / 2, points = [ {\n            x: link.x0 - half,\n            y: link.y0\n        }, {\n            x: link.x1 - half,\n            y: link.y1\n        }, {\n            x: link.x1 + half,\n            y: link.y1\n        }, {\n            x: link.x0 + half,\n            y: link.y0\n        } ];\n        return Object.assign({}, link, {\n            points: points\n        });\n    })) : links.map((link => {\n        const half = link.thickness / 2, points = [ {\n            x: link.x0,\n            y: link.y0 - half\n        }, {\n            x: link.x1,\n            y: link.y1 - half\n        }, {\n            x: link.x1,\n            y: link.y1 + half\n        }, {\n            x: link.x0,\n            y: link.y0 + half\n        } ];\n        return Object.assign({}, link, {\n            points: points\n        });\n    }));\n};\n\nconst formatLinkPath = (links, round = !0) => {\n    var _a;\n    return !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(null === (_a = null == links ? void 0 : links[0]) || void 0 === _a ? void 0 : _a.vertical) ? links.map((link => {\n        const half = link.thickness / 2;\n        let y0 = link.y0, y1 = link.y1, midY = (y0 + y1) / 2, x00 = link.x0 - half, x01 = link.x0 + half, x10 = link.x1 - half, x11 = link.x1 + half;\n        return round && (y0 = Math.round(y0), y1 = Math.round(y1), midY = Math.round(midY), \n        x00 = Math.round(x00), x01 = Math.round(x01), x10 = Math.round(x10), x11 = Math.round(x11)), \n        Object.assign({}, link, {\n            path: `\\n            M${x00},${y0}\\n            C${x00},${midY},${x10},${midY},${x10},${y1}\\n            L${x11},${y1}\\n            C${x11},${midY},${x01},${midY},${x01},${y0}\\n            Z\\n            `\n        });\n    })) : links.map((link => {\n        const half = link.thickness / 2;\n        let x0 = link.x0, x1 = link.x1, midX = (x0 + x1) / 2, y00 = link.y0 - half, y01 = link.y0 + half, y10 = link.y1 - half, y11 = link.y1 + half;\n        return round && (x0 = Math.round(x0), x1 = Math.round(x1), midX = Math.round(midX), \n        y00 = Math.round(y00), y01 = Math.round(y01), y10 = Math.round(y10), y11 = Math.round(y11)), \n        Object.assign({}, link, {\n            path: `\\n          M${x0},${y00}\\n          C${midX},${y00},${midX},${y10},${x1},${y10}\\n          L${x1},${y11}\\n          C${midX},${y11},${midX},${y01},${x0},${y01}\\n          Z`\n        });\n    }));\n};\n\nconst getBoundsOfNodes = nodes => {\n    let x0 = 1 / 0, x1 = -1 / 0, y0 = 1 / 0, y1 = -1 / 0;\n    return nodes.forEach((node => {\n        x0 = Math.min(node.x0, x0), x1 = Math.max(node.x1, x1), y0 = Math.min(node.y0, y0), \n        y1 = Math.max(node.y1, y1);\n    })), {\n        x0: x0,\n        x1: x1,\n        y0: y0,\n        y1: y1,\n        width: x1 - x0,\n        height: y1 - y0\n    };\n};\n\nconst isNodeVertical = node => node.sourceLinks && node.sourceLinks.length ? !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(node.sourceLinks[0].x0) : !(!node.targetLinks || !node.targetLinks.length) && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(node.targetLinks[0].x0);\n\nconst getAlignStartTexts = (nodes, offset = 0) => isNodeVertical(nodes[0]) ? nodes.map((node => ({\n    y: node.y1,\n    x: (node.x0 + node.x1) / 2,\n    datum: node.datum,\n    key: node.key\n}))) : nodes.map((node => ({\n    x: node.x1,\n    y: (node.y0 + node.y1) / 2,\n    datum: node.datum,\n    key: node.key\n})));\n\nconst getAlignEndTexts = (nodes, offset = 0) => isNodeVertical(nodes[0]) ? nodes.map((node => ({\n    y: node.y1 - offset,\n    x: (node.x0 + node.x1) / 2,\n    datum: node.datum,\n    key: node.key\n}))) : nodes.map((node => ({\n    x: node.x0 - offset,\n    y: (node.y0 + node.y1) / 2,\n    datum: node.datum,\n    key: node.key\n})));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL2Zvcm1hdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXlDOztBQUVsQyxtRUFBbUU7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVNO0FBQ1A7QUFDQSxZQUFZLDREQUFLO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVU7QUFDViwrQkFBK0I7QUFDL0I7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVU7QUFDViwrQkFBK0I7QUFDL0I7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMOztBQUVPO0FBQ1A7QUFDQSxZQUFZLDREQUFLO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCLG9DQUFvQyxJQUFJLEdBQUcsR0FBRyxpQkFBaUIsSUFBSSxHQUFHLEtBQUssR0FBRyxJQUFJLEdBQUcsS0FBSyxHQUFHLElBQUksR0FBRyxHQUFHLGlCQUFpQixJQUFJLEdBQUcsR0FBRyxpQkFBaUIsSUFBSSxHQUFHLEtBQUssR0FBRyxJQUFJLEdBQUcsS0FBSyxHQUFHLElBQUksR0FBRyxHQUFHO0FBQzNMLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIsa0NBQWtDLEdBQUcsR0FBRyxJQUFJLGVBQWUsS0FBSyxHQUFHLElBQUksR0FBRyxLQUFLLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLGVBQWUsR0FBRyxHQUFHLElBQUksZUFBZSxLQUFLLEdBQUcsSUFBSSxHQUFHLEtBQUssR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUk7QUFDbkwsU0FBUztBQUNULEtBQUs7QUFDTDs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsOEVBQThFLDREQUFLLGdGQUFnRiw0REFBSzs7QUFFaks7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRU07QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9meW5sYXRpY3MtYWkvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL2Zvcm1hdC5qcz8yMDcyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzTmlsIH0gZnJvbSBcIkB2aXNhY3Rvci92dXRpbHNcIjtcblxuZXhwb3J0IGNvbnN0IGZvcm1hdE5vZGVSZWN0ID0gbm9kZXMgPT4gbm9kZXMubWFwKChub2RlID0+IE9iamVjdC5hc3NpZ24oe30sIG5vZGUsIHtcbiAgICB4OiBub2RlLngwLFxuICAgIHk6IG5vZGUueTAsXG4gICAgd2lkdGg6IG5vZGUueDEgLSBub2RlLngwLFxuICAgIGhlaWdodDogbm9kZS55MSAtIG5vZGUueTBcbn0pKSk7XG5cbmV4cG9ydCBjb25zdCBmb3JtYXRMaW5rUG9seWdvbiA9IGxpbmtzID0+IHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuICFpc05pbChudWxsID09PSAoX2EgPSBudWxsID09IGxpbmtzID8gdm9pZCAwIDogbGlua3NbMF0pIHx8IHZvaWQgMCA9PT0gX2EgPyB2b2lkIDAgOiBfYS52ZXJ0aWNhbCkgPyBsaW5rcy5tYXAoKGxpbmsgPT4ge1xuICAgICAgICBjb25zdCBoYWxmID0gbGluay50aGlja25lc3MgLyAyLCBwb2ludHMgPSBbIHtcbiAgICAgICAgICAgIHg6IGxpbmsueDAgLSBoYWxmLFxuICAgICAgICAgICAgeTogbGluay55MFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB4OiBsaW5rLngxIC0gaGFsZixcbiAgICAgICAgICAgIHk6IGxpbmsueTFcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgeDogbGluay54MSArIGhhbGYsXG4gICAgICAgICAgICB5OiBsaW5rLnkxXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHg6IGxpbmsueDAgKyBoYWxmLFxuICAgICAgICAgICAgeTogbGluay55MFxuICAgICAgICB9IF07XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBsaW5rLCB7XG4gICAgICAgICAgICBwb2ludHM6IHBvaW50c1xuICAgICAgICB9KTtcbiAgICB9KSkgOiBsaW5rcy5tYXAoKGxpbmsgPT4ge1xuICAgICAgICBjb25zdCBoYWxmID0gbGluay50aGlja25lc3MgLyAyLCBwb2ludHMgPSBbIHtcbiAgICAgICAgICAgIHg6IGxpbmsueDAsXG4gICAgICAgICAgICB5OiBsaW5rLnkwIC0gaGFsZlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB4OiBsaW5rLngxLFxuICAgICAgICAgICAgeTogbGluay55MSAtIGhhbGZcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgeDogbGluay54MSxcbiAgICAgICAgICAgIHk6IGxpbmsueTEgKyBoYWxmXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHg6IGxpbmsueDAsXG4gICAgICAgICAgICB5OiBsaW5rLnkwICsgaGFsZlxuICAgICAgICB9IF07XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBsaW5rLCB7XG4gICAgICAgICAgICBwb2ludHM6IHBvaW50c1xuICAgICAgICB9KTtcbiAgICB9KSk7XG59O1xuXG5leHBvcnQgY29uc3QgZm9ybWF0TGlua1BhdGggPSAobGlua3MsIHJvdW5kID0gITApID0+IHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuICFpc05pbChudWxsID09PSAoX2EgPSBudWxsID09IGxpbmtzID8gdm9pZCAwIDogbGlua3NbMF0pIHx8IHZvaWQgMCA9PT0gX2EgPyB2b2lkIDAgOiBfYS52ZXJ0aWNhbCkgPyBsaW5rcy5tYXAoKGxpbmsgPT4ge1xuICAgICAgICBjb25zdCBoYWxmID0gbGluay50aGlja25lc3MgLyAyO1xuICAgICAgICBsZXQgeTAgPSBsaW5rLnkwLCB5MSA9IGxpbmsueTEsIG1pZFkgPSAoeTAgKyB5MSkgLyAyLCB4MDAgPSBsaW5rLngwIC0gaGFsZiwgeDAxID0gbGluay54MCArIGhhbGYsIHgxMCA9IGxpbmsueDEgLSBoYWxmLCB4MTEgPSBsaW5rLngxICsgaGFsZjtcbiAgICAgICAgcmV0dXJuIHJvdW5kICYmICh5MCA9IE1hdGgucm91bmQoeTApLCB5MSA9IE1hdGgucm91bmQoeTEpLCBtaWRZID0gTWF0aC5yb3VuZChtaWRZKSwgXG4gICAgICAgIHgwMCA9IE1hdGgucm91bmQoeDAwKSwgeDAxID0gTWF0aC5yb3VuZCh4MDEpLCB4MTAgPSBNYXRoLnJvdW5kKHgxMCksIHgxMSA9IE1hdGgucm91bmQoeDExKSksIFxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCBsaW5rLCB7XG4gICAgICAgICAgICBwYXRoOiBgXFxuICAgICAgICAgICAgTSR7eDAwfSwke3kwfVxcbiAgICAgICAgICAgIEMke3gwMH0sJHttaWRZfSwke3gxMH0sJHttaWRZfSwke3gxMH0sJHt5MX1cXG4gICAgICAgICAgICBMJHt4MTF9LCR7eTF9XFxuICAgICAgICAgICAgQyR7eDExfSwke21pZFl9LCR7eDAxfSwke21pZFl9LCR7eDAxfSwke3kwfVxcbiAgICAgICAgICAgIFpcXG4gICAgICAgICAgICBgXG4gICAgICAgIH0pO1xuICAgIH0pKSA6IGxpbmtzLm1hcCgobGluayA9PiB7XG4gICAgICAgIGNvbnN0IGhhbGYgPSBsaW5rLnRoaWNrbmVzcyAvIDI7XG4gICAgICAgIGxldCB4MCA9IGxpbmsueDAsIHgxID0gbGluay54MSwgbWlkWCA9ICh4MCArIHgxKSAvIDIsIHkwMCA9IGxpbmsueTAgLSBoYWxmLCB5MDEgPSBsaW5rLnkwICsgaGFsZiwgeTEwID0gbGluay55MSAtIGhhbGYsIHkxMSA9IGxpbmsueTEgKyBoYWxmO1xuICAgICAgICByZXR1cm4gcm91bmQgJiYgKHgwID0gTWF0aC5yb3VuZCh4MCksIHgxID0gTWF0aC5yb3VuZCh4MSksIG1pZFggPSBNYXRoLnJvdW5kKG1pZFgpLCBcbiAgICAgICAgeTAwID0gTWF0aC5yb3VuZCh5MDApLCB5MDEgPSBNYXRoLnJvdW5kKHkwMSksIHkxMCA9IE1hdGgucm91bmQoeTEwKSwgeTExID0gTWF0aC5yb3VuZCh5MTEpKSwgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oe30sIGxpbmssIHtcbiAgICAgICAgICAgIHBhdGg6IGBcXG4gICAgICAgICAgTSR7eDB9LCR7eTAwfVxcbiAgICAgICAgICBDJHttaWRYfSwke3kwMH0sJHttaWRYfSwke3kxMH0sJHt4MX0sJHt5MTB9XFxuICAgICAgICAgIEwke3gxfSwke3kxMX1cXG4gICAgICAgICAgQyR7bWlkWH0sJHt5MTF9LCR7bWlkWH0sJHt5MDF9LCR7eDB9LCR7eTAxfVxcbiAgICAgICAgICBaYFxuICAgICAgICB9KTtcbiAgICB9KSk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Qm91bmRzT2ZOb2RlcyA9IG5vZGVzID0+IHtcbiAgICBsZXQgeDAgPSAxIC8gMCwgeDEgPSAtMSAvIDAsIHkwID0gMSAvIDAsIHkxID0gLTEgLyAwO1xuICAgIHJldHVybiBub2Rlcy5mb3JFYWNoKChub2RlID0+IHtcbiAgICAgICAgeDAgPSBNYXRoLm1pbihub2RlLngwLCB4MCksIHgxID0gTWF0aC5tYXgobm9kZS54MSwgeDEpLCB5MCA9IE1hdGgubWluKG5vZGUueTAsIHkwKSwgXG4gICAgICAgIHkxID0gTWF0aC5tYXgobm9kZS55MSwgeTEpO1xuICAgIH0pKSwge1xuICAgICAgICB4MDogeDAsXG4gICAgICAgIHgxOiB4MSxcbiAgICAgICAgeTA6IHkwLFxuICAgICAgICB5MTogeTEsXG4gICAgICAgIHdpZHRoOiB4MSAtIHgwLFxuICAgICAgICBoZWlnaHQ6IHkxIC0geTBcbiAgICB9O1xufTtcblxuY29uc3QgaXNOb2RlVmVydGljYWwgPSBub2RlID0+IG5vZGUuc291cmNlTGlua3MgJiYgbm9kZS5zb3VyY2VMaW5rcy5sZW5ndGggPyAhaXNOaWwobm9kZS5zb3VyY2VMaW5rc1swXS54MCkgOiAhKCFub2RlLnRhcmdldExpbmtzIHx8ICFub2RlLnRhcmdldExpbmtzLmxlbmd0aCkgJiYgIWlzTmlsKG5vZGUudGFyZ2V0TGlua3NbMF0ueDApO1xuXG5leHBvcnQgY29uc3QgZ2V0QWxpZ25TdGFydFRleHRzID0gKG5vZGVzLCBvZmZzZXQgPSAwKSA9PiBpc05vZGVWZXJ0aWNhbChub2Rlc1swXSkgPyBub2Rlcy5tYXAoKG5vZGUgPT4gKHtcbiAgICB5OiBub2RlLnkxLFxuICAgIHg6IChub2RlLngwICsgbm9kZS54MSkgLyAyLFxuICAgIGRhdHVtOiBub2RlLmRhdHVtLFxuICAgIGtleTogbm9kZS5rZXlcbn0pKSkgOiBub2Rlcy5tYXAoKG5vZGUgPT4gKHtcbiAgICB4OiBub2RlLngxLFxuICAgIHk6IChub2RlLnkwICsgbm9kZS55MSkgLyAyLFxuICAgIGRhdHVtOiBub2RlLmRhdHVtLFxuICAgIGtleTogbm9kZS5rZXlcbn0pKSk7XG5cbmV4cG9ydCBjb25zdCBnZXRBbGlnbkVuZFRleHRzID0gKG5vZGVzLCBvZmZzZXQgPSAwKSA9PiBpc05vZGVWZXJ0aWNhbChub2Rlc1swXSkgPyBub2Rlcy5tYXAoKG5vZGUgPT4gKHtcbiAgICB5OiBub2RlLnkxIC0gb2Zmc2V0LFxuICAgIHg6IChub2RlLngwICsgbm9kZS54MSkgLyAyLFxuICAgIGRhdHVtOiBub2RlLmRhdHVtLFxuICAgIGtleTogbm9kZS5rZXlcbn0pKSkgOiBub2Rlcy5tYXAoKG5vZGUgPT4gKHtcbiAgICB4OiBub2RlLngwIC0gb2Zmc2V0LFxuICAgIHk6IChub2RlLnkwICsgbm9kZS55MSkgLyAyLFxuICAgIGRhdHVtOiBub2RlLmRhdHVtLFxuICAgIGtleTogbm9kZS5rZXlcbn0pKSk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/format.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/hierarchy.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/hierarchy.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateNodeValue: () => (/* binding */ calculateNodeValue)\n/* harmony export */ });\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isNil.js\");\n\n\nconst calculateNodeValue = subTree => {\n    let sum = 0;\n    return subTree.forEach(((node, index) => {\n        var _a;\n        (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(node.value) && ((null === (_a = node.children) || void 0 === _a ? void 0 : _a.length) ? node.value = calculateNodeValue(node.children) : node.value = 0), \n        sum += Math.abs(node.value);\n    })), sum;\n};\n//# sourceMappingURL=hierarchy.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL2hpZXJhcmNoeS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5Qzs7QUFFbEM7QUFDUDtBQUNBO0FBQ0E7QUFDQSxRQUFRLDREQUFLO0FBQ2I7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Z5bmxhdGljcy1haS8uL25vZGVfbW9kdWxlcy8ucG5wbS9AdmlzYWN0b3IrdmdyYW1tYXItc2Fua2V5QDAuMTQuMTMvbm9kZV9tb2R1bGVzL0B2aXNhY3Rvci92Z3JhbW1hci1zYW5rZXkvZXMvaGllcmFyY2h5LmpzPzljMDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNOaWwgfSBmcm9tIFwiQHZpc2FjdG9yL3Z1dGlsc1wiO1xuXG5leHBvcnQgY29uc3QgY2FsY3VsYXRlTm9kZVZhbHVlID0gc3ViVHJlZSA9PiB7XG4gICAgbGV0IHN1bSA9IDA7XG4gICAgcmV0dXJuIHN1YlRyZWUuZm9yRWFjaCgoKG5vZGUsIGluZGV4KSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaXNOaWwobm9kZS52YWx1ZSkgJiYgKChudWxsID09PSAoX2EgPSBub2RlLmNoaWxkcmVuKSB8fCB2b2lkIDAgPT09IF9hID8gdm9pZCAwIDogX2EubGVuZ3RoKSA/IG5vZGUudmFsdWUgPSBjYWxjdWxhdGVOb2RlVmFsdWUobm9kZS5jaGlsZHJlbikgOiBub2RlLnZhbHVlID0gMCksIFxuICAgICAgICBzdW0gKz0gTWF0aC5hYnMobm9kZS52YWx1ZSk7XG4gICAgfSkpLCBzdW07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGllcmFyY2h5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/hierarchy.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/index.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/index.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SankeyLayout: () => (/* reexport safe */ _layout__WEBPACK_IMPORTED_MODULE_0__.SankeyLayout),\n/* harmony export */   formatLinkPath: () => (/* reexport safe */ _format__WEBPACK_IMPORTED_MODULE_1__.formatLinkPath),\n/* harmony export */   formatLinkPolygon: () => (/* reexport safe */ _format__WEBPACK_IMPORTED_MODULE_1__.formatLinkPolygon),\n/* harmony export */   formatNodeRect: () => (/* reexport safe */ _format__WEBPACK_IMPORTED_MODULE_1__.formatNodeRect),\n/* harmony export */   getAlignEndTexts: () => (/* reexport safe */ _format__WEBPACK_IMPORTED_MODULE_1__.getAlignEndTexts),\n/* harmony export */   getAlignStartTexts: () => (/* reexport safe */ _format__WEBPACK_IMPORTED_MODULE_1__.getAlignStartTexts),\n/* harmony export */   getBoundsOfNodes: () => (/* reexport safe */ _format__WEBPACK_IMPORTED_MODULE_1__.getBoundsOfNodes),\n/* harmony export */   registerSankeyHighlight: () => (/* binding */ registerSankeyHighlight),\n/* harmony export */   registerSankeyTransforms: () => (/* binding */ registerSankeyTransforms)\n/* harmony export */ });\n/* harmony import */ var _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vgrammar-core */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-core@0.14.13/node_modules/@visactor/vgrammar-core/es/core/factory.js\");\n/* harmony import */ var _transform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./transform */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/transform.js\");\n/* harmony import */ var _sankey_highlight__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./sankey-highlight */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/sankey-highlight.js\");\n/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layout */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/layout.js\");\n/* harmony import */ var _format__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./format */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/format.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst registerSankeyTransforms = () => {\n    _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_2__.Factory.registerTransform(\"sankey\", {\n        transform: _transform__WEBPACK_IMPORTED_MODULE_3__.transform,\n        markPhase: \"beforeJoin\"\n    }, !0);\n};\n\nconst registerSankeyHighlight = () => {\n    _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_2__.Factory.registerInteraction(_sankey_highlight__WEBPACK_IMPORTED_MODULE_4__.SankeyHighlight.type, _sankey_highlight__WEBPACK_IMPORTED_MODULE_4__.SankeyHighlight);\n};\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtEOztBQUVWOztBQUVhOztBQUViOztBQUVaOztBQUVIOztBQUVsQjtBQUNQLElBQUksNERBQU87QUFDWCxtQkFBbUIsaURBQVM7QUFDNUI7QUFDQSxLQUFLO0FBQ0w7O0FBRU87QUFDUCxJQUFJLDREQUFPLHFCQUFxQiw4REFBZSxPQUFPLDhEQUFlO0FBQ3JFO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9meW5sYXRpY3MtYWkvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL2luZGV4LmpzP2NlMGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCJAdmlzYWN0b3IvdmdyYW1tYXItY29yZVwiO1xuXG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tIFwiLi90cmFuc2Zvcm1cIjtcblxuaW1wb3J0IHsgU2Fua2V5SGlnaGxpZ2h0IH0gZnJvbSBcIi4vc2Fua2V5LWhpZ2hsaWdodFwiO1xuXG5leHBvcnQgeyBTYW5rZXlMYXlvdXQgfSBmcm9tIFwiLi9sYXlvdXRcIjtcblxuZXhwb3J0ICogZnJvbSBcIi4vaW50ZXJmYWNlXCI7XG5cbmV4cG9ydCAqIGZyb20gXCIuL2Zvcm1hdFwiO1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJTYW5rZXlUcmFuc2Zvcm1zID0gKCkgPT4ge1xuICAgIEZhY3RvcnkucmVnaXN0ZXJUcmFuc2Zvcm0oXCJzYW5rZXlcIiwge1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybSxcbiAgICAgICAgbWFya1BoYXNlOiBcImJlZm9yZUpvaW5cIlxuICAgIH0sICEwKTtcbn07XG5cbmV4cG9ydCBjb25zdCByZWdpc3RlclNhbmtleUhpZ2hsaWdodCA9ICgpID0+IHtcbiAgICBGYWN0b3J5LnJlZ2lzdGVySW50ZXJhY3Rpb24oU2Fua2V5SGlnaGxpZ2h0LnR5cGUsIFNhbmtleUhpZ2hsaWdodCk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/layout.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/layout.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SankeyLayout: () => (/* binding */ SankeyLayout)\n/* harmony export */ });\n/* harmony import */ var _hierarchy__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./hierarchy */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/hierarchy.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/array.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isNil.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/clamper.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isFunction.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/logger.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/toValidNumber.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/pickWithout.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isString.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/clamp.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/isNumber.js\");\n/* harmony import */ var _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @visactor/vgrammar-util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-util@0.14.13/node_modules/@visactor/vgrammar-util/es/field.js\");\n/* harmony import */ var _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @visactor/vgrammar-util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-util@0.14.13/node_modules/@visactor/vgrammar-util/es/direction.js\");\n\n\n\n\n\n\nfunction left(node) {\n    return node.depth;\n}\n\nfunction right(node, maxDepth) {\n    return maxDepth - 1 - node.endDepth;\n}\n\nfunction justify(node, maxDepth) {\n    return node.sourceLinks.length ? node.depth : maxDepth - 1;\n}\n\nfunction center(node, maxDepth, nodeMap) {\n    return node.targetLinks.length ? node.depth : node.sourceLinks.length ? (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__.minInArray)(node.sourceLinks.map((link => nodeMap[link.target].depth))) - 1 : 0;\n}\n\nconst ascendingNodeBreadth = (a, b) => (null == a ? void 0 : a.y0) - (null == b ? void 0 : b.y0), calcDivideValue = (node, isTarget) => {\n    if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(node.value)) return null;\n    const res = (isTarget ? node.targetLinks : node.sourceLinks).reduce(((res, sLink) => ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(sLink.value) ? res.count += 1 : res.sum += sLink.value, \n    res)), {\n        sum: 0,\n        count: 0\n    });\n    return res.count > 0 ? (node.value - res.sum) / res.count : null;\n}, alignFunctions = {\n    left: left,\n    right: right,\n    justify: justify,\n    center: center,\n    start: left,\n    end: right\n}, linkClampe = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_2__.clamper)(0, 1);\n\nclass SankeyLayout {\n    constructor(options) {\n        this._ascendingSourceBreadth = (a, b) => ascendingNodeBreadth(this._nodeMap[a.source], this._nodeMap[b.source]) || a.index - b.index, \n        this._ascendingTargetBreadth = (a, b) => ascendingNodeBreadth(this._nodeMap[a.target], this._nodeMap[b.target]) || a.index - b.index, \n        this.options = Object.assign({}, SankeyLayout.defaultOptions, options);\n        const keyOption = this.options.nodeKey, keyFunc = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(keyOption) ? keyOption : keyOption ? (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_4__.field)(keyOption) : null;\n        this._getNodeKey = keyFunc, this._logger = _visactor_vutils__WEBPACK_IMPORTED_MODULE_5__.Logger.getInstance(), this._alignFunc = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this.options.setNodeLayer) ? node => this.options.setNodeLayer(node.datum) : alignFunctions[this.options.nodeAlign];\n    }\n    layout(data, config) {\n        if (!data) return null;\n        const viewBox = \"width\" in config ? {\n            x0: 0,\n            x1: config.width,\n            y0: 0,\n            y1: config.height,\n            width: config.width,\n            height: config.height\n        } : {\n            x0: Math.min(config.x0, config.x1),\n            x1: Math.max(config.x0, config.x1),\n            y0: Math.min(config.y0, config.y1),\n            y1: Math.max(config.y0, config.y1),\n            width: Math.abs(config.x1 - config.x0),\n            height: Math.abs(config.y1 - config.y0)\n        };\n        (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_6__.isVertical)(this.options.direction) ? this._viewBox = {\n            x0: viewBox.y0,\n            x1: viewBox.y1,\n            y0: viewBox.x0,\n            y1: viewBox.x1,\n            width: viewBox.height,\n            height: viewBox.width\n        } : this._viewBox = viewBox;\n        const result = this.computeNodeLinks(data), nodes = result.nodes;\n        let links = result.links;\n        if (this._nodeMap = result.nodeMap, this.computeNodeValues(nodes), this.computeNodeDepths(nodes), \n        [ \"right\", \"end\", \"justify\" ].includes(this.options.nodeAlign) && this.computeNodeEndDepths(nodes), \n        this._maxDepth <= 1) return null;\n        const columns = this.computeNodeBreadths(nodes);\n        if (this.computeLinkBreadths(nodes), nodes.forEach((node => {\n            node.sourceLinks = node.sourceLinks.filter((link => !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.source) && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.target))), \n            node.targetLinks = node.targetLinks.filter((link => !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.source) && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.target)));\n        })), links = links.filter((link => !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.source) && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.target))), \n        (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_6__.isVertical)(this.options.direction)) if (this.options.inverse) {\n            const viewY1 = this._viewBox.x1;\n            nodes.forEach((node => {\n                const {y0: y0, y1: y1, x0: x0, x1: x1} = node;\n                node.y0 = viewY1 - x1, node.y1 = viewY1 - x0, node.x0 = y0, node.x1 = y1;\n            })), links.forEach((link => {\n                link.vertical = !0;\n                const {x0: x0, x1: x1, y0: y0, y1: y1} = link;\n                link.x0 = y0, link.x1 = y1, link.y0 = viewY1 - x0, link.y1 = viewY1 - x1;\n            }));\n        } else nodes.forEach((node => {\n            const {y0: y0, y1: y1} = node;\n            node.y0 = node.x0, node.y1 = node.x1, node.x0 = y0, node.x1 = y1;\n        })), links.forEach((link => {\n            link.vertical = !0;\n            const x0 = link.x0, x1 = link.x1;\n            link.x0 = link.y0, link.x1 = link.y1, link.y0 = x0, link.y1 = x1;\n        })); else this.options.inverse && (nodes.forEach((node => {\n            const {x0: x0, x1: x1} = node;\n            node.x0 = viewBox.x1 - x1, node.x1 = viewBox.x1 - x0;\n        })), links.forEach((link => {\n            link.x0 = viewBox.x1 - link.x0, link.x1 = viewBox.x1 - link.x1;\n        })));\n        return links.forEach((link => {\n            const sourceNode = this._nodeMap[link.source], targetNode = this._nodeMap[link.target];\n            link.sourceRect = {\n                x0: sourceNode.x0,\n                x1: sourceNode.x1,\n                y0: sourceNode.y0,\n                y1: sourceNode.y1\n            }, link.targetRect = {\n                x0: targetNode.x0,\n                x1: targetNode.x1,\n                y1: targetNode.y1,\n                y0: targetNode.y0\n            };\n        })), {\n            nodes: nodes,\n            links: links,\n            columns: columns\n        };\n    }\n    computeHierarchicNodeLinks(originalNodes) {\n        const nodes = [], links = [], nodeMap = {}, linkMap = {}, originalLinks = [];\n        (0,_hierarchy__WEBPACK_IMPORTED_MODULE_7__.calculateNodeValue)(originalNodes);\n        const doSubTree = (subTree, depth, parents) => {\n            subTree.forEach(((node, index) => {\n                const nodeKey = this._getNodeKey ? this._getNodeKey(node) : parents ? `${parents[parents.length - 1].key}-${index}` : `${depth}-${index}`, nodeValue = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(node.value) ? 0 : (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_8__.toValidNumber)(node.value);\n                if (nodeMap[nodeKey]) nodeMap[nodeKey].value = void 0; else {\n                    const nodeElement = {\n                        depth: depth,\n                        datum: node,\n                        index: index,\n                        key: nodeKey,\n                        value: nodeValue,\n                        sourceLinks: [],\n                        targetLinks: []\n                    };\n                    nodeMap[nodeKey] = nodeElement, nodes.push(nodeElement);\n                }\n                parents && originalLinks.push({\n                    source: parents[parents.length - 1].key,\n                    target: nodeKey,\n                    value: nodeValue,\n                    parents: parents\n                }), node.children && node.children.length && doSubTree(node.children, depth + 1, parents ? parents.concat([ nodeMap[nodeKey] ]) : [ nodeMap[nodeKey] ]);\n            }));\n        };\n        return doSubTree(originalNodes, 0, null), originalLinks.forEach(((link, index) => {\n            const key = `${link.source}-${link.target}`, linkDatum = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(link, [ \"parents\" ]);\n            if (linkDatum.parents = link.parents.map((node => (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(node, [ \"sourceLinks\", \"targetLinks\" ]))), \n            linkMap[key]) return linkMap[key].value += (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_8__.toValidNumber)(link.value), void linkMap[key].datum.push(linkDatum);\n            const linkElement = {\n                index: index,\n                key: `${link.source}-${link.target}`,\n                source: link.source,\n                target: link.target,\n                datum: [ linkDatum ],\n                value: link.value,\n                parents: link.parents.map((parent => parent.key))\n            };\n            links.push(linkElement), nodeMap[link.source].sourceLinks.push(linkElement), nodeMap[link.target].targetLinks.push(linkElement), \n            linkMap[key] = linkElement;\n        })), {\n            nodes: nodes,\n            links: links,\n            nodeMap: nodeMap\n        };\n    }\n    computeSourceTargetNodeLinks(data) {\n        const nodes = [], links = [], nodeMap = {};\n        data.nodes && data.nodes.forEach(((node, index) => {\n            const nodeElement = {\n                depth: -1,\n                datum: node,\n                index: index,\n                key: this._getNodeKey ? this._getNodeKey(node) : index,\n                value: node.value,\n                sourceLinks: [],\n                targetLinks: []\n            };\n            nodeMap[nodeElement.key] = nodeElement, nodes.push(nodeElement);\n        }));\n        const invalidLinks = [];\n        return data.links.forEach(((link, index) => {\n            const hasSource = !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.source), hasTarget = !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.target);\n            if (data.nodes && (!nodeMap[link.source] || !nodeMap[link.target])) return;\n            data.nodes || !hasSource || nodeMap[link.source] || (nodeMap[link.source] = {\n                value: void 0,\n                depth: -1,\n                index: nodes.length,\n                key: link.source,\n                datum: null,\n                sourceLinks: [],\n                targetLinks: []\n            }, nodes.push(nodeMap[link.source])), data.nodes || !hasTarget || nodeMap[link.target] || (nodeMap[link.target] = {\n                value: void 0,\n                depth: -1,\n                index: nodes.length,\n                key: link.target,\n                datum: null,\n                sourceLinks: [],\n                targetLinks: []\n            }, nodes.push(nodeMap[link.target]));\n            const linkElement = {\n                index: index,\n                source: link.source,\n                target: link.target,\n                datum: link,\n                value: link.value\n            };\n            this.options.divideNodeValueToLink && (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(link.value) && invalidLinks.push(linkElement), \n            links.push(linkElement), hasSource && nodeMap[link.source].sourceLinks.push(linkElement), \n            hasTarget && nodeMap[link.target].targetLinks.push(linkElement);\n        })), this.options.divideNodeValueToLink && invalidLinks.length && invalidLinks.forEach((link => {\n            const values = [ calcDivideValue(nodeMap[link.source]), calcDivideValue(nodeMap[link.target], !0) ].filter((entry => !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(entry)));\n            values.length && (link.value = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__.minInArray)(values));\n        })), {\n            nodeMap: nodeMap,\n            nodes: nodes,\n            links: links\n        };\n    }\n    computeNodeLinks(data) {\n        let res;\n        \"links\" in data ? res = this.computeSourceTargetNodeLinks(data) : (this._isHierarchic = !0, \n        res = this.computeHierarchicNodeLinks(data.nodes));\n        let nodes = res.nodes;\n        const links = res.links;\n        if (this.options.linkSortBy) for (let i = 0, len = nodes.length; i < len; i++) nodes[i].sourceLinks.sort(this.options.linkSortBy), \n        nodes[i].targetLinks.sort(this.options.linkSortBy);\n        return this.options.dropIsolatedNode && (nodes = nodes.filter((node => node.targetLinks.length || node.sourceLinks.length))), \n        {\n            nodes: nodes,\n            links: links,\n            nodeMap: res.nodeMap\n        };\n    }\n    computeNodeValues(nodes) {\n        for (let i = 0, len = nodes.length; i < len; i++) {\n            const node = nodes[i];\n            node.value = Math.max((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(node.value) ? 0 : (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_8__.toValidNumber)(node.value), node.sourceLinks.reduce(((sum, link) => {\n                var _a;\n                return sum + (null !== (_a = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_8__.toValidNumber)(link.value)) && void 0 !== _a ? _a : 0);\n            }), 0), node.targetLinks.reduce(((sum, link) => {\n                var _a;\n                return sum + (null !== (_a = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_8__.toValidNumber)(link.value)) && void 0 !== _a ? _a : 0);\n            }), 0));\n        }\n    }\n    computeNodeDepths(nodes) {\n        const n = nodes.length;\n        let next, nextMap, current = nodes, depth = 0;\n        for (;current.length && depth < n; ) {\n            next = [], nextMap = {};\n            for (let i = 0, curLen = current.length; i < curLen; i++) {\n                const node = current[i];\n                if (node && (node.depth = depth, node.sourceLinks && node.sourceLinks.length)) for (let j = 0, linkLen = node.sourceLinks.length; j < linkLen; j++) {\n                    const link = node.sourceLinks[j];\n                    nextMap[link.target] || (next.push(this._nodeMap[link.target]), nextMap[link.target] = !0);\n                }\n            }\n            current = next, depth += 1;\n        }\n        depth > n && this._logger.warn(\"Error: there is a circular link\"), this._maxDepth = depth;\n    }\n    computeNodeEndDepths(nodes) {\n        const n = nodes.length;\n        let next, nextMap, current = nodes, depth = 0;\n        for (;current.length && depth < n; ) {\n            next = [], nextMap = {};\n            for (let i = 0, curLen = current.length; i < curLen; i++) {\n                const node = current[i];\n                if (node) {\n                    node.endDepth = depth;\n                    for (let j = 0, linkLen = node.targetLinks.length; j < linkLen; j++) {\n                        const link = node.targetLinks[j];\n                        nextMap[link.source] || (next.push(this._nodeMap[link.source]), nextMap[link.source] = !0);\n                    }\n                }\n            }\n            current = next, depth += 1;\n        }\n        depth > n && this._logger.warn(\"Error: there is a circular link\");\n    }\n    computeNodeLayers(nodes) {\n        const nodeWidthOption = this.options.nodeWidth, linkWidthOption = this.options.linkWidth, minStepWidth = this.options.minStepWidth, width = this._viewBox.width;\n        let nodeWidth = null, linkWidth = null, isEvenWidth = !1;\n        if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(nodeWidthOption)) {\n            const ratio = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(parseFloat(nodeWidthOption.replace(\"%\", \"\")) / 100, 0, 1);\n            let stepWidth = width / (this._maxDepth - 1 + ratio);\n            minStepWidth > 0 && (stepWidth = Math.max(minStepWidth, stepWidth)), nodeWidth = stepWidth * ratio, \n            linkWidth = stepWidth * (1 - ratio), isEvenWidth = !0;\n        } else if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(nodeWidthOption)) {\n            if (nodeWidth = nodeWidthOption, (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(linkWidthOption)) linkWidth = linkWidthOption; else if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(linkWidthOption)) {\n                let stepWidth = (width - nodeWidthOption) / (this._maxDepth - 1);\n                minStepWidth > 0 && (stepWidth = Math.max(minStepWidth, stepWidth)), linkWidth = stepWidth - nodeWidthOption;\n            }\n            isEvenWidth = !0;\n        } else (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(nodeWidthOption) && (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(linkWidthOption) && (linkWidth = linkWidthOption);\n        const columns = [];\n        for (let i = 0, len = nodes.length; i < len; i++) {\n            const node = nodes[i];\n            node.layer = this._isHierarchic ? node.depth : (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(Math.floor(this._alignFunc(node, this._maxDepth, this._nodeMap)), 0, this._maxDepth - 1);\n            const layer = node.layer;\n            layer === this._maxDepth - 1 && (node.isLastLayer = !0), isEvenWidth && (node.x0 = this._viewBox.x0 + layer * (nodeWidth + linkWidth), \n            node.x1 = node.x0 + nodeWidth), columns[layer] ? columns[layer].push(node) : columns[layer] = [ node ];\n        }\n        if (this.options.nodeSortBy) for (let j = 0, colLen = columns.length; j < colLen; j++) columns[j].sort(this.options.nodeSortBy);\n        if (!isEvenWidth && (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(nodeWidthOption)) {\n            let curLayerX = this._viewBox.x0;\n            for (let i = 0; i < this._maxDepth; i++) {\n                const column = columns[i];\n                let maxNodeWidth = 0, maxLinkWidth = 0;\n                for (let j = 0, colLen = column && column.length; j < colLen; j++) {\n                    const node = column[j], curNodeWidth = nodeWidthOption(node);\n                    node.x0 = curLayerX, node.x1 = curLayerX + curNodeWidth, maxNodeWidth = Math.max(nodeWidth, curNodeWidth);\n                    const sourceLinks = node.sourceLinks;\n                    for (let k = 0, linkLen = sourceLinks.length; k < linkLen; k++) {\n                        const link = sourceLinks[k], curLinkWidth = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(linkWidthOption) ? linkWidthOption(link, this._viewBox) : linkWidth;\n                        maxLinkWidth = Math.max(maxLinkWidth, curLinkWidth);\n                    }\n                }\n                curLayerX += maxNodeWidth + maxLinkWidth;\n            }\n        }\n        return columns;\n    }\n    initializeNodeBreadths(columns) {\n        var _a, _b;\n        const minLinkHeight = null !== (_a = this.options.minLinkHeight) && void 0 !== _a ? _a : 0;\n        let minNodeHeight = null !== (_b = this.options.minNodeHeight) && void 0 !== _b ? _b : 0;\n        ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(minNodeHeight) || minNodeHeight < minLinkHeight) && (minNodeHeight = minLinkHeight);\n        let ky = 0, getGapY = null, forceNodeHeight = null;\n        if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this.options.nodeGap)) getGapY = this.options.nodeGap, ky = columns.reduce(((val, column) => {\n            const sumValue = column.reduce(((sum, node) => sum + node.value), 0), sumGapY = column.reduce(((sum, node) => sum + this.options.nodeGap(node)), 0);\n            return Math.min(val, (this._viewBox.height - sumGapY) / sumValue);\n        }), 1 / 0); else {\n            const maxRowCount = columns.reduce(((cnt, column) => Math.max(cnt, column.length)), 0), maxStepHeight = this._viewBox.height / maxRowCount, gapY = Math.min(this.options.nodeGap, maxStepHeight);\n            if (getGapY = () => gapY, this._gapY = gapY, (minNodeHeight + gapY) * maxRowCount > this._viewBox.height && (minNodeHeight = maxStepHeight - gapY), \n            this.options.equalNodeHeight) forceNodeHeight = this._viewBox.height / maxRowCount - gapY; else {\n                const calGapY = minNodeHeight > 0 ? Math.max(gapY, minNodeHeight) : gapY;\n                ky = columns.reduce(((val, column) => {\n                    const sumValue = column.reduce(((sum, node) => sum + node.value), 0);\n                    return Math.min(val, (this._viewBox.height - ((column.length - 1) * calGapY + minNodeHeight)) / sumValue);\n                }), 1 / 0);\n            }\n        }\n        const isStartGap = \"start\" === this.options.gapPosition, isMiddleGap = !isStartGap && \"end\" !== this.options.gapPosition, getNodeHeight = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(this.options.nodeHeight) ? node => this.options.nodeHeight : (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this.options.nodeHeight) ? this.options.nodeHeight : forceNodeHeight > 0 ? node => forceNodeHeight : node => Math.max(node.value * ky, 0), getLinkHeight = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(this.options.linkHeight) ? () => this.options.linkHeight : (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this.options.linkHeight) ? this.options.linkHeight : (link, sourceNode, sourceNodeHeight) => Math.max(sourceNode.value ? sourceNodeHeight * linkClampe(link.value / sourceNode.value) : 0, minLinkHeight, 0);\n        for (let i = 0, columnCount = columns.length; i < columnCount; i++) {\n            const nodes = columns[i];\n            if (!nodes || !nodes.length) continue;\n            let y = this._viewBox.y0, gapY = 0, nodeHeight = 0, calculatedNodeHeight = 0;\n            for (let j = 0, len = nodes.length; j < len; j++) {\n                const node = nodes[j];\n                gapY = getGapY(node), isStartGap && (y += gapY), calculatedNodeHeight = getNodeHeight(node), \n                nodeHeight = Math.max(calculatedNodeHeight, minNodeHeight), node.y0 = y, node.y1 = y + nodeHeight, \n                y = isStartGap ? node.y1 : node.y1 + gapY;\n                for (let k = 0, linkLen = node.sourceLinks.length; k < linkLen; k++) {\n                    const link = node.sourceLinks[k];\n                    link.thickness = getLinkHeight(link, node, calculatedNodeHeight);\n                }\n            }\n            let deltaY = this._viewBox.y1 - y + (isMiddleGap ? gapY : 0);\n            if (deltaY > 0) if (\"start\" === this.options.crossNodeAlign) ; else if (\"end\" === this.options.crossNodeAlign) for (let j = 0, len = nodes.length; j < len; ++j) {\n                const node = nodes[j];\n                node.y0 += deltaY, node.y1 += deltaY;\n            } else {\n                deltaY /= nodes.length + 1;\n                for (let j = 0, len = nodes.length; j < len; ++j) {\n                    const node = nodes[j];\n                    node.y0 += deltaY * (j + 1), node.y1 += deltaY * (j + 1);\n                }\n            } else if (deltaY < 0 && nodes.length > 1 && (deltaY /= nodes.length - 1, gapY + deltaY >= 0)) {\n                gapY += deltaY, this._gapY = Math.min(gapY);\n                for (let j = 1, len = nodes.length; j < len; ++j) {\n                    const node = nodes[j];\n                    node.y0 += deltaY * j, node.y1 += deltaY * j;\n                }\n            }\n            this.reorderLinks(nodes);\n        }\n    }\n    computeNodeBreadths(nodes) {\n        const columns = this.computeNodeLayers(nodes);\n        this.initializeNodeBreadths(columns);\n        const iterations = this.options.iterations;\n        if (!this._isHierarchic && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this.options.setNodeLayer) && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this.options.nodeGap)) for (let i = 0; i < iterations; ++i) {\n            const alpha = Math.pow(.99, i), beta = Math.max(1 - alpha, (i + 1) / iterations);\n            this.relaxRightToLeft(columns, alpha, beta), this.relaxLeftToRight(columns, alpha, beta);\n        }\n        return columns;\n    }\n    relaxLeftToRight(columns, alpha, beta) {\n        for (let i = 1, n = columns.length; i < n; ++i) {\n            const column = columns[i];\n            for (let j = 0, colLen = column.length; j < colLen; j++) {\n                const target = column[j];\n                let y = 0, w = 0;\n                for (let k = 0, linkLen = target.targetLinks.length; k < linkLen; k++) {\n                    const link = target.targetLinks[k], v = link.value * (target.layer - this._nodeMap[link.source].layer);\n                    y += this.targetTop(this._nodeMap[link.source], target) * v, w += v;\n                }\n                if (!(w > 0)) continue;\n                const dy = (y / w - target.y0) * alpha;\n                target.y0 += dy, target.y1 += dy, this.reorderNodeLinks(target);\n            }\n            (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.options.nodeSortBy) && column.sort(ascendingNodeBreadth), this.resolveCollisions(column, beta);\n        }\n    }\n    relaxRightToLeft(columns, alpha, beta) {\n        for (let i = columns.length - 2; i >= 0; --i) {\n            const column = columns[i];\n            for (let j = 0, colLen = column.length; j < colLen; j++) {\n                const source = column[j];\n                let y = 0, w = 0;\n                for (let k = 0, linkLen = source.sourceLinks.length; k < linkLen; k++) {\n                    const link = source.sourceLinks[k], v = link.value * (this._nodeMap[link.target].layer - source.layer);\n                    y += this.sourceTop(source, this._nodeMap[link.target]) * v, w += v;\n                }\n                if (!(w > 0)) continue;\n                const dy = (y / w - source.y0) * alpha;\n                source.y0 += dy, source.y1 += dy, this.reorderNodeLinks(source);\n            }\n            void 0 === this.options.nodeSortBy && column.sort(ascendingNodeBreadth), this.resolveCollisions(column, beta);\n        }\n    }\n    resolveCollisions(nodes, alpha) {\n        const i = nodes.length >> 1, subject = nodes[i];\n        this.resolveCollisionsBottomToTop(nodes, subject.y0 - this._gapY, i - 1, alpha), \n        this.resolveCollisionsTopToBottom(nodes, subject.y1 + this._gapY, i + 1, alpha), \n        this.resolveCollisionsBottomToTop(nodes, this._viewBox.y1, nodes.length - 1, alpha), \n        this.resolveCollisionsTopToBottom(nodes, this._viewBox.y0, 0, alpha);\n    }\n    resolveCollisionsTopToBottom(nodes, y, i, alpha) {\n        for (;i < nodes.length; ++i) {\n            const node = nodes[i], dy = (y - node.y0) * alpha;\n            dy > 1e-6 && (node.y0 += dy, node.y1 += dy), y = node.y1 + this._gapY;\n        }\n    }\n    resolveCollisionsBottomToTop(nodes, y, i, alpha) {\n        for (;i >= 0; --i) {\n            const node = nodes[i], dy = (node.y1 - y) * alpha;\n            dy > 1e-6 && (node.y0 -= dy, node.y1 -= dy), y = node.y0 - this._gapY;\n        }\n    }\n    targetTop(source, target) {\n        let i, len, link, y = source.y0 - (source.sourceLinks.length - 1) * this._gapY / 2;\n        for (i = 0, len = source.sourceLinks.length; i < len && (link = source.sourceLinks[i], \n        link.target !== target.key); i++) y += link.thickness + this._gapY;\n        for (i = 0, len = target.targetLinks.length; i < len && (link = target.targetLinks[i], \n        link.source !== source.key); i++) y -= link.thickness;\n        return y;\n    }\n    sourceTop(source, target) {\n        let i, len, link, y = target.y0 - (target.targetLinks.length - 1) * this._gapY / 2;\n        for (i = 0, len = target.targetLinks.length; i < len && (link = target.targetLinks[i], \n        link.source !== source.key); i++) y += link.thickness + this._gapY;\n        for (i = 0, len = source.sourceLinks.length; i < len && (link = source.sourceLinks[i], \n        link.target !== target.key); i++) y -= link.thickness;\n        return y;\n    }\n    computeLinkBreadthsNoOverlap(nodes) {\n        for (let i = 0, len = nodes.length; i < len; i++) {\n            const node = nodes[i];\n            let y0 = node.y0, reachBottom = !1;\n            for (let j = 0, linkLen = node.sourceLinks.length; j < linkLen; j++) {\n                const link = node.sourceLinks[j];\n                reachBottom || (link.y0 = y0 + link.thickness / 2), link.x0 = node.x1, y0 + link.thickness > node.y1 || reachBottom ? (link.y0 = node.y1 - link.thickness / 2, \n                reachBottom = !0) : y0 += link.thickness;\n            }\n            let y1 = node.y0;\n            reachBottom = !1;\n            for (let j = 0, linkLen = node.targetLinks.length; j < linkLen; j++) {\n                const link = node.targetLinks[j];\n                reachBottom || (link.y1 = y1 + link.thickness / 2), link.x1 = node.x0, y1 + link.thickness > node.y1 || reachBottom ? (link.y1 = node.y1 - link.thickness / 2, \n                reachBottom = !0) : y1 += link.thickness;\n            }\n        }\n    }\n    computeLinkBreadthsOverlap(nodes) {\n        const linkOverlap = this.options.linkOverlap;\n        for (let i = 0, len = nodes.length; i < len; i++) {\n            const node = nodes[i], pos = \"start\" === linkOverlap ? node.y0 : \"end\" === linkOverlap ? node.y1 : (node.y0 + node.y1) / 2, sign = \"start\" === linkOverlap ? .5 : \"end\" === linkOverlap ? -.5 : 0;\n            for (let j = 0, linkLen = node.sourceLinks.length; j < linkLen; j++) {\n                const link = node.sourceLinks[j];\n                link.y0 = pos + sign * link.thickness, link.x0 = node.x1;\n            }\n            for (let j = 0, linkLen = node.targetLinks.length; j < linkLen; j++) {\n                const link = node.targetLinks[j];\n                link.y1 = pos + sign * link.thickness, link.x1 = node.x0;\n            }\n        }\n    }\n    computeLinkBreadths(nodes) {\n        this.options.linkOverlap ? this.computeLinkBreadthsOverlap(nodes) : this.computeLinkBreadthsNoOverlap(nodes);\n    }\n    reorderNodeLinks(node) {\n        if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.options.linkSortBy)) {\n            const targetLinks = node.targetLinks, sourceLinks = node.sourceLinks;\n            for (let j = 0, linkLen = targetLinks.length; j < linkLen; j++) {\n                const link = targetLinks[j];\n                this._nodeMap[link.source].sourceLinks.sort(this._ascendingTargetBreadth);\n            }\n            for (let j = 0, linkLen = sourceLinks.length; j < linkLen; j++) {\n                const link = sourceLinks[j];\n                this._nodeMap[link.target].targetLinks.sort(this._ascendingSourceBreadth);\n            }\n        }\n    }\n    reorderLinks(nodes) {\n        if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.options.linkSortBy)) for (let i = 0, len = nodes.length; i < len; i++) {\n            const node = nodes[i];\n            node.sourceLinks.sort(this._ascendingTargetBreadth), node.targetLinks.sort(this._ascendingSourceBreadth);\n        }\n    }\n}\n\nSankeyLayout.defaultOptions = {\n    iterations: 6,\n    nodeAlign: \"justify\",\n    direction: \"horizontal\",\n    nodeWidth: 24,\n    nodeGap: 8,\n    crossNodeAlign: \"middle\",\n    dropIsolatedNode: !0\n};\n//# sourceMappingURL=layout.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL2xheW91dC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFpRDs7QUFFd0Y7O0FBRTdFOztBQUU1RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDRFQUE0RSw0REFBVTtBQUN0Rjs7QUFFQTtBQUNBLFFBQVEsNERBQUs7QUFDYiwwRkFBMEYsNERBQUs7QUFDL0Y7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZUFBZSx5REFBTzs7QUFFaEI7QUFDUDtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMsMERBQTBELDREQUFVLHNDQUFzQyw4REFBSztBQUMvRyxtREFBbUQsb0RBQU0sa0NBQWtDLDREQUFVO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtRUFBVTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsNERBQUssa0JBQWtCLDREQUFLO0FBQzdGLGlFQUFpRSw0REFBSyxrQkFBa0IsNERBQUs7QUFDN0YsU0FBUyxtQ0FBbUMsNERBQUssa0JBQWtCLDREQUFLO0FBQ3hFLFFBQVEsbUVBQVU7QUFDbEI7QUFDQTtBQUNBLHVCQUF1QixnQ0FBZ0M7QUFDdkQ7QUFDQSxhQUFhO0FBQ2I7QUFDQSx1QkFBdUIsZ0NBQWdDO0FBQ3ZEO0FBQ0EsYUFBYTtBQUNiLFVBQVU7QUFDVixtQkFBbUIsZ0JBQWdCO0FBQ25DO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVMsSUFBSTtBQUNiLG1CQUFtQixnQkFBZ0I7QUFDbkM7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsY0FBYztBQUNoRSxRQUFRLDhEQUFrQjtBQUMxQjtBQUNBO0FBQ0EseUZBQXlGLGdDQUFnQyxHQUFHLE1BQU0sT0FBTyxNQUFNLEdBQUcsTUFBTSxlQUFlLDREQUFLLG1CQUFtQiwrREFBYTtBQUM1TSx1RUFBdUU7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQSwyQkFBMkIsWUFBWSxHQUFHLFlBQVksZUFBZSw0REFBVztBQUNoRiw4REFBOEQsNERBQVc7QUFDekUsdURBQXVELCtEQUFhO0FBQ3BFO0FBQ0E7QUFDQSx3QkFBd0IsWUFBWSxHQUFHLFlBQVk7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLCtCQUErQiw0REFBSyw0QkFBNEIsNERBQUs7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDREQUFLO0FBQ3ZEO0FBQ0E7QUFDQSxTQUFTO0FBQ1Qsa0lBQWtJLDREQUFLO0FBQ3ZJLDJDQUEyQyw0REFBVTtBQUNyRCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxTQUFTO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxTQUFTO0FBQ3JEO0FBQ0Esa0NBQWtDLDREQUFLLG1CQUFtQiwrREFBYTtBQUN2RTtBQUNBLDZDQUE2QywrREFBYTtBQUMxRCxhQUFhO0FBQ2I7QUFDQSw2Q0FBNkMsK0RBQWE7QUFDMUQsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZCQUE2QjtBQUMzQztBQUNBLHFEQUFxRCxZQUFZO0FBQ2pFO0FBQ0Esa0pBQWtKLGFBQWE7QUFDL0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkJBQTZCO0FBQzNDO0FBQ0EscURBQXFELFlBQVk7QUFDakU7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLGFBQWE7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw2REFBUTtBQUNwQiwwQkFBMEIsNkRBQUs7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsVUFBVSxTQUFTLDZEQUFRO0FBQzNCLDZDQUE2Qyw2REFBUSxnREFBZ0QsU0FBUyw0REFBSztBQUNuSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsS0FBSyw0REFBVSxxQkFBcUIsNkRBQVE7QUFDdEQ7QUFDQSw0Q0FBNEMsU0FBUztBQUNyRDtBQUNBLDJEQUEyRCw2REFBSztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSxZQUFZO0FBQzFGLDRCQUE0Qiw0REFBVTtBQUN0QztBQUNBLDRCQUE0QixvQkFBb0I7QUFDaEQ7QUFDQTtBQUNBLGtFQUFrRSxZQUFZO0FBQzlFO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxhQUFhO0FBQy9FLG9FQUFvRSw0REFBVTtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDREQUFLO0FBQ2Q7QUFDQSxZQUFZLDREQUFVO0FBQ3RCO0FBQ0E7QUFDQSxTQUFTLFdBQVc7QUFDcEI7QUFDQTtBQUNBLHVHQUF1RztBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0Esa0pBQWtKLDZEQUFRLDhEQUE4RCw0REFBVSw0SkFBNEosNkRBQVEsNERBQTRELDREQUFVO0FBQzVjLHNEQUFzRCxpQkFBaUI7QUFDdkU7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELFNBQVM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsYUFBYTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLG9GQUFvRixTQUFTO0FBQ3hLO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxvREFBb0QsU0FBUztBQUM3RDtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxvREFBb0QsU0FBUztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDREQUFVLGdDQUFnQyw0REFBVSx3Q0FBd0MsZ0JBQWdCO0FBQ2hKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxPQUFPO0FBQ25EO0FBQ0Esb0RBQW9ELFlBQVk7QUFDaEU7QUFDQTtBQUNBLHFFQUFxRSxhQUFhO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw0REFBSztBQUNqQjtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsUUFBUTtBQUNqRDtBQUNBLG9EQUFvRCxZQUFZO0FBQ2hFO0FBQ0E7QUFDQSxxRUFBcUUsYUFBYTtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGtCQUFrQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxRQUFRO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRCxxQ0FBcUM7QUFDckMscURBQXFEO0FBQ3JELHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRCxxQ0FBcUM7QUFDckMscURBQXFEO0FBQ3JELHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsU0FBUztBQUNyRDtBQUNBO0FBQ0EsK0RBQStELGFBQWE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGFBQWE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxTQUFTO0FBQ3JEO0FBQ0EsK0RBQStELGFBQWE7QUFDNUU7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGFBQWE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw0REFBSztBQUNqQjtBQUNBLDBEQUEwRCxhQUFhO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxhQUFhO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNERBQUssK0RBQStELFNBQVM7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Z5bmxhdGljcy1haS8uL25vZGVfbW9kdWxlcy8ucG5wbS9AdmlzYWN0b3IrdmdyYW1tYXItc2Fua2V5QDAuMTQuMTMvbm9kZV9tb2R1bGVzL0B2aXNhY3Rvci92Z3JhbW1hci1zYW5rZXkvZXMvbGF5b3V0LmpzP2NmMWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2FsY3VsYXRlTm9kZVZhbHVlIH0gZnJvbSBcIi4vaGllcmFyY2h5XCI7XG5cbmltcG9ydCB7IGlzTmlsLCBjbGFtcCwgbWluSW5BcnJheSwgaXNGdW5jdGlvbiwgaXNOdW1iZXIsIGlzU3RyaW5nLCBMb2dnZXIsIGNsYW1wZXIsIHRvVmFsaWROdW1iZXIsIHBpY2tXaXRob3V0IH0gZnJvbSBcIkB2aXNhY3Rvci92dXRpbHNcIjtcblxuaW1wb3J0IHsgZmllbGQsIGlzVmVydGljYWwgfSBmcm9tIFwiQHZpc2FjdG9yL3ZncmFtbWFyLXV0aWxcIjtcblxuZnVuY3Rpb24gbGVmdChub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUuZGVwdGg7XG59XG5cbmZ1bmN0aW9uIHJpZ2h0KG5vZGUsIG1heERlcHRoKSB7XG4gICAgcmV0dXJuIG1heERlcHRoIC0gMSAtIG5vZGUuZW5kRGVwdGg7XG59XG5cbmZ1bmN0aW9uIGp1c3RpZnkobm9kZSwgbWF4RGVwdGgpIHtcbiAgICByZXR1cm4gbm9kZS5zb3VyY2VMaW5rcy5sZW5ndGggPyBub2RlLmRlcHRoIDogbWF4RGVwdGggLSAxO1xufVxuXG5mdW5jdGlvbiBjZW50ZXIobm9kZSwgbWF4RGVwdGgsIG5vZGVNYXApIHtcbiAgICByZXR1cm4gbm9kZS50YXJnZXRMaW5rcy5sZW5ndGggPyBub2RlLmRlcHRoIDogbm9kZS5zb3VyY2VMaW5rcy5sZW5ndGggPyBtaW5JbkFycmF5KG5vZGUuc291cmNlTGlua3MubWFwKChsaW5rID0+IG5vZGVNYXBbbGluay50YXJnZXRdLmRlcHRoKSkpIC0gMSA6IDA7XG59XG5cbmNvbnN0IGFzY2VuZGluZ05vZGVCcmVhZHRoID0gKGEsIGIpID0+IChudWxsID09IGEgPyB2b2lkIDAgOiBhLnkwKSAtIChudWxsID09IGIgPyB2b2lkIDAgOiBiLnkwKSwgY2FsY0RpdmlkZVZhbHVlID0gKG5vZGUsIGlzVGFyZ2V0KSA9PiB7XG4gICAgaWYgKGlzTmlsKG5vZGUudmFsdWUpKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCByZXMgPSAoaXNUYXJnZXQgPyBub2RlLnRhcmdldExpbmtzIDogbm9kZS5zb3VyY2VMaW5rcykucmVkdWNlKCgocmVzLCBzTGluaykgPT4gKGlzTmlsKHNMaW5rLnZhbHVlKSA/IHJlcy5jb3VudCArPSAxIDogcmVzLnN1bSArPSBzTGluay52YWx1ZSwgXG4gICAgcmVzKSksIHtcbiAgICAgICAgc3VtOiAwLFxuICAgICAgICBjb3VudDogMFxuICAgIH0pO1xuICAgIHJldHVybiByZXMuY291bnQgPiAwID8gKG5vZGUudmFsdWUgLSByZXMuc3VtKSAvIHJlcy5jb3VudCA6IG51bGw7XG59LCBhbGlnbkZ1bmN0aW9ucyA9IHtcbiAgICBsZWZ0OiBsZWZ0LFxuICAgIHJpZ2h0OiByaWdodCxcbiAgICBqdXN0aWZ5OiBqdXN0aWZ5LFxuICAgIGNlbnRlcjogY2VudGVyLFxuICAgIHN0YXJ0OiBsZWZ0LFxuICAgIGVuZDogcmlnaHRcbn0sIGxpbmtDbGFtcGUgPSBjbGFtcGVyKDAsIDEpO1xuXG5leHBvcnQgY2xhc3MgU2Fua2V5TGF5b3V0IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX2FzY2VuZGluZ1NvdXJjZUJyZWFkdGggPSAoYSwgYikgPT4gYXNjZW5kaW5nTm9kZUJyZWFkdGgodGhpcy5fbm9kZU1hcFthLnNvdXJjZV0sIHRoaXMuX25vZGVNYXBbYi5zb3VyY2VdKSB8fCBhLmluZGV4IC0gYi5pbmRleCwgXG4gICAgICAgIHRoaXMuX2FzY2VuZGluZ1RhcmdldEJyZWFkdGggPSAoYSwgYikgPT4gYXNjZW5kaW5nTm9kZUJyZWFkdGgodGhpcy5fbm9kZU1hcFthLnRhcmdldF0sIHRoaXMuX25vZGVNYXBbYi50YXJnZXRdKSB8fCBhLmluZGV4IC0gYi5pbmRleCwgXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIFNhbmtleUxheW91dC5kZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGtleU9wdGlvbiA9IHRoaXMub3B0aW9ucy5ub2RlS2V5LCBrZXlGdW5jID0gaXNGdW5jdGlvbihrZXlPcHRpb24pID8ga2V5T3B0aW9uIDoga2V5T3B0aW9uID8gZmllbGQoa2V5T3B0aW9uKSA6IG51bGw7XG4gICAgICAgIHRoaXMuX2dldE5vZGVLZXkgPSBrZXlGdW5jLCB0aGlzLl9sb2dnZXIgPSBMb2dnZXIuZ2V0SW5zdGFuY2UoKSwgdGhpcy5fYWxpZ25GdW5jID0gaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuc2V0Tm9kZUxheWVyKSA/IG5vZGUgPT4gdGhpcy5vcHRpb25zLnNldE5vZGVMYXllcihub2RlLmRhdHVtKSA6IGFsaWduRnVuY3Rpb25zW3RoaXMub3B0aW9ucy5ub2RlQWxpZ25dO1xuICAgIH1cbiAgICBsYXlvdXQoZGF0YSwgY29uZmlnKSB7XG4gICAgICAgIGlmICghZGF0YSkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHZpZXdCb3ggPSBcIndpZHRoXCIgaW4gY29uZmlnID8ge1xuICAgICAgICAgICAgeDA6IDAsXG4gICAgICAgICAgICB4MTogY29uZmlnLndpZHRoLFxuICAgICAgICAgICAgeTA6IDAsXG4gICAgICAgICAgICB5MTogY29uZmlnLmhlaWdodCxcbiAgICAgICAgICAgIHdpZHRoOiBjb25maWcud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGNvbmZpZy5oZWlnaHRcbiAgICAgICAgfSA6IHtcbiAgICAgICAgICAgIHgwOiBNYXRoLm1pbihjb25maWcueDAsIGNvbmZpZy54MSksXG4gICAgICAgICAgICB4MTogTWF0aC5tYXgoY29uZmlnLngwLCBjb25maWcueDEpLFxuICAgICAgICAgICAgeTA6IE1hdGgubWluKGNvbmZpZy55MCwgY29uZmlnLnkxKSxcbiAgICAgICAgICAgIHkxOiBNYXRoLm1heChjb25maWcueTAsIGNvbmZpZy55MSksXG4gICAgICAgICAgICB3aWR0aDogTWF0aC5hYnMoY29uZmlnLngxIC0gY29uZmlnLngwKSxcbiAgICAgICAgICAgIGhlaWdodDogTWF0aC5hYnMoY29uZmlnLnkxIC0gY29uZmlnLnkwKVxuICAgICAgICB9O1xuICAgICAgICBpc1ZlcnRpY2FsKHRoaXMub3B0aW9ucy5kaXJlY3Rpb24pID8gdGhpcy5fdmlld0JveCA9IHtcbiAgICAgICAgICAgIHgwOiB2aWV3Qm94LnkwLFxuICAgICAgICAgICAgeDE6IHZpZXdCb3gueTEsXG4gICAgICAgICAgICB5MDogdmlld0JveC54MCxcbiAgICAgICAgICAgIHkxOiB2aWV3Qm94LngxLFxuICAgICAgICAgICAgd2lkdGg6IHZpZXdCb3guaGVpZ2h0LFxuICAgICAgICAgICAgaGVpZ2h0OiB2aWV3Qm94LndpZHRoXG4gICAgICAgIH0gOiB0aGlzLl92aWV3Qm94ID0gdmlld0JveDtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jb21wdXRlTm9kZUxpbmtzKGRhdGEpLCBub2RlcyA9IHJlc3VsdC5ub2RlcztcbiAgICAgICAgbGV0IGxpbmtzID0gcmVzdWx0LmxpbmtzO1xuICAgICAgICBpZiAodGhpcy5fbm9kZU1hcCA9IHJlc3VsdC5ub2RlTWFwLCB0aGlzLmNvbXB1dGVOb2RlVmFsdWVzKG5vZGVzKSwgdGhpcy5jb21wdXRlTm9kZURlcHRocyhub2RlcyksIFxuICAgICAgICBbIFwicmlnaHRcIiwgXCJlbmRcIiwgXCJqdXN0aWZ5XCIgXS5pbmNsdWRlcyh0aGlzLm9wdGlvbnMubm9kZUFsaWduKSAmJiB0aGlzLmNvbXB1dGVOb2RlRW5kRGVwdGhzKG5vZGVzKSwgXG4gICAgICAgIHRoaXMuX21heERlcHRoIDw9IDEpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBjb2x1bW5zID0gdGhpcy5jb21wdXRlTm9kZUJyZWFkdGhzKG5vZGVzKTtcbiAgICAgICAgaWYgKHRoaXMuY29tcHV0ZUxpbmtCcmVhZHRocyhub2RlcyksIG5vZGVzLmZvckVhY2goKG5vZGUgPT4ge1xuICAgICAgICAgICAgbm9kZS5zb3VyY2VMaW5rcyA9IG5vZGUuc291cmNlTGlua3MuZmlsdGVyKChsaW5rID0+ICFpc05pbChsaW5rLnNvdXJjZSkgJiYgIWlzTmlsKGxpbmsudGFyZ2V0KSkpLCBcbiAgICAgICAgICAgIG5vZGUudGFyZ2V0TGlua3MgPSBub2RlLnRhcmdldExpbmtzLmZpbHRlcigobGluayA9PiAhaXNOaWwobGluay5zb3VyY2UpICYmICFpc05pbChsaW5rLnRhcmdldCkpKTtcbiAgICAgICAgfSkpLCBsaW5rcyA9IGxpbmtzLmZpbHRlcigobGluayA9PiAhaXNOaWwobGluay5zb3VyY2UpICYmICFpc05pbChsaW5rLnRhcmdldCkpKSwgXG4gICAgICAgIGlzVmVydGljYWwodGhpcy5vcHRpb25zLmRpcmVjdGlvbikpIGlmICh0aGlzLm9wdGlvbnMuaW52ZXJzZSkge1xuICAgICAgICAgICAgY29uc3Qgdmlld1kxID0gdGhpcy5fdmlld0JveC54MTtcbiAgICAgICAgICAgIG5vZGVzLmZvckVhY2goKG5vZGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHt5MDogeTAsIHkxOiB5MSwgeDA6IHgwLCB4MTogeDF9ID0gbm9kZTtcbiAgICAgICAgICAgICAgICBub2RlLnkwID0gdmlld1kxIC0geDEsIG5vZGUueTEgPSB2aWV3WTEgLSB4MCwgbm9kZS54MCA9IHkwLCBub2RlLngxID0geTE7XG4gICAgICAgICAgICB9KSksIGxpbmtzLmZvckVhY2goKGxpbmsgPT4ge1xuICAgICAgICAgICAgICAgIGxpbmsudmVydGljYWwgPSAhMDtcbiAgICAgICAgICAgICAgICBjb25zdCB7eDA6IHgwLCB4MTogeDEsIHkwOiB5MCwgeTE6IHkxfSA9IGxpbms7XG4gICAgICAgICAgICAgICAgbGluay54MCA9IHkwLCBsaW5rLngxID0geTEsIGxpbmsueTAgPSB2aWV3WTEgLSB4MCwgbGluay55MSA9IHZpZXdZMSAtIHgxO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9IGVsc2Ugbm9kZXMuZm9yRWFjaCgobm9kZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7eTA6IHkwLCB5MTogeTF9ID0gbm9kZTtcbiAgICAgICAgICAgIG5vZGUueTAgPSBub2RlLngwLCBub2RlLnkxID0gbm9kZS54MSwgbm9kZS54MCA9IHkwLCBub2RlLngxID0geTE7XG4gICAgICAgIH0pKSwgbGlua3MuZm9yRWFjaCgobGluayA9PiB7XG4gICAgICAgICAgICBsaW5rLnZlcnRpY2FsID0gITA7XG4gICAgICAgICAgICBjb25zdCB4MCA9IGxpbmsueDAsIHgxID0gbGluay54MTtcbiAgICAgICAgICAgIGxpbmsueDAgPSBsaW5rLnkwLCBsaW5rLngxID0gbGluay55MSwgbGluay55MCA9IHgwLCBsaW5rLnkxID0geDE7XG4gICAgICAgIH0pKTsgZWxzZSB0aGlzLm9wdGlvbnMuaW52ZXJzZSAmJiAobm9kZXMuZm9yRWFjaCgobm9kZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7eDA6IHgwLCB4MTogeDF9ID0gbm9kZTtcbiAgICAgICAgICAgIG5vZGUueDAgPSB2aWV3Qm94LngxIC0geDEsIG5vZGUueDEgPSB2aWV3Qm94LngxIC0geDA7XG4gICAgICAgIH0pKSwgbGlua3MuZm9yRWFjaCgobGluayA9PiB7XG4gICAgICAgICAgICBsaW5rLngwID0gdmlld0JveC54MSAtIGxpbmsueDAsIGxpbmsueDEgPSB2aWV3Qm94LngxIC0gbGluay54MTtcbiAgICAgICAgfSkpKTtcbiAgICAgICAgcmV0dXJuIGxpbmtzLmZvckVhY2goKGxpbmsgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc291cmNlTm9kZSA9IHRoaXMuX25vZGVNYXBbbGluay5zb3VyY2VdLCB0YXJnZXROb2RlID0gdGhpcy5fbm9kZU1hcFtsaW5rLnRhcmdldF07XG4gICAgICAgICAgICBsaW5rLnNvdXJjZVJlY3QgPSB7XG4gICAgICAgICAgICAgICAgeDA6IHNvdXJjZU5vZGUueDAsXG4gICAgICAgICAgICAgICAgeDE6IHNvdXJjZU5vZGUueDEsXG4gICAgICAgICAgICAgICAgeTA6IHNvdXJjZU5vZGUueTAsXG4gICAgICAgICAgICAgICAgeTE6IHNvdXJjZU5vZGUueTFcbiAgICAgICAgICAgIH0sIGxpbmsudGFyZ2V0UmVjdCA9IHtcbiAgICAgICAgICAgICAgICB4MDogdGFyZ2V0Tm9kZS54MCxcbiAgICAgICAgICAgICAgICB4MTogdGFyZ2V0Tm9kZS54MSxcbiAgICAgICAgICAgICAgICB5MTogdGFyZ2V0Tm9kZS55MSxcbiAgICAgICAgICAgICAgICB5MDogdGFyZ2V0Tm9kZS55MFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLCB7XG4gICAgICAgICAgICBub2Rlczogbm9kZXMsXG4gICAgICAgICAgICBsaW5rczogbGlua3MsXG4gICAgICAgICAgICBjb2x1bW5zOiBjb2x1bW5zXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbXB1dGVIaWVyYXJjaGljTm9kZUxpbmtzKG9yaWdpbmFsTm9kZXMpIHtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSBbXSwgbGlua3MgPSBbXSwgbm9kZU1hcCA9IHt9LCBsaW5rTWFwID0ge30sIG9yaWdpbmFsTGlua3MgPSBbXTtcbiAgICAgICAgY2FsY3VsYXRlTm9kZVZhbHVlKG9yaWdpbmFsTm9kZXMpO1xuICAgICAgICBjb25zdCBkb1N1YlRyZWUgPSAoc3ViVHJlZSwgZGVwdGgsIHBhcmVudHMpID0+IHtcbiAgICAgICAgICAgIHN1YlRyZWUuZm9yRWFjaCgoKG5vZGUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZUtleSA9IHRoaXMuX2dldE5vZGVLZXkgPyB0aGlzLl9nZXROb2RlS2V5KG5vZGUpIDogcGFyZW50cyA/IGAke3BhcmVudHNbcGFyZW50cy5sZW5ndGggLSAxXS5rZXl9LSR7aW5kZXh9YCA6IGAke2RlcHRofS0ke2luZGV4fWAsIG5vZGVWYWx1ZSA9IGlzTmlsKG5vZGUudmFsdWUpID8gMCA6IHRvVmFsaWROdW1iZXIobm9kZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVNYXBbbm9kZUtleV0pIG5vZGVNYXBbbm9kZUtleV0udmFsdWUgPSB2b2lkIDA7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlRWxlbWVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcHRoOiBkZXB0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdHVtOiBub2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBub2RlS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5vZGVWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUxpbmtzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldExpbmtzOiBbXVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBub2RlTWFwW25vZGVLZXldID0gbm9kZUVsZW1lbnQsIG5vZGVzLnB1c2gobm9kZUVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnRzICYmIG9yaWdpbmFsTGlua3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogcGFyZW50c1twYXJlbnRzLmxlbmd0aCAtIDFdLmtleSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBub2RlS2V5LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbm9kZVZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRzOiBwYXJlbnRzXG4gICAgICAgICAgICAgICAgfSksIG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggJiYgZG9TdWJUcmVlKG5vZGUuY2hpbGRyZW4sIGRlcHRoICsgMSwgcGFyZW50cyA/IHBhcmVudHMuY29uY2F0KFsgbm9kZU1hcFtub2RlS2V5XSBdKSA6IFsgbm9kZU1hcFtub2RlS2V5XSBdKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRvU3ViVHJlZShvcmlnaW5hbE5vZGVzLCAwLCBudWxsKSwgb3JpZ2luYWxMaW5rcy5mb3JFYWNoKCgobGluaywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGAke2xpbmsuc291cmNlfS0ke2xpbmsudGFyZ2V0fWAsIGxpbmtEYXR1bSA9IHBpY2tXaXRob3V0KGxpbmssIFsgXCJwYXJlbnRzXCIgXSk7XG4gICAgICAgICAgICBpZiAobGlua0RhdHVtLnBhcmVudHMgPSBsaW5rLnBhcmVudHMubWFwKChub2RlID0+IHBpY2tXaXRob3V0KG5vZGUsIFsgXCJzb3VyY2VMaW5rc1wiLCBcInRhcmdldExpbmtzXCIgXSkpKSwgXG4gICAgICAgICAgICBsaW5rTWFwW2tleV0pIHJldHVybiBsaW5rTWFwW2tleV0udmFsdWUgKz0gdG9WYWxpZE51bWJlcihsaW5rLnZhbHVlKSwgdm9pZCBsaW5rTWFwW2tleV0uZGF0dW0ucHVzaChsaW5rRGF0dW0pO1xuICAgICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSB7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgIGtleTogYCR7bGluay5zb3VyY2V9LSR7bGluay50YXJnZXR9YCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IGxpbmsuc291cmNlLFxuICAgICAgICAgICAgICAgIHRhcmdldDogbGluay50YXJnZXQsXG4gICAgICAgICAgICAgICAgZGF0dW06IFsgbGlua0RhdHVtIF0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGxpbmsudmFsdWUsXG4gICAgICAgICAgICAgICAgcGFyZW50czogbGluay5wYXJlbnRzLm1hcCgocGFyZW50ID0+IHBhcmVudC5rZXkpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxpbmtzLnB1c2gobGlua0VsZW1lbnQpLCBub2RlTWFwW2xpbmsuc291cmNlXS5zb3VyY2VMaW5rcy5wdXNoKGxpbmtFbGVtZW50KSwgbm9kZU1hcFtsaW5rLnRhcmdldF0udGFyZ2V0TGlua3MucHVzaChsaW5rRWxlbWVudCksIFxuICAgICAgICAgICAgbGlua01hcFtrZXldID0gbGlua0VsZW1lbnQ7XG4gICAgICAgIH0pKSwge1xuICAgICAgICAgICAgbm9kZXM6IG5vZGVzLFxuICAgICAgICAgICAgbGlua3M6IGxpbmtzLFxuICAgICAgICAgICAgbm9kZU1hcDogbm9kZU1hcFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb21wdXRlU291cmNlVGFyZ2V0Tm9kZUxpbmtzKGRhdGEpIHtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSBbXSwgbGlua3MgPSBbXSwgbm9kZU1hcCA9IHt9O1xuICAgICAgICBkYXRhLm5vZGVzICYmIGRhdGEubm9kZXMuZm9yRWFjaCgoKG5vZGUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub2RlRWxlbWVudCA9IHtcbiAgICAgICAgICAgICAgICBkZXB0aDogLTEsXG4gICAgICAgICAgICAgICAgZGF0dW06IG5vZGUsXG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgIGtleTogdGhpcy5fZ2V0Tm9kZUtleSA/IHRoaXMuX2dldE5vZGVLZXkobm9kZSkgOiBpbmRleCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogbm9kZS52YWx1ZSxcbiAgICAgICAgICAgICAgICBzb3VyY2VMaW5rczogW10sXG4gICAgICAgICAgICAgICAgdGFyZ2V0TGlua3M6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbm9kZU1hcFtub2RlRWxlbWVudC5rZXldID0gbm9kZUVsZW1lbnQsIG5vZGVzLnB1c2gobm9kZUVsZW1lbnQpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGludmFsaWRMaW5rcyA9IFtdO1xuICAgICAgICByZXR1cm4gZGF0YS5saW5rcy5mb3JFYWNoKCgobGluaywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhhc1NvdXJjZSA9ICFpc05pbChsaW5rLnNvdXJjZSksIGhhc1RhcmdldCA9ICFpc05pbChsaW5rLnRhcmdldCk7XG4gICAgICAgICAgICBpZiAoZGF0YS5ub2RlcyAmJiAoIW5vZGVNYXBbbGluay5zb3VyY2VdIHx8ICFub2RlTWFwW2xpbmsudGFyZ2V0XSkpIHJldHVybjtcbiAgICAgICAgICAgIGRhdGEubm9kZXMgfHwgIWhhc1NvdXJjZSB8fCBub2RlTWFwW2xpbmsuc291cmNlXSB8fCAobm9kZU1hcFtsaW5rLnNvdXJjZV0gPSB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBkZXB0aDogLTEsXG4gICAgICAgICAgICAgICAgaW5kZXg6IG5vZGVzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBrZXk6IGxpbmsuc291cmNlLFxuICAgICAgICAgICAgICAgIGRhdHVtOiBudWxsLFxuICAgICAgICAgICAgICAgIHNvdXJjZUxpbmtzOiBbXSxcbiAgICAgICAgICAgICAgICB0YXJnZXRMaW5rczogW11cbiAgICAgICAgICAgIH0sIG5vZGVzLnB1c2gobm9kZU1hcFtsaW5rLnNvdXJjZV0pKSwgZGF0YS5ub2RlcyB8fCAhaGFzVGFyZ2V0IHx8IG5vZGVNYXBbbGluay50YXJnZXRdIHx8IChub2RlTWFwW2xpbmsudGFyZ2V0XSA9IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdm9pZCAwLFxuICAgICAgICAgICAgICAgIGRlcHRoOiAtMSxcbiAgICAgICAgICAgICAgICBpbmRleDogbm9kZXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGtleTogbGluay50YXJnZXQsXG4gICAgICAgICAgICAgICAgZGF0dW06IG51bGwsXG4gICAgICAgICAgICAgICAgc291cmNlTGlua3M6IFtdLFxuICAgICAgICAgICAgICAgIHRhcmdldExpbmtzOiBbXVxuICAgICAgICAgICAgfSwgbm9kZXMucHVzaChub2RlTWFwW2xpbmsudGFyZ2V0XSkpO1xuICAgICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSB7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgIHNvdXJjZTogbGluay5zb3VyY2UsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBsaW5rLnRhcmdldCxcbiAgICAgICAgICAgICAgICBkYXR1bTogbGluayxcbiAgICAgICAgICAgICAgICB2YWx1ZTogbGluay52YWx1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kaXZpZGVOb2RlVmFsdWVUb0xpbmsgJiYgaXNOaWwobGluay52YWx1ZSkgJiYgaW52YWxpZExpbmtzLnB1c2gobGlua0VsZW1lbnQpLCBcbiAgICAgICAgICAgIGxpbmtzLnB1c2gobGlua0VsZW1lbnQpLCBoYXNTb3VyY2UgJiYgbm9kZU1hcFtsaW5rLnNvdXJjZV0uc291cmNlTGlua3MucHVzaChsaW5rRWxlbWVudCksIFxuICAgICAgICAgICAgaGFzVGFyZ2V0ICYmIG5vZGVNYXBbbGluay50YXJnZXRdLnRhcmdldExpbmtzLnB1c2gobGlua0VsZW1lbnQpO1xuICAgICAgICB9KSksIHRoaXMub3B0aW9ucy5kaXZpZGVOb2RlVmFsdWVUb0xpbmsgJiYgaW52YWxpZExpbmtzLmxlbmd0aCAmJiBpbnZhbGlkTGlua3MuZm9yRWFjaCgobGluayA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBbIGNhbGNEaXZpZGVWYWx1ZShub2RlTWFwW2xpbmsuc291cmNlXSksIGNhbGNEaXZpZGVWYWx1ZShub2RlTWFwW2xpbmsudGFyZ2V0XSwgITApIF0uZmlsdGVyKChlbnRyeSA9PiAhaXNOaWwoZW50cnkpKSk7XG4gICAgICAgICAgICB2YWx1ZXMubGVuZ3RoICYmIChsaW5rLnZhbHVlID0gbWluSW5BcnJheSh2YWx1ZXMpKTtcbiAgICAgICAgfSkpLCB7XG4gICAgICAgICAgICBub2RlTWFwOiBub2RlTWFwLFxuICAgICAgICAgICAgbm9kZXM6IG5vZGVzLFxuICAgICAgICAgICAgbGlua3M6IGxpbmtzXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbXB1dGVOb2RlTGlua3MoZGF0YSkge1xuICAgICAgICBsZXQgcmVzO1xuICAgICAgICBcImxpbmtzXCIgaW4gZGF0YSA/IHJlcyA9IHRoaXMuY29tcHV0ZVNvdXJjZVRhcmdldE5vZGVMaW5rcyhkYXRhKSA6ICh0aGlzLl9pc0hpZXJhcmNoaWMgPSAhMCwgXG4gICAgICAgIHJlcyA9IHRoaXMuY29tcHV0ZUhpZXJhcmNoaWNOb2RlTGlua3MoZGF0YS5ub2RlcykpO1xuICAgICAgICBsZXQgbm9kZXMgPSByZXMubm9kZXM7XG4gICAgICAgIGNvbnN0IGxpbmtzID0gcmVzLmxpbmtzO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmxpbmtTb3J0QnkpIGZvciAobGV0IGkgPSAwLCBsZW4gPSBub2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykgbm9kZXNbaV0uc291cmNlTGlua3Muc29ydCh0aGlzLm9wdGlvbnMubGlua1NvcnRCeSksIFxuICAgICAgICBub2Rlc1tpXS50YXJnZXRMaW5rcy5zb3J0KHRoaXMub3B0aW9ucy5saW5rU29ydEJ5KTtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kcm9wSXNvbGF0ZWROb2RlICYmIChub2RlcyA9IG5vZGVzLmZpbHRlcigobm9kZSA9PiBub2RlLnRhcmdldExpbmtzLmxlbmd0aCB8fCBub2RlLnNvdXJjZUxpbmtzLmxlbmd0aCkpKSwgXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5vZGVzOiBub2RlcyxcbiAgICAgICAgICAgIGxpbmtzOiBsaW5rcyxcbiAgICAgICAgICAgIG5vZGVNYXA6IHJlcy5ub2RlTWFwXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbXB1dGVOb2RlVmFsdWVzKG5vZGVzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBub2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICAgICAgbm9kZS52YWx1ZSA9IE1hdGgubWF4KGlzTmlsKG5vZGUudmFsdWUpID8gMCA6IHRvVmFsaWROdW1iZXIobm9kZS52YWx1ZSksIG5vZGUuc291cmNlTGlua3MucmVkdWNlKCgoc3VtLCBsaW5rKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdW0gKyAobnVsbCAhPT0gKF9hID0gdG9WYWxpZE51bWJlcihsaW5rLnZhbHVlKSkgJiYgdm9pZCAwICE9PSBfYSA/IF9hIDogMCk7XG4gICAgICAgICAgICB9KSwgMCksIG5vZGUudGFyZ2V0TGlua3MucmVkdWNlKCgoc3VtLCBsaW5rKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdW0gKyAobnVsbCAhPT0gKF9hID0gdG9WYWxpZE51bWJlcihsaW5rLnZhbHVlKSkgJiYgdm9pZCAwICE9PSBfYSA/IF9hIDogMCk7XG4gICAgICAgICAgICB9KSwgMCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXB1dGVOb2RlRGVwdGhzKG5vZGVzKSB7XG4gICAgICAgIGNvbnN0IG4gPSBub2Rlcy5sZW5ndGg7XG4gICAgICAgIGxldCBuZXh0LCBuZXh0TWFwLCBjdXJyZW50ID0gbm9kZXMsIGRlcHRoID0gMDtcbiAgICAgICAgZm9yICg7Y3VycmVudC5sZW5ndGggJiYgZGVwdGggPCBuOyApIHtcbiAgICAgICAgICAgIG5leHQgPSBbXSwgbmV4dE1hcCA9IHt9O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGN1ckxlbiA9IGN1cnJlbnQubGVuZ3RoOyBpIDwgY3VyTGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gY3VycmVudFtpXTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZSAmJiAobm9kZS5kZXB0aCA9IGRlcHRoLCBub2RlLnNvdXJjZUxpbmtzICYmIG5vZGUuc291cmNlTGlua3MubGVuZ3RoKSkgZm9yIChsZXQgaiA9IDAsIGxpbmtMZW4gPSBub2RlLnNvdXJjZUxpbmtzLmxlbmd0aDsgaiA8IGxpbmtMZW47IGorKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gbm9kZS5zb3VyY2VMaW5rc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgbmV4dE1hcFtsaW5rLnRhcmdldF0gfHwgKG5leHQucHVzaCh0aGlzLl9ub2RlTWFwW2xpbmsudGFyZ2V0XSksIG5leHRNYXBbbGluay50YXJnZXRdID0gITApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnQgPSBuZXh0LCBkZXB0aCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGRlcHRoID4gbiAmJiB0aGlzLl9sb2dnZXIud2FybihcIkVycm9yOiB0aGVyZSBpcyBhIGNpcmN1bGFyIGxpbmtcIiksIHRoaXMuX21heERlcHRoID0gZGVwdGg7XG4gICAgfVxuICAgIGNvbXB1dGVOb2RlRW5kRGVwdGhzKG5vZGVzKSB7XG4gICAgICAgIGNvbnN0IG4gPSBub2Rlcy5sZW5ndGg7XG4gICAgICAgIGxldCBuZXh0LCBuZXh0TWFwLCBjdXJyZW50ID0gbm9kZXMsIGRlcHRoID0gMDtcbiAgICAgICAgZm9yICg7Y3VycmVudC5sZW5ndGggJiYgZGVwdGggPCBuOyApIHtcbiAgICAgICAgICAgIG5leHQgPSBbXSwgbmV4dE1hcCA9IHt9O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGN1ckxlbiA9IGN1cnJlbnQubGVuZ3RoOyBpIDwgY3VyTGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gY3VycmVudFtpXTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmVuZERlcHRoID0gZGVwdGg7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBsaW5rTGVuID0gbm9kZS50YXJnZXRMaW5rcy5sZW5ndGg7IGogPCBsaW5rTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBub2RlLnRhcmdldExpbmtzW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE1hcFtsaW5rLnNvdXJjZV0gfHwgKG5leHQucHVzaCh0aGlzLl9ub2RlTWFwW2xpbmsuc291cmNlXSksIG5leHRNYXBbbGluay5zb3VyY2VdID0gITApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudCA9IG5leHQsIGRlcHRoICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZGVwdGggPiBuICYmIHRoaXMuX2xvZ2dlci53YXJuKFwiRXJyb3I6IHRoZXJlIGlzIGEgY2lyY3VsYXIgbGlua1wiKTtcbiAgICB9XG4gICAgY29tcHV0ZU5vZGVMYXllcnMobm9kZXMpIHtcbiAgICAgICAgY29uc3Qgbm9kZVdpZHRoT3B0aW9uID0gdGhpcy5vcHRpb25zLm5vZGVXaWR0aCwgbGlua1dpZHRoT3B0aW9uID0gdGhpcy5vcHRpb25zLmxpbmtXaWR0aCwgbWluU3RlcFdpZHRoID0gdGhpcy5vcHRpb25zLm1pblN0ZXBXaWR0aCwgd2lkdGggPSB0aGlzLl92aWV3Qm94LndpZHRoO1xuICAgICAgICBsZXQgbm9kZVdpZHRoID0gbnVsbCwgbGlua1dpZHRoID0gbnVsbCwgaXNFdmVuV2lkdGggPSAhMTtcbiAgICAgICAgaWYgKGlzU3RyaW5nKG5vZGVXaWR0aE9wdGlvbikpIHtcbiAgICAgICAgICAgIGNvbnN0IHJhdGlvID0gY2xhbXAocGFyc2VGbG9hdChub2RlV2lkdGhPcHRpb24ucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwLCAwLCAxKTtcbiAgICAgICAgICAgIGxldCBzdGVwV2lkdGggPSB3aWR0aCAvICh0aGlzLl9tYXhEZXB0aCAtIDEgKyByYXRpbyk7XG4gICAgICAgICAgICBtaW5TdGVwV2lkdGggPiAwICYmIChzdGVwV2lkdGggPSBNYXRoLm1heChtaW5TdGVwV2lkdGgsIHN0ZXBXaWR0aCkpLCBub2RlV2lkdGggPSBzdGVwV2lkdGggKiByYXRpbywgXG4gICAgICAgICAgICBsaW5rV2lkdGggPSBzdGVwV2lkdGggKiAoMSAtIHJhdGlvKSwgaXNFdmVuV2lkdGggPSAhMDtcbiAgICAgICAgfSBlbHNlIGlmIChpc051bWJlcihub2RlV2lkdGhPcHRpb24pKSB7XG4gICAgICAgICAgICBpZiAobm9kZVdpZHRoID0gbm9kZVdpZHRoT3B0aW9uLCBpc051bWJlcihsaW5rV2lkdGhPcHRpb24pKSBsaW5rV2lkdGggPSBsaW5rV2lkdGhPcHRpb247IGVsc2UgaWYgKGlzTmlsKGxpbmtXaWR0aE9wdGlvbikpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RlcFdpZHRoID0gKHdpZHRoIC0gbm9kZVdpZHRoT3B0aW9uKSAvICh0aGlzLl9tYXhEZXB0aCAtIDEpO1xuICAgICAgICAgICAgICAgIG1pblN0ZXBXaWR0aCA+IDAgJiYgKHN0ZXBXaWR0aCA9IE1hdGgubWF4KG1pblN0ZXBXaWR0aCwgc3RlcFdpZHRoKSksIGxpbmtXaWR0aCA9IHN0ZXBXaWR0aCAtIG5vZGVXaWR0aE9wdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlzRXZlbldpZHRoID0gITA7XG4gICAgICAgIH0gZWxzZSBpc0Z1bmN0aW9uKG5vZGVXaWR0aE9wdGlvbikgJiYgaXNOdW1iZXIobGlua1dpZHRoT3B0aW9uKSAmJiAobGlua1dpZHRoID0gbGlua1dpZHRoT3B0aW9uKTtcbiAgICAgICAgY29uc3QgY29sdW1ucyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gbm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgIG5vZGUubGF5ZXIgPSB0aGlzLl9pc0hpZXJhcmNoaWMgPyBub2RlLmRlcHRoIDogY2xhbXAoTWF0aC5mbG9vcih0aGlzLl9hbGlnbkZ1bmMobm9kZSwgdGhpcy5fbWF4RGVwdGgsIHRoaXMuX25vZGVNYXApKSwgMCwgdGhpcy5fbWF4RGVwdGggLSAxKTtcbiAgICAgICAgICAgIGNvbnN0IGxheWVyID0gbm9kZS5sYXllcjtcbiAgICAgICAgICAgIGxheWVyID09PSB0aGlzLl9tYXhEZXB0aCAtIDEgJiYgKG5vZGUuaXNMYXN0TGF5ZXIgPSAhMCksIGlzRXZlbldpZHRoICYmIChub2RlLngwID0gdGhpcy5fdmlld0JveC54MCArIGxheWVyICogKG5vZGVXaWR0aCArIGxpbmtXaWR0aCksIFxuICAgICAgICAgICAgbm9kZS54MSA9IG5vZGUueDAgKyBub2RlV2lkdGgpLCBjb2x1bW5zW2xheWVyXSA/IGNvbHVtbnNbbGF5ZXJdLnB1c2gobm9kZSkgOiBjb2x1bW5zW2xheWVyXSA9IFsgbm9kZSBdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMubm9kZVNvcnRCeSkgZm9yIChsZXQgaiA9IDAsIGNvbExlbiA9IGNvbHVtbnMubGVuZ3RoOyBqIDwgY29sTGVuOyBqKyspIGNvbHVtbnNbal0uc29ydCh0aGlzLm9wdGlvbnMubm9kZVNvcnRCeSk7XG4gICAgICAgIGlmICghaXNFdmVuV2lkdGggJiYgaXNGdW5jdGlvbihub2RlV2lkdGhPcHRpb24pKSB7XG4gICAgICAgICAgICBsZXQgY3VyTGF5ZXJYID0gdGhpcy5fdmlld0JveC54MDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbWF4RGVwdGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbHVtbiA9IGNvbHVtbnNbaV07XG4gICAgICAgICAgICAgICAgbGV0IG1heE5vZGVXaWR0aCA9IDAsIG1heExpbmtXaWR0aCA9IDA7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDAsIGNvbExlbiA9IGNvbHVtbiAmJiBjb2x1bW4ubGVuZ3RoOyBqIDwgY29sTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGNvbHVtbltqXSwgY3VyTm9kZVdpZHRoID0gbm9kZVdpZHRoT3B0aW9uKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBub2RlLngwID0gY3VyTGF5ZXJYLCBub2RlLngxID0gY3VyTGF5ZXJYICsgY3VyTm9kZVdpZHRoLCBtYXhOb2RlV2lkdGggPSBNYXRoLm1heChub2RlV2lkdGgsIGN1ck5vZGVXaWR0aCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZUxpbmtzID0gbm9kZS5zb3VyY2VMaW5rcztcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDAsIGxpbmtMZW4gPSBzb3VyY2VMaW5rcy5sZW5ndGg7IGsgPCBsaW5rTGVuOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBzb3VyY2VMaW5rc1trXSwgY3VyTGlua1dpZHRoID0gaXNGdW5jdGlvbihsaW5rV2lkdGhPcHRpb24pID8gbGlua1dpZHRoT3B0aW9uKGxpbmssIHRoaXMuX3ZpZXdCb3gpIDogbGlua1dpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGlua1dpZHRoID0gTWF0aC5tYXgobWF4TGlua1dpZHRoLCBjdXJMaW5rV2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1ckxheWVyWCArPSBtYXhOb2RlV2lkdGggKyBtYXhMaW5rV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbHVtbnM7XG4gICAgfVxuICAgIGluaXRpYWxpemVOb2RlQnJlYWR0aHMoY29sdW1ucykge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBtaW5MaW5rSGVpZ2h0ID0gbnVsbCAhPT0gKF9hID0gdGhpcy5vcHRpb25zLm1pbkxpbmtIZWlnaHQpICYmIHZvaWQgMCAhPT0gX2EgPyBfYSA6IDA7XG4gICAgICAgIGxldCBtaW5Ob2RlSGVpZ2h0ID0gbnVsbCAhPT0gKF9iID0gdGhpcy5vcHRpb25zLm1pbk5vZGVIZWlnaHQpICYmIHZvaWQgMCAhPT0gX2IgPyBfYiA6IDA7XG4gICAgICAgIChpc05pbChtaW5Ob2RlSGVpZ2h0KSB8fCBtaW5Ob2RlSGVpZ2h0IDwgbWluTGlua0hlaWdodCkgJiYgKG1pbk5vZGVIZWlnaHQgPSBtaW5MaW5rSGVpZ2h0KTtcbiAgICAgICAgbGV0IGt5ID0gMCwgZ2V0R2FwWSA9IG51bGwsIGZvcmNlTm9kZUhlaWdodCA9IG51bGw7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5ub2RlR2FwKSkgZ2V0R2FwWSA9IHRoaXMub3B0aW9ucy5ub2RlR2FwLCBreSA9IGNvbHVtbnMucmVkdWNlKCgodmFsLCBjb2x1bW4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN1bVZhbHVlID0gY29sdW1uLnJlZHVjZSgoKHN1bSwgbm9kZSkgPT4gc3VtICsgbm9kZS52YWx1ZSksIDApLCBzdW1HYXBZID0gY29sdW1uLnJlZHVjZSgoKHN1bSwgbm9kZSkgPT4gc3VtICsgdGhpcy5vcHRpb25zLm5vZGVHYXAobm9kZSkpLCAwKTtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbih2YWwsICh0aGlzLl92aWV3Qm94LmhlaWdodCAtIHN1bUdhcFkpIC8gc3VtVmFsdWUpO1xuICAgICAgICB9KSwgMSAvIDApOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG1heFJvd0NvdW50ID0gY29sdW1ucy5yZWR1Y2UoKChjbnQsIGNvbHVtbikgPT4gTWF0aC5tYXgoY250LCBjb2x1bW4ubGVuZ3RoKSksIDApLCBtYXhTdGVwSGVpZ2h0ID0gdGhpcy5fdmlld0JveC5oZWlnaHQgLyBtYXhSb3dDb3VudCwgZ2FwWSA9IE1hdGgubWluKHRoaXMub3B0aW9ucy5ub2RlR2FwLCBtYXhTdGVwSGVpZ2h0KTtcbiAgICAgICAgICAgIGlmIChnZXRHYXBZID0gKCkgPT4gZ2FwWSwgdGhpcy5fZ2FwWSA9IGdhcFksIChtaW5Ob2RlSGVpZ2h0ICsgZ2FwWSkgKiBtYXhSb3dDb3VudCA+IHRoaXMuX3ZpZXdCb3guaGVpZ2h0ICYmIChtaW5Ob2RlSGVpZ2h0ID0gbWF4U3RlcEhlaWdodCAtIGdhcFkpLCBcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5lcXVhbE5vZGVIZWlnaHQpIGZvcmNlTm9kZUhlaWdodCA9IHRoaXMuX3ZpZXdCb3guaGVpZ2h0IC8gbWF4Um93Q291bnQgLSBnYXBZOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWxHYXBZID0gbWluTm9kZUhlaWdodCA+IDAgPyBNYXRoLm1heChnYXBZLCBtaW5Ob2RlSGVpZ2h0KSA6IGdhcFk7XG4gICAgICAgICAgICAgICAga3kgPSBjb2x1bW5zLnJlZHVjZSgoKHZhbCwgY29sdW1uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1bVZhbHVlID0gY29sdW1uLnJlZHVjZSgoKHN1bSwgbm9kZSkgPT4gc3VtICsgbm9kZS52YWx1ZSksIDApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5taW4odmFsLCAodGhpcy5fdmlld0JveC5oZWlnaHQgLSAoKGNvbHVtbi5sZW5ndGggLSAxKSAqIGNhbEdhcFkgKyBtaW5Ob2RlSGVpZ2h0KSkgLyBzdW1WYWx1ZSk7XG4gICAgICAgICAgICAgICAgfSksIDEgLyAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc1N0YXJ0R2FwID0gXCJzdGFydFwiID09PSB0aGlzLm9wdGlvbnMuZ2FwUG9zaXRpb24sIGlzTWlkZGxlR2FwID0gIWlzU3RhcnRHYXAgJiYgXCJlbmRcIiAhPT0gdGhpcy5vcHRpb25zLmdhcFBvc2l0aW9uLCBnZXROb2RlSGVpZ2h0ID0gaXNOdW1iZXIodGhpcy5vcHRpb25zLm5vZGVIZWlnaHQpID8gbm9kZSA9PiB0aGlzLm9wdGlvbnMubm9kZUhlaWdodCA6IGlzRnVuY3Rpb24odGhpcy5vcHRpb25zLm5vZGVIZWlnaHQpID8gdGhpcy5vcHRpb25zLm5vZGVIZWlnaHQgOiBmb3JjZU5vZGVIZWlnaHQgPiAwID8gbm9kZSA9PiBmb3JjZU5vZGVIZWlnaHQgOiBub2RlID0+IE1hdGgubWF4KG5vZGUudmFsdWUgKiBreSwgMCksIGdldExpbmtIZWlnaHQgPSBpc051bWJlcih0aGlzLm9wdGlvbnMubGlua0hlaWdodCkgPyAoKSA9PiB0aGlzLm9wdGlvbnMubGlua0hlaWdodCA6IGlzRnVuY3Rpb24odGhpcy5vcHRpb25zLmxpbmtIZWlnaHQpID8gdGhpcy5vcHRpb25zLmxpbmtIZWlnaHQgOiAobGluaywgc291cmNlTm9kZSwgc291cmNlTm9kZUhlaWdodCkgPT4gTWF0aC5tYXgoc291cmNlTm9kZS52YWx1ZSA/IHNvdXJjZU5vZGVIZWlnaHQgKiBsaW5rQ2xhbXBlKGxpbmsudmFsdWUgLyBzb3VyY2VOb2RlLnZhbHVlKSA6IDAsIG1pbkxpbmtIZWlnaHQsIDApO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgY29sdW1uQ291bnQgPSBjb2x1bW5zLmxlbmd0aDsgaSA8IGNvbHVtbkNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gY29sdW1uc1tpXTtcbiAgICAgICAgICAgIGlmICghbm9kZXMgfHwgIW5vZGVzLmxlbmd0aCkgY29udGludWU7XG4gICAgICAgICAgICBsZXQgeSA9IHRoaXMuX3ZpZXdCb3gueTAsIGdhcFkgPSAwLCBub2RlSGVpZ2h0ID0gMCwgY2FsY3VsYXRlZE5vZGVIZWlnaHQgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2pdO1xuICAgICAgICAgICAgICAgIGdhcFkgPSBnZXRHYXBZKG5vZGUpLCBpc1N0YXJ0R2FwICYmICh5ICs9IGdhcFkpLCBjYWxjdWxhdGVkTm9kZUhlaWdodCA9IGdldE5vZGVIZWlnaHQobm9kZSksIFxuICAgICAgICAgICAgICAgIG5vZGVIZWlnaHQgPSBNYXRoLm1heChjYWxjdWxhdGVkTm9kZUhlaWdodCwgbWluTm9kZUhlaWdodCksIG5vZGUueTAgPSB5LCBub2RlLnkxID0geSArIG5vZGVIZWlnaHQsIFxuICAgICAgICAgICAgICAgIHkgPSBpc1N0YXJ0R2FwID8gbm9kZS55MSA6IG5vZGUueTEgKyBnYXBZO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwLCBsaW5rTGVuID0gbm9kZS5zb3VyY2VMaW5rcy5sZW5ndGg7IGsgPCBsaW5rTGVuOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluayA9IG5vZGUuc291cmNlTGlua3Nba107XG4gICAgICAgICAgICAgICAgICAgIGxpbmsudGhpY2tuZXNzID0gZ2V0TGlua0hlaWdodChsaW5rLCBub2RlLCBjYWxjdWxhdGVkTm9kZUhlaWdodCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGRlbHRhWSA9IHRoaXMuX3ZpZXdCb3gueTEgLSB5ICsgKGlzTWlkZGxlR2FwID8gZ2FwWSA6IDApO1xuICAgICAgICAgICAgaWYgKGRlbHRhWSA+IDApIGlmIChcInN0YXJ0XCIgPT09IHRoaXMub3B0aW9ucy5jcm9zc05vZGVBbGlnbikgOyBlbHNlIGlmIChcImVuZFwiID09PSB0aGlzLm9wdGlvbnMuY3Jvc3NOb2RlQWxpZ24pIGZvciAobGV0IGogPSAwLCBsZW4gPSBub2Rlcy5sZW5ndGg7IGogPCBsZW47ICsraikge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tqXTtcbiAgICAgICAgICAgICAgICBub2RlLnkwICs9IGRlbHRhWSwgbm9kZS55MSArPSBkZWx0YVk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlbHRhWSAvPSBub2Rlcy5sZW5ndGggKyAxO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBsZW4gPSBub2Rlcy5sZW5ndGg7IGogPCBsZW47ICsraikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbal07XG4gICAgICAgICAgICAgICAgICAgIG5vZGUueTAgKz0gZGVsdGFZICogKGogKyAxKSwgbm9kZS55MSArPSBkZWx0YVkgKiAoaiArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVsdGFZIDwgMCAmJiBub2Rlcy5sZW5ndGggPiAxICYmIChkZWx0YVkgLz0gbm9kZXMubGVuZ3RoIC0gMSwgZ2FwWSArIGRlbHRhWSA+PSAwKSkge1xuICAgICAgICAgICAgICAgIGdhcFkgKz0gZGVsdGFZLCB0aGlzLl9nYXBZID0gTWF0aC5taW4oZ2FwWSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDEsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaiA8IGxlbjsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS55MCArPSBkZWx0YVkgKiBqLCBub2RlLnkxICs9IGRlbHRhWSAqIGo7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW9yZGVyTGlua3Mobm9kZXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXB1dGVOb2RlQnJlYWR0aHMobm9kZXMpIHtcbiAgICAgICAgY29uc3QgY29sdW1ucyA9IHRoaXMuY29tcHV0ZU5vZGVMYXllcnMobm9kZXMpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVOb2RlQnJlYWR0aHMoY29sdW1ucyk7XG4gICAgICAgIGNvbnN0IGl0ZXJhdGlvbnMgPSB0aGlzLm9wdGlvbnMuaXRlcmF0aW9ucztcbiAgICAgICAgaWYgKCF0aGlzLl9pc0hpZXJhcmNoaWMgJiYgIWlzRnVuY3Rpb24odGhpcy5vcHRpb25zLnNldE5vZGVMYXllcikgJiYgIWlzRnVuY3Rpb24odGhpcy5vcHRpb25zLm5vZGVHYXApKSBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgYWxwaGEgPSBNYXRoLnBvdyguOTksIGkpLCBiZXRhID0gTWF0aC5tYXgoMSAtIGFscGhhLCAoaSArIDEpIC8gaXRlcmF0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnJlbGF4UmlnaHRUb0xlZnQoY29sdW1ucywgYWxwaGEsIGJldGEpLCB0aGlzLnJlbGF4TGVmdFRvUmlnaHQoY29sdW1ucywgYWxwaGEsIGJldGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgIH1cbiAgICByZWxheExlZnRUb1JpZ2h0KGNvbHVtbnMsIGFscGhhLCBiZXRhKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAxLCBuID0gY29sdW1ucy5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbiA9IGNvbHVtbnNbaV07XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgY29sTGVuID0gY29sdW1uLmxlbmd0aDsgaiA8IGNvbExlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gY29sdW1uW2pdO1xuICAgICAgICAgICAgICAgIGxldCB5ID0gMCwgdyA9IDA7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDAsIGxpbmtMZW4gPSB0YXJnZXQudGFyZ2V0TGlua3MubGVuZ3RoOyBrIDwgbGlua0xlbjsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSB0YXJnZXQudGFyZ2V0TGlua3Nba10sIHYgPSBsaW5rLnZhbHVlICogKHRhcmdldC5sYXllciAtIHRoaXMuX25vZGVNYXBbbGluay5zb3VyY2VdLmxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgeSArPSB0aGlzLnRhcmdldFRvcCh0aGlzLl9ub2RlTWFwW2xpbmsuc291cmNlXSwgdGFyZ2V0KSAqIHYsIHcgKz0gdjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCEodyA+IDApKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBkeSA9ICh5IC8gdyAtIHRhcmdldC55MCkgKiBhbHBoYTtcbiAgICAgICAgICAgICAgICB0YXJnZXQueTAgKz0gZHksIHRhcmdldC55MSArPSBkeSwgdGhpcy5yZW9yZGVyTm9kZUxpbmtzKHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpc05pbCh0aGlzLm9wdGlvbnMubm9kZVNvcnRCeSkgJiYgY29sdW1uLnNvcnQoYXNjZW5kaW5nTm9kZUJyZWFkdGgpLCB0aGlzLnJlc29sdmVDb2xsaXNpb25zKGNvbHVtbiwgYmV0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVsYXhSaWdodFRvTGVmdChjb2x1bW5zLCBhbHBoYSwgYmV0YSkge1xuICAgICAgICBmb3IgKGxldCBpID0gY29sdW1ucy5sZW5ndGggLSAyOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgY29uc3QgY29sdW1uID0gY29sdW1uc1tpXTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBjb2xMZW4gPSBjb2x1bW4ubGVuZ3RoOyBqIDwgY29sTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBjb2x1bW5bal07XG4gICAgICAgICAgICAgICAgbGV0IHkgPSAwLCB3ID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMCwgbGlua0xlbiA9IHNvdXJjZS5zb3VyY2VMaW5rcy5sZW5ndGg7IGsgPCBsaW5rTGVuOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluayA9IHNvdXJjZS5zb3VyY2VMaW5rc1trXSwgdiA9IGxpbmsudmFsdWUgKiAodGhpcy5fbm9kZU1hcFtsaW5rLnRhcmdldF0ubGF5ZXIgLSBzb3VyY2UubGF5ZXIpO1xuICAgICAgICAgICAgICAgICAgICB5ICs9IHRoaXMuc291cmNlVG9wKHNvdXJjZSwgdGhpcy5fbm9kZU1hcFtsaW5rLnRhcmdldF0pICogdiwgdyArPSB2O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoISh3ID4gMCkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGR5ID0gKHkgLyB3IC0gc291cmNlLnkwKSAqIGFscGhhO1xuICAgICAgICAgICAgICAgIHNvdXJjZS55MCArPSBkeSwgc291cmNlLnkxICs9IGR5LCB0aGlzLnJlb3JkZXJOb2RlTGlua3Moc291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZvaWQgMCA9PT0gdGhpcy5vcHRpb25zLm5vZGVTb3J0QnkgJiYgY29sdW1uLnNvcnQoYXNjZW5kaW5nTm9kZUJyZWFkdGgpLCB0aGlzLnJlc29sdmVDb2xsaXNpb25zKGNvbHVtbiwgYmV0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzb2x2ZUNvbGxpc2lvbnMobm9kZXMsIGFscGhhKSB7XG4gICAgICAgIGNvbnN0IGkgPSBub2Rlcy5sZW5ndGggPj4gMSwgc3ViamVjdCA9IG5vZGVzW2ldO1xuICAgICAgICB0aGlzLnJlc29sdmVDb2xsaXNpb25zQm90dG9tVG9Ub3Aobm9kZXMsIHN1YmplY3QueTAgLSB0aGlzLl9nYXBZLCBpIC0gMSwgYWxwaGEpLCBcbiAgICAgICAgdGhpcy5yZXNvbHZlQ29sbGlzaW9uc1RvcFRvQm90dG9tKG5vZGVzLCBzdWJqZWN0LnkxICsgdGhpcy5fZ2FwWSwgaSArIDEsIGFscGhhKSwgXG4gICAgICAgIHRoaXMucmVzb2x2ZUNvbGxpc2lvbnNCb3R0b21Ub1RvcChub2RlcywgdGhpcy5fdmlld0JveC55MSwgbm9kZXMubGVuZ3RoIC0gMSwgYWxwaGEpLCBcbiAgICAgICAgdGhpcy5yZXNvbHZlQ29sbGlzaW9uc1RvcFRvQm90dG9tKG5vZGVzLCB0aGlzLl92aWV3Qm94LnkwLCAwLCBhbHBoYSk7XG4gICAgfVxuICAgIHJlc29sdmVDb2xsaXNpb25zVG9wVG9Cb3R0b20obm9kZXMsIHksIGksIGFscGhhKSB7XG4gICAgICAgIGZvciAoO2kgPCBub2Rlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldLCBkeSA9ICh5IC0gbm9kZS55MCkgKiBhbHBoYTtcbiAgICAgICAgICAgIGR5ID4gMWUtNiAmJiAobm9kZS55MCArPSBkeSwgbm9kZS55MSArPSBkeSksIHkgPSBub2RlLnkxICsgdGhpcy5fZ2FwWTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXNvbHZlQ29sbGlzaW9uc0JvdHRvbVRvVG9wKG5vZGVzLCB5LCBpLCBhbHBoYSkge1xuICAgICAgICBmb3IgKDtpID49IDA7IC0taSkge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldLCBkeSA9IChub2RlLnkxIC0geSkgKiBhbHBoYTtcbiAgICAgICAgICAgIGR5ID4gMWUtNiAmJiAobm9kZS55MCAtPSBkeSwgbm9kZS55MSAtPSBkeSksIHkgPSBub2RlLnkwIC0gdGhpcy5fZ2FwWTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0YXJnZXRUb3Aoc291cmNlLCB0YXJnZXQpIHtcbiAgICAgICAgbGV0IGksIGxlbiwgbGluaywgeSA9IHNvdXJjZS55MCAtIChzb3VyY2Uuc291cmNlTGlua3MubGVuZ3RoIC0gMSkgKiB0aGlzLl9nYXBZIC8gMjtcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gc291cmNlLnNvdXJjZUxpbmtzLmxlbmd0aDsgaSA8IGxlbiAmJiAobGluayA9IHNvdXJjZS5zb3VyY2VMaW5rc1tpXSwgXG4gICAgICAgIGxpbmsudGFyZ2V0ICE9PSB0YXJnZXQua2V5KTsgaSsrKSB5ICs9IGxpbmsudGhpY2tuZXNzICsgdGhpcy5fZ2FwWTtcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gdGFyZ2V0LnRhcmdldExpbmtzLmxlbmd0aDsgaSA8IGxlbiAmJiAobGluayA9IHRhcmdldC50YXJnZXRMaW5rc1tpXSwgXG4gICAgICAgIGxpbmsuc291cmNlICE9PSBzb3VyY2Uua2V5KTsgaSsrKSB5IC09IGxpbmsudGhpY2tuZXNzO1xuICAgICAgICByZXR1cm4geTtcbiAgICB9XG4gICAgc291cmNlVG9wKHNvdXJjZSwgdGFyZ2V0KSB7XG4gICAgICAgIGxldCBpLCBsZW4sIGxpbmssIHkgPSB0YXJnZXQueTAgLSAodGFyZ2V0LnRhcmdldExpbmtzLmxlbmd0aCAtIDEpICogdGhpcy5fZ2FwWSAvIDI7XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHRhcmdldC50YXJnZXRMaW5rcy5sZW5ndGg7IGkgPCBsZW4gJiYgKGxpbmsgPSB0YXJnZXQudGFyZ2V0TGlua3NbaV0sIFxuICAgICAgICBsaW5rLnNvdXJjZSAhPT0gc291cmNlLmtleSk7IGkrKykgeSArPSBsaW5rLnRoaWNrbmVzcyArIHRoaXMuX2dhcFk7XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHNvdXJjZS5zb3VyY2VMaW5rcy5sZW5ndGg7IGkgPCBsZW4gJiYgKGxpbmsgPSBzb3VyY2Uuc291cmNlTGlua3NbaV0sIFxuICAgICAgICBsaW5rLnRhcmdldCAhPT0gdGFyZ2V0LmtleSk7IGkrKykgeSAtPSBsaW5rLnRoaWNrbmVzcztcbiAgICAgICAgcmV0dXJuIHk7XG4gICAgfVxuICAgIGNvbXB1dGVMaW5rQnJlYWR0aHNOb092ZXJsYXAobm9kZXMpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgICAgICBsZXQgeTAgPSBub2RlLnkwLCByZWFjaEJvdHRvbSA9ICExO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDAsIGxpbmtMZW4gPSBub2RlLnNvdXJjZUxpbmtzLmxlbmd0aDsgaiA8IGxpbmtMZW47IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBub2RlLnNvdXJjZUxpbmtzW2pdO1xuICAgICAgICAgICAgICAgIHJlYWNoQm90dG9tIHx8IChsaW5rLnkwID0geTAgKyBsaW5rLnRoaWNrbmVzcyAvIDIpLCBsaW5rLngwID0gbm9kZS54MSwgeTAgKyBsaW5rLnRoaWNrbmVzcyA+IG5vZGUueTEgfHwgcmVhY2hCb3R0b20gPyAobGluay55MCA9IG5vZGUueTEgLSBsaW5rLnRoaWNrbmVzcyAvIDIsIFxuICAgICAgICAgICAgICAgIHJlYWNoQm90dG9tID0gITApIDogeTAgKz0gbGluay50aGlja25lc3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgeTEgPSBub2RlLnkwO1xuICAgICAgICAgICAgcmVhY2hCb3R0b20gPSAhMTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBsaW5rTGVuID0gbm9kZS50YXJnZXRMaW5rcy5sZW5ndGg7IGogPCBsaW5rTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gbm9kZS50YXJnZXRMaW5rc1tqXTtcbiAgICAgICAgICAgICAgICByZWFjaEJvdHRvbSB8fCAobGluay55MSA9IHkxICsgbGluay50aGlja25lc3MgLyAyKSwgbGluay54MSA9IG5vZGUueDAsIHkxICsgbGluay50aGlja25lc3MgPiBub2RlLnkxIHx8IHJlYWNoQm90dG9tID8gKGxpbmsueTEgPSBub2RlLnkxIC0gbGluay50aGlja25lc3MgLyAyLCBcbiAgICAgICAgICAgICAgICByZWFjaEJvdHRvbSA9ICEwKSA6IHkxICs9IGxpbmsudGhpY2tuZXNzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXB1dGVMaW5rQnJlYWR0aHNPdmVybGFwKG5vZGVzKSB7XG4gICAgICAgIGNvbnN0IGxpbmtPdmVybGFwID0gdGhpcy5vcHRpb25zLmxpbmtPdmVybGFwO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gbm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXSwgcG9zID0gXCJzdGFydFwiID09PSBsaW5rT3ZlcmxhcCA/IG5vZGUueTAgOiBcImVuZFwiID09PSBsaW5rT3ZlcmxhcCA/IG5vZGUueTEgOiAobm9kZS55MCArIG5vZGUueTEpIC8gMiwgc2lnbiA9IFwic3RhcnRcIiA9PT0gbGlua092ZXJsYXAgPyAuNSA6IFwiZW5kXCIgPT09IGxpbmtPdmVybGFwID8gLS41IDogMDtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBsaW5rTGVuID0gbm9kZS5zb3VyY2VMaW5rcy5sZW5ndGg7IGogPCBsaW5rTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gbm9kZS5zb3VyY2VMaW5rc1tqXTtcbiAgICAgICAgICAgICAgICBsaW5rLnkwID0gcG9zICsgc2lnbiAqIGxpbmsudGhpY2tuZXNzLCBsaW5rLngwID0gbm9kZS54MTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBsaW5rTGVuID0gbm9kZS50YXJnZXRMaW5rcy5sZW5ndGg7IGogPCBsaW5rTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gbm9kZS50YXJnZXRMaW5rc1tqXTtcbiAgICAgICAgICAgICAgICBsaW5rLnkxID0gcG9zICsgc2lnbiAqIGxpbmsudGhpY2tuZXNzLCBsaW5rLngxID0gbm9kZS54MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21wdXRlTGlua0JyZWFkdGhzKG5vZGVzKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5saW5rT3ZlcmxhcCA/IHRoaXMuY29tcHV0ZUxpbmtCcmVhZHRoc092ZXJsYXAobm9kZXMpIDogdGhpcy5jb21wdXRlTGlua0JyZWFkdGhzTm9PdmVybGFwKG5vZGVzKTtcbiAgICB9XG4gICAgcmVvcmRlck5vZGVMaW5rcyhub2RlKSB7XG4gICAgICAgIGlmIChpc05pbCh0aGlzLm9wdGlvbnMubGlua1NvcnRCeSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldExpbmtzID0gbm9kZS50YXJnZXRMaW5rcywgc291cmNlTGlua3MgPSBub2RlLnNvdXJjZUxpbmtzO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDAsIGxpbmtMZW4gPSB0YXJnZXRMaW5rcy5sZW5ndGg7IGogPCBsaW5rTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gdGFyZ2V0TGlua3Nbal07XG4gICAgICAgICAgICAgICAgdGhpcy5fbm9kZU1hcFtsaW5rLnNvdXJjZV0uc291cmNlTGlua3Muc29ydCh0aGlzLl9hc2NlbmRpbmdUYXJnZXRCcmVhZHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBsaW5rTGVuID0gc291cmNlTGlua3MubGVuZ3RoOyBqIDwgbGlua0xlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluayA9IHNvdXJjZUxpbmtzW2pdO1xuICAgICAgICAgICAgICAgIHRoaXMuX25vZGVNYXBbbGluay50YXJnZXRdLnRhcmdldExpbmtzLnNvcnQodGhpcy5fYXNjZW5kaW5nU291cmNlQnJlYWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVvcmRlckxpbmtzKG5vZGVzKSB7XG4gICAgICAgIGlmIChpc05pbCh0aGlzLm9wdGlvbnMubGlua1NvcnRCeSkpIGZvciAobGV0IGkgPSAwLCBsZW4gPSBub2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICAgICAgbm9kZS5zb3VyY2VMaW5rcy5zb3J0KHRoaXMuX2FzY2VuZGluZ1RhcmdldEJyZWFkdGgpLCBub2RlLnRhcmdldExpbmtzLnNvcnQodGhpcy5fYXNjZW5kaW5nU291cmNlQnJlYWR0aCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblNhbmtleUxheW91dC5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBpdGVyYXRpb25zOiA2LFxuICAgIG5vZGVBbGlnbjogXCJqdXN0aWZ5XCIsXG4gICAgZGlyZWN0aW9uOiBcImhvcml6b250YWxcIixcbiAgICBub2RlV2lkdGg6IDI0LFxuICAgIG5vZGVHYXA6IDgsXG4gICAgY3Jvc3NOb2RlQWxpZ246IFwibWlkZGxlXCIsXG4gICAgZHJvcElzb2xhdGVkTm9kZTogITBcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sYXlvdXQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/layout.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/sankey-highlight.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/sankey-highlight.js ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SankeyHighlight: () => (/* binding */ SankeyHighlight)\n/* harmony export */ });\n/* harmony import */ var _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vgrammar-core */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-core@0.14.13/node_modules/@visactor/vgrammar-core/es/interactions/base.js\");\n/* harmony import */ var _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vgrammar-core */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-core@0.14.13/node_modules/@visactor/vgrammar-core/es/graph/enums.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.18.18/node_modules/@visactor/vutils/es/common/array.js\");\n\n\n\n\nclass SankeyHighlight extends _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_0__.BaseInteraction {\n    constructor(view, options) {\n        var _a, _b;\n        super(view, options), this.type = SankeyHighlight.type, this.highlightAdjacentElement = (element, isNode) => {\n            var _a, _b;\n            const datum = element.getDatum(), allLinkElements = null !== (_b = null === (_a = this._linkMark) || void 0 === _a ? void 0 : _a.elements) && void 0 !== _b ? _b : [], highlightNodes = isNode ? [ datum.key ] : [ datum.source, datum.target ], getIsHighlight = isNode ? linkDatum => linkDatum.target === datum.key || linkDatum.source === datum.key : linkDatum => linkDatum.source === datum.source && linkDatum.target === datum.target;\n            return allLinkElements.forEach((linkEl => {\n                const linkDatum = linkEl.getDatum();\n                getIsHighlight(linkDatum) ? (linkEl.removeState(this.options.blurState), linkEl.addState(this.options.highlightState, {\n                    ratio: 1\n                }), highlightNodes.includes(linkDatum.source) || highlightNodes.push(linkDatum.source), \n                highlightNodes.includes(linkDatum.target) || highlightNodes.push(linkDatum.target)) : (linkEl.removeState(this.options.highlightState), \n                linkEl.addState(this.options.blurState));\n            })), highlightNodes;\n        }, this.highlightRelatedBySourceTarget = (element, isNode) => {\n            var _a, _b, _c, _d, _e, _f;\n            if (!isNode) return this.highlightAdjacentElement(element, isNode);\n            const datum = element.getDatum(), allNodeElements = null !== (_b = null === (_a = this._nodeMark) || void 0 === _a ? void 0 : _a.elements) && void 0 !== _b ? _b : [], highlightNodes = [], allLinkElements = null !== (_d = null === (_c = this._linkMark) || void 0 === _c ? void 0 : _c.elements) && void 0 !== _d ? _d : [], highlightLinks = [], allNodes = allNodeElements.reduce(((res, nodeEl) => {\n                const nodeDatum = nodeEl.getDatum();\n                return res[null == nodeDatum ? void 0 : nodeDatum.key] = {\n                    datum: nodeDatum,\n                    el: nodeEl\n                }, res;\n            }), {}), downNodes = [ datum ], upNodes = [ datum ];\n            for (;downNodes.length; ) {\n                const first = downNodes.pop();\n                (null === (_e = null == first ? void 0 : first.sourceLinks) || void 0 === _e ? void 0 : _e.length) && first.sourceLinks.forEach((link => {\n                    highlightLinks.push(link), allNodes[link.target] && downNodes.push(allNodes[link.target].datum);\n                }));\n            }\n            for (;upNodes.length; ) {\n                const first = upNodes.pop();\n                (null === (_f = null == first ? void 0 : first.targetLinks) || void 0 === _f ? void 0 : _f.length) && first.targetLinks.forEach((link => {\n                    highlightLinks.push(link), allNodes[link.source] && upNodes.push(allNodes[link.source].datum);\n                }));\n            }\n            return allLinkElements.forEach((linkEl => {\n                const linkDatum = linkEl.getDatum();\n                highlightLinks.some((link => link.source === linkDatum.source && link.target === linkDatum.target)) ? (linkEl.removeState(this.options.blurState), \n                linkEl.addState(this.options.highlightState, {\n                    ratio: 1\n                }), highlightNodes.includes(linkDatum.source) || highlightNodes.push(linkDatum.source), \n                highlightNodes.includes(linkDatum.target) || highlightNodes.push(linkDatum.target)) : (linkEl.removeState(this.options.highlightState), \n                linkEl.addState(this.options.blurState));\n            })), highlightNodes;\n        }, this.highlightRelatedElement = (element, isNode) => {\n            var _a, _b, _c, _d, _e;\n            const allLinkElements = null !== (_b = null === (_a = this._linkMark) || void 0 === _a ? void 0 : _a.elements) && void 0 !== _b ? _b : [];\n            if (!!!(null === (_e = null === (_d = null === (_c = allLinkElements[0]) || void 0 === _c ? void 0 : _c.getDatum) || void 0 === _d ? void 0 : _d.call(_c)) || void 0 === _e ? void 0 : _e.parents)) return this.highlightRelatedBySourceTarget(element, isNode);\n            const datum = element.getDatum(), highlightNodes = isNode ? [ datum.key ] : [ datum.source, datum.target ], upstreamLinks = this.parseUpstreamLinks(element, isNode);\n            return allLinkElements.forEach((linkEl => {\n                const linkDatum = linkEl.getDatum(), originalDatum = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__.array)(linkDatum.datum);\n                if (!isNode && linkDatum.source === datum.source && linkDatum.target === datum.target) return linkEl.removeState(this.options.blurState), \n                void linkEl.addState(this.options.highlightState, {\n                    ratio: 1\n                });\n                const selectedDatum = isNode ? originalDatum.filter((entry => {\n                    var _a;\n                    return (null !== (_a = entry.parents) && void 0 !== _a ? _a : []).some((par => par.key === datum.key));\n                })) : originalDatum.filter((entry => {\n                    var _a;\n                    return (null !== (_a = entry.parents) && void 0 !== _a ? _a : []).some((par => par.key === datum.target));\n                }));\n                if (selectedDatum && selectedDatum.length) {\n                    highlightNodes.includes(linkDatum.source) || highlightNodes.push(linkDatum.source), \n                    highlightNodes.includes(linkDatum.target) || highlightNodes.push(linkDatum.target);\n                    const ratio = selectedDatum.reduce(((sum, d) => sum + d.value), 0) / linkDatum.value;\n                    return linkEl.removeState(this.options.blurState), void linkEl.addState(this.options.highlightState, {\n                        ratio: ratio\n                    });\n                }\n                const upSelectedLink = upstreamLinks.find((upLink => upLink.source === linkDatum.source && upLink.target === linkDatum.target));\n                if (upSelectedLink) return highlightNodes.includes(linkDatum.source) || highlightNodes.push(linkDatum.source), \n                highlightNodes.includes(linkDatum.target) || highlightNodes.push(linkDatum.target), \n                linkEl.removeState(this.options.blurState), void linkEl.addState(this.options.highlightState, {\n                    ratio: upSelectedLink.value / linkDatum.value\n                });\n                linkEl.removeState(this.options.highlightState), linkEl.addState(this.options.blurState);\n            })), highlightNodes;\n        }, this.highlightElement = (element, isNode) => {\n            var _a, _b;\n            const allNodeElements = null !== (_b = null === (_a = this._nodeMark) || void 0 === _a ? void 0 : _a.elements) && void 0 !== _b ? _b : [], highlightNodes = \"related\" === this.options.effect ? this.highlightRelatedElement(element, isNode) : this.highlightAdjacentElement(element, isNode);\n            allNodeElements.forEach((el => {\n                highlightNodes.includes(el.getDatum().key) ? (el.removeState(this.options.blurState), \n                el.addState(this.options.highlightState)) : (el.removeState(this.options.highlightState), \n                el.addState(this.options.blurState));\n            }));\n        }, this.handleStart = e => {\n            e.element && (e.element.mark === this._nodeMark ? (this._activeElement = e.element, \n            this.highlightElement(e.element, !0)) : e.element.mark === this._linkMark && (this._activeElement = e.element, \n            this.highlightElement(e.element, !1)));\n        }, this.handleReset = e => {\n            e.element && e.element === this._activeElement && this.clearPrevElements();\n        }, this.options = Object.assign({}, SankeyHighlight.defaultOptions, options), this._nodeMark = null === (_a = view.getMarksBySelector(this.options.nodeSelector)) || void 0 === _a ? void 0 : _a[0], \n        this._linkMark = null === (_b = view.getMarksBySelector(this.options.linkSelector)) || void 0 === _b ? void 0 : _b[0];\n    }\n    getEvents() {\n        return [ {\n            type: this.options.trigger,\n            handler: this.handleStart\n        }, {\n            type: this.options.triggerOff,\n            handler: this.handleReset\n        } ];\n    }\n    clearPrevElements() {\n        [ this._linkMark, this._nodeMark ].forEach((mark => {\n            mark && mark.elements.forEach((el => {\n                el.hasState(this.options.highlightState) && el.removeState(this.options.highlightState), \n                el.hasState(this.options.blurState) && el.removeState(this.options.blurState);\n            }));\n        }));\n    }\n    parseUpstreamLinks(element, isNode) {\n        const datum = element.getDatum();\n        return (isNode ? datum.targetLinks : (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__.array)(datum)).reduce(((res, link) => ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__.array)(link.datum).forEach((dividedLink => {\n            var _a;\n            const parents = null !== (_a = dividedLink.parents) && void 0 !== _a ? _a : [ {\n                key: dividedLink.source\n            } ], len = isNode ? parents.length : parents.length - 1;\n            for (let i = 0; i < len; i++) {\n                const source = parents[i].key, target = parents[i + 1] ? parents[i + 1].key : datum.key, value = dividedLink.value, existingItem = res.find((item => item.source === source && item.target === target));\n                existingItem ? existingItem.value += value : res.push({\n                    source: source,\n                    target: target,\n                    value: value\n                });\n            }\n        })), res)), []);\n    }\n}\n\nSankeyHighlight.type = \"sankey-highlight\", SankeyHighlight.defaultOptions = {\n    highlightState: _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_2__.InteractionStateEnum.highlight,\n    blurState: _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_2__.InteractionStateEnum.blur,\n    trigger: \"pointerover\",\n    triggerOff: \"pointerout\",\n    effect: \"related\"\n};\n//# sourceMappingURL=sankey-highlight.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL3NhbmtleS1oaWdobGlnaHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnRjs7QUFFdkM7O0FBRWxDLDhCQUE4QixvRUFBZTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYSxLQUFLO0FBQ2xCLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0Esa0JBQWtCLGdCQUFnQjtBQUNsQztBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsdURBQUs7QUFDMUU7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUyxpQ0FBaUM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsdURBQUssaUNBQWlDLHVEQUFLO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCw0QkFBNEIsU0FBUztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0IseUVBQW9CO0FBQ3hDLGVBQWUseUVBQW9CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9meW5sYXRpY3MtYWkvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL3NhbmtleS1oaWdobGlnaHQuanM/YWRlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnRlcmFjdGlvblN0YXRlRW51bSwgQmFzZUludGVyYWN0aW9uIH0gZnJvbSBcIkB2aXNhY3Rvci92Z3JhbW1hci1jb3JlXCI7XG5cbmltcG9ydCB7IGFycmF5IH0gZnJvbSBcIkB2aXNhY3Rvci92dXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIFNhbmtleUhpZ2hsaWdodCBleHRlbmRzIEJhc2VJbnRlcmFjdGlvbiB7XG4gICAgY29uc3RydWN0b3Iodmlldywgb3B0aW9ucykge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBzdXBlcih2aWV3LCBvcHRpb25zKSwgdGhpcy50eXBlID0gU2Fua2V5SGlnaGxpZ2h0LnR5cGUsIHRoaXMuaGlnaGxpZ2h0QWRqYWNlbnRFbGVtZW50ID0gKGVsZW1lbnQsIGlzTm9kZSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIGNvbnN0IGRhdHVtID0gZWxlbWVudC5nZXREYXR1bSgpLCBhbGxMaW5rRWxlbWVudHMgPSBudWxsICE9PSAoX2IgPSBudWxsID09PSAoX2EgPSB0aGlzLl9saW5rTWFyaykgfHwgdm9pZCAwID09PSBfYSA/IHZvaWQgMCA6IF9hLmVsZW1lbnRzKSAmJiB2b2lkIDAgIT09IF9iID8gX2IgOiBbXSwgaGlnaGxpZ2h0Tm9kZXMgPSBpc05vZGUgPyBbIGRhdHVtLmtleSBdIDogWyBkYXR1bS5zb3VyY2UsIGRhdHVtLnRhcmdldCBdLCBnZXRJc0hpZ2hsaWdodCA9IGlzTm9kZSA/IGxpbmtEYXR1bSA9PiBsaW5rRGF0dW0udGFyZ2V0ID09PSBkYXR1bS5rZXkgfHwgbGlua0RhdHVtLnNvdXJjZSA9PT0gZGF0dW0ua2V5IDogbGlua0RhdHVtID0+IGxpbmtEYXR1bS5zb3VyY2UgPT09IGRhdHVtLnNvdXJjZSAmJiBsaW5rRGF0dW0udGFyZ2V0ID09PSBkYXR1bS50YXJnZXQ7XG4gICAgICAgICAgICByZXR1cm4gYWxsTGlua0VsZW1lbnRzLmZvckVhY2goKGxpbmtFbCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlua0RhdHVtID0gbGlua0VsLmdldERhdHVtKCk7XG4gICAgICAgICAgICAgICAgZ2V0SXNIaWdobGlnaHQobGlua0RhdHVtKSA/IChsaW5rRWwucmVtb3ZlU3RhdGUodGhpcy5vcHRpb25zLmJsdXJTdGF0ZSksIGxpbmtFbC5hZGRTdGF0ZSh0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0U3RhdGUsIHtcbiAgICAgICAgICAgICAgICAgICAgcmF0aW86IDFcbiAgICAgICAgICAgICAgICB9KSwgaGlnaGxpZ2h0Tm9kZXMuaW5jbHVkZXMobGlua0RhdHVtLnNvdXJjZSkgfHwgaGlnaGxpZ2h0Tm9kZXMucHVzaChsaW5rRGF0dW0uc291cmNlKSwgXG4gICAgICAgICAgICAgICAgaGlnaGxpZ2h0Tm9kZXMuaW5jbHVkZXMobGlua0RhdHVtLnRhcmdldCkgfHwgaGlnaGxpZ2h0Tm9kZXMucHVzaChsaW5rRGF0dW0udGFyZ2V0KSkgOiAobGlua0VsLnJlbW92ZVN0YXRlKHRoaXMub3B0aW9ucy5oaWdobGlnaHRTdGF0ZSksIFxuICAgICAgICAgICAgICAgIGxpbmtFbC5hZGRTdGF0ZSh0aGlzLm9wdGlvbnMuYmx1clN0YXRlKSk7XG4gICAgICAgICAgICB9KSksIGhpZ2hsaWdodE5vZGVzO1xuICAgICAgICB9LCB0aGlzLmhpZ2hsaWdodFJlbGF0ZWRCeVNvdXJjZVRhcmdldCA9IChlbGVtZW50LCBpc05vZGUpID0+IHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICAgICAgICAgICAgaWYgKCFpc05vZGUpIHJldHVybiB0aGlzLmhpZ2hsaWdodEFkamFjZW50RWxlbWVudChlbGVtZW50LCBpc05vZGUpO1xuICAgICAgICAgICAgY29uc3QgZGF0dW0gPSBlbGVtZW50LmdldERhdHVtKCksIGFsbE5vZGVFbGVtZW50cyA9IG51bGwgIT09IChfYiA9IG51bGwgPT09IChfYSA9IHRoaXMuX25vZGVNYXJrKSB8fCB2b2lkIDAgPT09IF9hID8gdm9pZCAwIDogX2EuZWxlbWVudHMpICYmIHZvaWQgMCAhPT0gX2IgPyBfYiA6IFtdLCBoaWdobGlnaHROb2RlcyA9IFtdLCBhbGxMaW5rRWxlbWVudHMgPSBudWxsICE9PSAoX2QgPSBudWxsID09PSAoX2MgPSB0aGlzLl9saW5rTWFyaykgfHwgdm9pZCAwID09PSBfYyA/IHZvaWQgMCA6IF9jLmVsZW1lbnRzKSAmJiB2b2lkIDAgIT09IF9kID8gX2QgOiBbXSwgaGlnaGxpZ2h0TGlua3MgPSBbXSwgYWxsTm9kZXMgPSBhbGxOb2RlRWxlbWVudHMucmVkdWNlKCgocmVzLCBub2RlRWwpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlRGF0dW0gPSBub2RlRWwuZ2V0RGF0dW0oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzW251bGwgPT0gbm9kZURhdHVtID8gdm9pZCAwIDogbm9kZURhdHVtLmtleV0gPSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdHVtOiBub2RlRGF0dW0sXG4gICAgICAgICAgICAgICAgICAgIGVsOiBub2RlRWxcbiAgICAgICAgICAgICAgICB9LCByZXM7XG4gICAgICAgICAgICB9KSwge30pLCBkb3duTm9kZXMgPSBbIGRhdHVtIF0sIHVwTm9kZXMgPSBbIGRhdHVtIF07XG4gICAgICAgICAgICBmb3IgKDtkb3duTm9kZXMubGVuZ3RoOyApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdCA9IGRvd25Ob2Rlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAobnVsbCA9PT0gKF9lID0gbnVsbCA9PSBmaXJzdCA/IHZvaWQgMCA6IGZpcnN0LnNvdXJjZUxpbmtzKSB8fCB2b2lkIDAgPT09IF9lID8gdm9pZCAwIDogX2UubGVuZ3RoKSAmJiBmaXJzdC5zb3VyY2VMaW5rcy5mb3JFYWNoKChsaW5rID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0TGlua3MucHVzaChsaW5rKSwgYWxsTm9kZXNbbGluay50YXJnZXRdICYmIGRvd25Ob2Rlcy5wdXNoKGFsbE5vZGVzW2xpbmsudGFyZ2V0XS5kYXR1bSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICg7dXBOb2Rlcy5sZW5ndGg7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0ID0gdXBOb2Rlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAobnVsbCA9PT0gKF9mID0gbnVsbCA9PSBmaXJzdCA/IHZvaWQgMCA6IGZpcnN0LnRhcmdldExpbmtzKSB8fCB2b2lkIDAgPT09IF9mID8gdm9pZCAwIDogX2YubGVuZ3RoKSAmJiBmaXJzdC50YXJnZXRMaW5rcy5mb3JFYWNoKChsaW5rID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0TGlua3MucHVzaChsaW5rKSwgYWxsTm9kZXNbbGluay5zb3VyY2VdICYmIHVwTm9kZXMucHVzaChhbGxOb2Rlc1tsaW5rLnNvdXJjZV0uZGF0dW0pO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhbGxMaW5rRWxlbWVudHMuZm9yRWFjaCgobGlua0VsID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rRGF0dW0gPSBsaW5rRWwuZ2V0RGF0dW0oKTtcbiAgICAgICAgICAgICAgICBoaWdobGlnaHRMaW5rcy5zb21lKChsaW5rID0+IGxpbmsuc291cmNlID09PSBsaW5rRGF0dW0uc291cmNlICYmIGxpbmsudGFyZ2V0ID09PSBsaW5rRGF0dW0udGFyZ2V0KSkgPyAobGlua0VsLnJlbW92ZVN0YXRlKHRoaXMub3B0aW9ucy5ibHVyU3RhdGUpLCBcbiAgICAgICAgICAgICAgICBsaW5rRWwuYWRkU3RhdGUodGhpcy5vcHRpb25zLmhpZ2hsaWdodFN0YXRlLCB7XG4gICAgICAgICAgICAgICAgICAgIHJhdGlvOiAxXG4gICAgICAgICAgICAgICAgfSksIGhpZ2hsaWdodE5vZGVzLmluY2x1ZGVzKGxpbmtEYXR1bS5zb3VyY2UpIHx8IGhpZ2hsaWdodE5vZGVzLnB1c2gobGlua0RhdHVtLnNvdXJjZSksIFxuICAgICAgICAgICAgICAgIGhpZ2hsaWdodE5vZGVzLmluY2x1ZGVzKGxpbmtEYXR1bS50YXJnZXQpIHx8IGhpZ2hsaWdodE5vZGVzLnB1c2gobGlua0RhdHVtLnRhcmdldCkpIDogKGxpbmtFbC5yZW1vdmVTdGF0ZSh0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0U3RhdGUpLCBcbiAgICAgICAgICAgICAgICBsaW5rRWwuYWRkU3RhdGUodGhpcy5vcHRpb25zLmJsdXJTdGF0ZSkpO1xuICAgICAgICAgICAgfSkpLCBoaWdobGlnaHROb2RlcztcbiAgICAgICAgfSwgdGhpcy5oaWdobGlnaHRSZWxhdGVkRWxlbWVudCA9IChlbGVtZW50LCBpc05vZGUpID0+IHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgICAgICAgICBjb25zdCBhbGxMaW5rRWxlbWVudHMgPSBudWxsICE9PSAoX2IgPSBudWxsID09PSAoX2EgPSB0aGlzLl9saW5rTWFyaykgfHwgdm9pZCAwID09PSBfYSA/IHZvaWQgMCA6IF9hLmVsZW1lbnRzKSAmJiB2b2lkIDAgIT09IF9iID8gX2IgOiBbXTtcbiAgICAgICAgICAgIGlmICghISEobnVsbCA9PT0gKF9lID0gbnVsbCA9PT0gKF9kID0gbnVsbCA9PT0gKF9jID0gYWxsTGlua0VsZW1lbnRzWzBdKSB8fCB2b2lkIDAgPT09IF9jID8gdm9pZCAwIDogX2MuZ2V0RGF0dW0pIHx8IHZvaWQgMCA9PT0gX2QgPyB2b2lkIDAgOiBfZC5jYWxsKF9jKSkgfHwgdm9pZCAwID09PSBfZSA/IHZvaWQgMCA6IF9lLnBhcmVudHMpKSByZXR1cm4gdGhpcy5oaWdobGlnaHRSZWxhdGVkQnlTb3VyY2VUYXJnZXQoZWxlbWVudCwgaXNOb2RlKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdHVtID0gZWxlbWVudC5nZXREYXR1bSgpLCBoaWdobGlnaHROb2RlcyA9IGlzTm9kZSA/IFsgZGF0dW0ua2V5IF0gOiBbIGRhdHVtLnNvdXJjZSwgZGF0dW0udGFyZ2V0IF0sIHVwc3RyZWFtTGlua3MgPSB0aGlzLnBhcnNlVXBzdHJlYW1MaW5rcyhlbGVtZW50LCBpc05vZGUpO1xuICAgICAgICAgICAgcmV0dXJuIGFsbExpbmtFbGVtZW50cy5mb3JFYWNoKChsaW5rRWwgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtEYXR1bSA9IGxpbmtFbC5nZXREYXR1bSgpLCBvcmlnaW5hbERhdHVtID0gYXJyYXkobGlua0RhdHVtLmRhdHVtKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTm9kZSAmJiBsaW5rRGF0dW0uc291cmNlID09PSBkYXR1bS5zb3VyY2UgJiYgbGlua0RhdHVtLnRhcmdldCA9PT0gZGF0dW0udGFyZ2V0KSByZXR1cm4gbGlua0VsLnJlbW92ZVN0YXRlKHRoaXMub3B0aW9ucy5ibHVyU3RhdGUpLCBcbiAgICAgICAgICAgICAgICB2b2lkIGxpbmtFbC5hZGRTdGF0ZSh0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0U3RhdGUsIHtcbiAgICAgICAgICAgICAgICAgICAgcmF0aW86IDFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZERhdHVtID0gaXNOb2RlID8gb3JpZ2luYWxEYXR1bS5maWx0ZXIoKGVudHJ5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG51bGwgIT09IChfYSA9IGVudHJ5LnBhcmVudHMpICYmIHZvaWQgMCAhPT0gX2EgPyBfYSA6IFtdKS5zb21lKChwYXIgPT4gcGFyLmtleSA9PT0gZGF0dW0ua2V5KSk7XG4gICAgICAgICAgICAgICAgfSkpIDogb3JpZ2luYWxEYXR1bS5maWx0ZXIoKGVudHJ5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG51bGwgIT09IChfYSA9IGVudHJ5LnBhcmVudHMpICYmIHZvaWQgMCAhPT0gX2EgPyBfYSA6IFtdKS5zb21lKChwYXIgPT4gcGFyLmtleSA9PT0gZGF0dW0udGFyZ2V0KSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZERhdHVtICYmIHNlbGVjdGVkRGF0dW0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodE5vZGVzLmluY2x1ZGVzKGxpbmtEYXR1bS5zb3VyY2UpIHx8IGhpZ2hsaWdodE5vZGVzLnB1c2gobGlua0RhdHVtLnNvdXJjZSksIFxuICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHROb2Rlcy5pbmNsdWRlcyhsaW5rRGF0dW0udGFyZ2V0KSB8fCBoaWdobGlnaHROb2Rlcy5wdXNoKGxpbmtEYXR1bS50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByYXRpbyA9IHNlbGVjdGVkRGF0dW0ucmVkdWNlKCgoc3VtLCBkKSA9PiBzdW0gKyBkLnZhbHVlKSwgMCkgLyBsaW5rRGF0dW0udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaW5rRWwucmVtb3ZlU3RhdGUodGhpcy5vcHRpb25zLmJsdXJTdGF0ZSksIHZvaWQgbGlua0VsLmFkZFN0YXRlKHRoaXMub3B0aW9ucy5oaWdobGlnaHRTdGF0ZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW86IHJhdGlvXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB1cFNlbGVjdGVkTGluayA9IHVwc3RyZWFtTGlua3MuZmluZCgodXBMaW5rID0+IHVwTGluay5zb3VyY2UgPT09IGxpbmtEYXR1bS5zb3VyY2UgJiYgdXBMaW5rLnRhcmdldCA9PT0gbGlua0RhdHVtLnRhcmdldCkpO1xuICAgICAgICAgICAgICAgIGlmICh1cFNlbGVjdGVkTGluaykgcmV0dXJuIGhpZ2hsaWdodE5vZGVzLmluY2x1ZGVzKGxpbmtEYXR1bS5zb3VyY2UpIHx8IGhpZ2hsaWdodE5vZGVzLnB1c2gobGlua0RhdHVtLnNvdXJjZSksIFxuICAgICAgICAgICAgICAgIGhpZ2hsaWdodE5vZGVzLmluY2x1ZGVzKGxpbmtEYXR1bS50YXJnZXQpIHx8IGhpZ2hsaWdodE5vZGVzLnB1c2gobGlua0RhdHVtLnRhcmdldCksIFxuICAgICAgICAgICAgICAgIGxpbmtFbC5yZW1vdmVTdGF0ZSh0aGlzLm9wdGlvbnMuYmx1clN0YXRlKSwgdm9pZCBsaW5rRWwuYWRkU3RhdGUodGhpcy5vcHRpb25zLmhpZ2hsaWdodFN0YXRlLCB7XG4gICAgICAgICAgICAgICAgICAgIHJhdGlvOiB1cFNlbGVjdGVkTGluay52YWx1ZSAvIGxpbmtEYXR1bS52YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxpbmtFbC5yZW1vdmVTdGF0ZSh0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0U3RhdGUpLCBsaW5rRWwuYWRkU3RhdGUodGhpcy5vcHRpb25zLmJsdXJTdGF0ZSk7XG4gICAgICAgICAgICB9KSksIGhpZ2hsaWdodE5vZGVzO1xuICAgICAgICB9LCB0aGlzLmhpZ2hsaWdodEVsZW1lbnQgPSAoZWxlbWVudCwgaXNOb2RlKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgY29uc3QgYWxsTm9kZUVsZW1lbnRzID0gbnVsbCAhPT0gKF9iID0gbnVsbCA9PT0gKF9hID0gdGhpcy5fbm9kZU1hcmspIHx8IHZvaWQgMCA9PT0gX2EgPyB2b2lkIDAgOiBfYS5lbGVtZW50cykgJiYgdm9pZCAwICE9PSBfYiA/IF9iIDogW10sIGhpZ2hsaWdodE5vZGVzID0gXCJyZWxhdGVkXCIgPT09IHRoaXMub3B0aW9ucy5lZmZlY3QgPyB0aGlzLmhpZ2hsaWdodFJlbGF0ZWRFbGVtZW50KGVsZW1lbnQsIGlzTm9kZSkgOiB0aGlzLmhpZ2hsaWdodEFkamFjZW50RWxlbWVudChlbGVtZW50LCBpc05vZGUpO1xuICAgICAgICAgICAgYWxsTm9kZUVsZW1lbnRzLmZvckVhY2goKGVsID0+IHtcbiAgICAgICAgICAgICAgICBoaWdobGlnaHROb2Rlcy5pbmNsdWRlcyhlbC5nZXREYXR1bSgpLmtleSkgPyAoZWwucmVtb3ZlU3RhdGUodGhpcy5vcHRpb25zLmJsdXJTdGF0ZSksIFxuICAgICAgICAgICAgICAgIGVsLmFkZFN0YXRlKHRoaXMub3B0aW9ucy5oaWdobGlnaHRTdGF0ZSkpIDogKGVsLnJlbW92ZVN0YXRlKHRoaXMub3B0aW9ucy5oaWdobGlnaHRTdGF0ZSksIFxuICAgICAgICAgICAgICAgIGVsLmFkZFN0YXRlKHRoaXMub3B0aW9ucy5ibHVyU3RhdGUpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSwgdGhpcy5oYW5kbGVTdGFydCA9IGUgPT4ge1xuICAgICAgICAgICAgZS5lbGVtZW50ICYmIChlLmVsZW1lbnQubWFyayA9PT0gdGhpcy5fbm9kZU1hcmsgPyAodGhpcy5fYWN0aXZlRWxlbWVudCA9IGUuZWxlbWVudCwgXG4gICAgICAgICAgICB0aGlzLmhpZ2hsaWdodEVsZW1lbnQoZS5lbGVtZW50LCAhMCkpIDogZS5lbGVtZW50Lm1hcmsgPT09IHRoaXMuX2xpbmtNYXJrICYmICh0aGlzLl9hY3RpdmVFbGVtZW50ID0gZS5lbGVtZW50LCBcbiAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0RWxlbWVudChlLmVsZW1lbnQsICExKSkpO1xuICAgICAgICB9LCB0aGlzLmhhbmRsZVJlc2V0ID0gZSA9PiB7XG4gICAgICAgICAgICBlLmVsZW1lbnQgJiYgZS5lbGVtZW50ID09PSB0aGlzLl9hY3RpdmVFbGVtZW50ICYmIHRoaXMuY2xlYXJQcmV2RWxlbWVudHMoKTtcbiAgICAgICAgfSwgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgU2Fua2V5SGlnaGxpZ2h0LmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKSwgdGhpcy5fbm9kZU1hcmsgPSBudWxsID09PSAoX2EgPSB2aWV3LmdldE1hcmtzQnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMubm9kZVNlbGVjdG9yKSkgfHwgdm9pZCAwID09PSBfYSA/IHZvaWQgMCA6IF9hWzBdLCBcbiAgICAgICAgdGhpcy5fbGlua01hcmsgPSBudWxsID09PSAoX2IgPSB2aWV3LmdldE1hcmtzQnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMubGlua1NlbGVjdG9yKSkgfHwgdm9pZCAwID09PSBfYiA/IHZvaWQgMCA6IF9iWzBdO1xuICAgIH1cbiAgICBnZXRFdmVudHMoKSB7XG4gICAgICAgIHJldHVybiBbIHtcbiAgICAgICAgICAgIHR5cGU6IHRoaXMub3B0aW9ucy50cmlnZ2VyLFxuICAgICAgICAgICAgaGFuZGxlcjogdGhpcy5oYW5kbGVTdGFydFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLm9wdGlvbnMudHJpZ2dlck9mZixcbiAgICAgICAgICAgIGhhbmRsZXI6IHRoaXMuaGFuZGxlUmVzZXRcbiAgICAgICAgfSBdO1xuICAgIH1cbiAgICBjbGVhclByZXZFbGVtZW50cygpIHtcbiAgICAgICAgWyB0aGlzLl9saW5rTWFyaywgdGhpcy5fbm9kZU1hcmsgXS5mb3JFYWNoKChtYXJrID0+IHtcbiAgICAgICAgICAgIG1hcmsgJiYgbWFyay5lbGVtZW50cy5mb3JFYWNoKChlbCA9PiB7XG4gICAgICAgICAgICAgICAgZWwuaGFzU3RhdGUodGhpcy5vcHRpb25zLmhpZ2hsaWdodFN0YXRlKSAmJiBlbC5yZW1vdmVTdGF0ZSh0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0U3RhdGUpLCBcbiAgICAgICAgICAgICAgICBlbC5oYXNTdGF0ZSh0aGlzLm9wdGlvbnMuYmx1clN0YXRlKSAmJiBlbC5yZW1vdmVTdGF0ZSh0aGlzLm9wdGlvbnMuYmx1clN0YXRlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBwYXJzZVVwc3RyZWFtTGlua3MoZWxlbWVudCwgaXNOb2RlKSB7XG4gICAgICAgIGNvbnN0IGRhdHVtID0gZWxlbWVudC5nZXREYXR1bSgpO1xuICAgICAgICByZXR1cm4gKGlzTm9kZSA/IGRhdHVtLnRhcmdldExpbmtzIDogYXJyYXkoZGF0dW0pKS5yZWR1Y2UoKChyZXMsIGxpbmspID0+IChhcnJheShsaW5rLmRhdHVtKS5mb3JFYWNoKChkaXZpZGVkTGluayA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRzID0gbnVsbCAhPT0gKF9hID0gZGl2aWRlZExpbmsucGFyZW50cykgJiYgdm9pZCAwICE9PSBfYSA/IF9hIDogWyB7XG4gICAgICAgICAgICAgICAga2V5OiBkaXZpZGVkTGluay5zb3VyY2VcbiAgICAgICAgICAgIH0gXSwgbGVuID0gaXNOb2RlID8gcGFyZW50cy5sZW5ndGggOiBwYXJlbnRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc291cmNlID0gcGFyZW50c1tpXS5rZXksIHRhcmdldCA9IHBhcmVudHNbaSArIDFdID8gcGFyZW50c1tpICsgMV0ua2V5IDogZGF0dW0ua2V5LCB2YWx1ZSA9IGRpdmlkZWRMaW5rLnZhbHVlLCBleGlzdGluZ0l0ZW0gPSByZXMuZmluZCgoaXRlbSA9PiBpdGVtLnNvdXJjZSA9PT0gc291cmNlICYmIGl0ZW0udGFyZ2V0ID09PSB0YXJnZXQpKTtcbiAgICAgICAgICAgICAgICBleGlzdGluZ0l0ZW0gPyBleGlzdGluZ0l0ZW0udmFsdWUgKz0gdmFsdWUgOiByZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogc291cmNlLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgcmVzKSksIFtdKTtcbiAgICB9XG59XG5cblNhbmtleUhpZ2hsaWdodC50eXBlID0gXCJzYW5rZXktaGlnaGxpZ2h0XCIsIFNhbmtleUhpZ2hsaWdodC5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBoaWdobGlnaHRTdGF0ZTogSW50ZXJhY3Rpb25TdGF0ZUVudW0uaGlnaGxpZ2h0LFxuICAgIGJsdXJTdGF0ZTogSW50ZXJhY3Rpb25TdGF0ZUVudW0uYmx1cixcbiAgICB0cmlnZ2VyOiBcInBvaW50ZXJvdmVyXCIsXG4gICAgdHJpZ2dlck9mZjogXCJwb2ludGVyb3V0XCIsXG4gICAgZWZmZWN0OiBcInJlbGF0ZWRcIlxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbmtleS1oaWdobGlnaHQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/sankey-highlight.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/transform.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/transform.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   transform: () => (/* binding */ transform)\n/* harmony export */ });\n/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layout */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/layout.js\");\n\n\nconst transform = (options, upstreamData) => {\n    const res = new _layout__WEBPACK_IMPORTED_MODULE_0__.SankeyLayout(options).layout(Array.isArray(upstreamData) ? upstreamData[0] : upstreamData, \"width\" in options ? {\n        width: options.width,\n        height: options.height\n    } : {\n        x0: options.x0,\n        x1: options.x1,\n        y0: options.y0,\n        y1: options.y1\n    });\n    return res ? [ res ] : [];\n};\n//# sourceMappingURL=transform.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL3RyYW5zZm9ybS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3Qzs7QUFFakM7QUFDUCxvQkFBb0IsaURBQVk7QUFDaEM7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9meW5sYXRpY3MtYWkvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXNhbmtleUAwLjE0LjEzL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItc2Fua2V5L2VzL3RyYW5zZm9ybS5qcz8yMTU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNhbmtleUxheW91dCB9IGZyb20gXCIuL2xheW91dFwiO1xuXG5leHBvcnQgY29uc3QgdHJhbnNmb3JtID0gKG9wdGlvbnMsIHVwc3RyZWFtRGF0YSkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IG5ldyBTYW5rZXlMYXlvdXQob3B0aW9ucykubGF5b3V0KEFycmF5LmlzQXJyYXkodXBzdHJlYW1EYXRhKSA/IHVwc3RyZWFtRGF0YVswXSA6IHVwc3RyZWFtRGF0YSwgXCJ3aWR0aFwiIGluIG9wdGlvbnMgPyB7XG4gICAgICAgIHdpZHRoOiBvcHRpb25zLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IG9wdGlvbnMuaGVpZ2h0XG4gICAgfSA6IHtcbiAgICAgICAgeDA6IG9wdGlvbnMueDAsXG4gICAgICAgIHgxOiBvcHRpb25zLngxLFxuICAgICAgICB5MDogb3B0aW9ucy55MCxcbiAgICAgICAgeTE6IG9wdGlvbnMueTFcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzID8gWyByZXMgXSA6IFtdO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-sankey@0.14.13/node_modules/@visactor/vgrammar-sankey/es/transform.js\n");

/***/ })

};
;